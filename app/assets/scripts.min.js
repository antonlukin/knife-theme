!function(){var a=document.querySelectorAll(".widget-adfox");if(a.length<1)return;function m(a,o){var t=a.match(/\/(\d+?)\/.+?\?(.+)$/)||[];if(2<t.length){o.ownerId=t[1],o.params={};for(var d=t[2].split("&"),e=0;e<d.length;e++){var n=d[e].split("=");1!=n.length&&"pr"!==n[0]&&(o.params[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}}return o}function p(a,o){return a.onStub=function(){o.classList.remove("widget-adfox--loaded")},a.onError=function(){o.classList.remove("widget-adfox--loaded")},a.onLoad=function(){o.classList.add("widget-adfox--loaded")},a}function o(a,o,t){if(a.common)return d=a.common,e=t,(n={}).containerId="adfox_"+o,n=m(d,n=p(n,e)),window.adfoxAsyncParams=window.adfoxAsyncParams||[],void window.adfoxAsyncParams.push(n);var d,e,n,r,i,s,c,l,f;a.mobile&&(r=a.mobile,i=t,(s={}).containerId="adfox_"+o,s=m(r,s=p(s,i)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([s,["tablet","phone"],{tabletWidth:1023,isAutoReloads:!0}])),a.desktop&&(c=a.desktop,l=t,(f={}).containerId="adfox_"+o,f=m(c,f=p(f,l)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([f,["desktop"],{tabletWidth:1023,isAutoReloads:!0}]))}for(var t=0;t<a.length;t++){var d=a[t].querySelector("div");if(null!==d&&0!==d.dataset.length){var e=Date.now().toString(10)+Math.random().toString(10).substr(2,5),n=document.createElement("div");n.id="adfox_"+e,a[t].replaceChild(n,d),o(d.dataset,e,a[t])}}var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.crossorigin="anonymous",r.src="https://yastatic.net/pcode/adfox/loader.js",document.head.appendChild(r)}();
!function(){if("undefined"==typeof knife_backdrop)return;if(void 0===knife_backdrop.image)return void 0!==knife_backdrop.color&&(document.body.style.backgroundColor="#"+knife_backdrop.color);var e=document.createElement("div");e.classList.add("backdrop"),e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;o.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)}),o.src=knife_backdrop.image}();
!function(){var e=document.getElementById("hypercomments_widget");if(null===e||"undefined"==typeof knife_comments_id)return;_hcwp=window._hcwp||[],_hcwp.push({widget:"Stream",widget_id:knife_comments_id,callback:function(){e.classList.add("comments--expand")}});var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://w.hypercomments.com/widget/hc/"+knife_comments_id+"/ru/widget.js",document.head.appendChild(t)}();
!function(){var e=document.querySelector(".post");if(null===e)return;function a(e){var t=document.createElement("iframe"),r=function(e){var t=document.createElement("div");t.classList.add("embed__loader"),e.appendChild(t);var r=document.createElement("span");return r.classList.add("embed__loader-bounce"),t.appendChild(r),t}(e);return t.setAttribute("allow","autoplay"),t.setAttribute("frameborder","0"),t.setAttribute("src",e.dataset.embed),t.addEventListener("load",function(){r.parentNode.removeChild(r)}),t}e.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.parentNode.classList.contains("embed")){var r=t.parentNode;if(r.hasAttribute("data-embed")){for(e.preventDefault();r.firstChild;)r.removeChild(r.firstChild);r.appendChild(a(r))}}})}();
!function(){var e=document.querySelector(".entry-content");if(null===e)return;var r=document.querySelector(".entry-inpost");if(null===r||null===r.firstElementChild)return;var n=Math.floor(e.children.length/3);if(8<e.children.length)for(var t=["p","blockquote"],i=n;i<e.children.length;i++){var l=e.children[i];if(!(t.indexOf(l.tagName.toLowerCase())<0)&&void 0!==e.children[i-1]){var a=e.children[i-1];if(!(t.indexOf(a.tagName.toLowerCase())<0)){var d=document.createElement("aside");d.classList.add("aside","aside--widget"),d.appendChild(r.firstElementChild),e.insertBefore(d,l);break}}}}();
!function(){if("undefined"==typeof knife_form_request)return;var o,s,i;function d(e,t,n){if(void 0===t.element)return null;var r=document.createElement(t.element);r.classList.add("form__field-"+t.element),r.setAttribute("name",e);var a,o=document.createElement("div");for(var s in o.classList.add("form__field"),o.appendChild(r),delete t.element,t)r.setAttribute(s,t[s]);return r.value=(a=e,(JSON.parse(localStorage.getItem("knife_form_request"))||{})[a]||""),r.addEventListener("input",function(e){var t,n,r;t=this.name,n=this.value,(r=JSON.parse(localStorage.getItem("knife_form_request"))||{})[t]=n,localStorage.setItem("knife_form_request",JSON.stringify(r))}),r.addEventListener("focus",function(e){n.classList.remove("form--fold")}),n.appendChild(o)}function a(e){return s.classList.remove("icon--loop"),void 0===e||!0===e?i.removeAttribute("disabled",""):(s.classList.remove("icon--alert","icon--done"),s.classList.add("icon--loop"),o.innerHTML="",i.setAttribute("disabled",""))}function c(e){e=e||l("warning","Request error");s.classList.add("icon--alert"),o.innerHTML=e}function l(e,t){return knife_form_request.hasOwnProperty(e)?knife_form_request[e]:t||""}var u=document.createElement("form");document.querySelector(".entry-content").appendChild(u);var e=l("classes");0<e.length&&(u.className=e.join(" "));var t=l("heading");if(0<t.length){var n=document.createElement("h3");n.classList.add("form__heading"),n.textContent=t,u.appendChild(n)}u.classList.add("form"),u.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(u),n="action="+l("action")+"&nonce="+l("nonce");t.forEach(function(e,t){n+="&"+t+"="+e});var r=new XMLHttpRequest;return r.open("POST",l("ajaxurl")),r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),r.onload=function(){if(a(!0),200!==r.status)return c();var e,t=JSON.parse(r.responseText);return t.success?(e=(e=t.data)||"",s.classList.add("icon--done"),o.innerHTML=e,localStorage.removeItem("knife_form_request"),u.reset()):c(t.data)},r.send(n),a(!1)}),function(e){var t,n,r=knife_form_request.fields;for(var a in r)r.hasOwnProperty(a)&&d(a,r[a],e);t=e,(n=document.createElement("div")).classList.add("form__control"),(s=document.createElement("span")).classList.add("form__control-loader","icon"),n.appendChild(s),(o=document.createElement("span")).classList.add("form__control-notice"),n.appendChild(o),(i=document.createElement("button")).classList.add("form__control-button","button"),i.innerHTML=l("button","Send"),n.appendChild(i),t.appendChild(n)}(u)}();
!function(){var _=document.getElementById("generator");if(null===_||"undefined"==typeof knife_generator_options)return;if(void 0!==knife_generator_options.page_background&&(_.style.backgroundColor=knife_generator_options.page_background),void 0!==knife_generator_options.page_color&&(_.style.color=knife_generator_options.page_color),"undefined"==typeof knife_generator_items||knife_generator_items.length<1)return;var a=null;!function(){var e=document.createElement("div");e.classList.add("entry-generator__loader"),_.insertBefore(e,_.firstChild);var t=document.createElement("span");t.classList.add("entry-generator__loader-bounce"),e.appendChild(t)}(),function(){if(void 0===knife_generator_options.button_text)return;var e=document.createElement("div");e.classList.add("entry-generator__button"),_.appendChild(e),(a=document.createElement("button")).classList.add("button"),a.setAttribute("type","button"),a.textContent=knife_generator_options.button_text,e.appendChild(a),void 0!==knife_generator_options.button_background&&(a.style.backgroundColor=knife_generator_options.button_background),void 0!==knife_generator_options.button_color&&(a.style.color=knife_generator_options.button_color)}(),a.addEventListener("click",function(e){e.preventDefault();var t,n=Math.floor(Math.random()*knife_generator_items.length),r=knife_generator_items[n];void 0!==knife_generator_options.button_repeat&&(a.textContent=knife_generator_options.button_repeat),_.querySelector(".entry-generator__share")&&function(e){if(void 0===knife_generator_options.share_links)return;if(void 0===knife_generator_options.permalink)return;if(knife_generator_options.hasOwnProperty("noshare")&&knife_generator_options.noshare)return;for(var t,n=_.querySelector(".entry-generator__title").textContent,r=[knife_generator_options.permalink.replace(/\/?$/,"/")+e+"/",n],o=_.querySelectorAll(".share > .share__link"),i=0;t=o[i];i++){var a=t.getAttribute("data-label");if(void 0!==knife_generator_options.share_links[a]){var s=knife_generator_options.share_links[a];t.href=s.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(r[t-1])})}}"function"==typeof window.shareButtons&&window.shareButtons()}(n+1),null===(t=_.querySelector(".entry-generator__content"))&&((t=document.createElement("div")).classList.add("entry-generator__content"),_.insertBefore(t,_.lastChild));if(t.innerHTML=r.description||"",_.classList.add("entry-generator--loader"),"undefined"===knife_generator_options.blank||!knife_generator_options.blank){var o=_.querySelector(".entry-generator__poster");if(null!==o&&o.parentNode.removeChild(o),void 0!==r.poster)return(o=new Image).classList.add("entry-generator__poster"),_.insertBefore(o,_.firstChild),o.addEventListener("load",function(){setTimeout(function(){_.classList.remove("entry-generator--loader")},600)}),o.setAttribute("alt",r.heading||""),o.setAttribute("src",r.poster),_.classList.add("entry-generator--poster")}var i=_.querySelector(".entry-generator__title");return null===i&&((i=document.createElement("div")).classList.add("entry-generator__title"),_.insertBefore(i,_.firstChild)),i.innerHTML=r.heading||"",setTimeout(function(){_.classList.remove("entry-generator--loader")},600),_.classList.add("entry-generator--blank")})}();
!function(){var r=document.getElementById("toggle-search"),a=document.querySelector(".search"),c=document.querySelector(".header");if(null===r)return;if(null===a||"undefined"==typeof knife_search_id)return r.classList.add("toggle--hidden");var l="search-gcse",n="gsc-results";function o(){google.search.cse.element.render({gname:l,div:l,tag:"searchresults-only",attributes:{enableHistory:!1,gaQueryParameter:"s",queryParameterName:"s"}}),document.getElementById("search-input").oninput=function(){google.search.cse.element.getElement(l).execute(this.value)};var e=window.MutationObserver||window.WebKitMutationObserver;new e(function(e){for(var t=0;t<e.length;++t)if(e[t].target.classList.contains(n))return s()}).observe(document.getElementById(l),{subtree:!0,attributes:!1,childList:!0,characterData:!1})}function s(){for(var a=document.getElementById("search-results"),e=document.getElementById(l).querySelectorAll(".gs-result");a.firstChild;)a.removeChild(a.firstChild);if(0<document.getElementById("search-input").value.length){function t(e){var t={link:e.querySelector("a.gs-title").href,head:e.querySelector("a.gs-title").textContent,text:e.querySelector(".gs-snippet").textContent},n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(t.head));var s=document.createElement("p");s.className="search__results-text",s.appendChild(document.createTextNode(t.text));var r=document.createElement("a");return r.className="search__results-link",r.href=t.link,r.appendChild(n),r.appendChild(s),a.appendChild(r)}if(1==e.length&&e[0].classList.contains("gs-no-results-result")){var n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(e[0].textContent)),a.appendChild(n)}for(var s=0;s<e.length;s++){if(!e[s].querySelector("a.gs-title")||!e[s].querySelector(".gs-snippet"))return!1;t(e[s])}}}r.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("search-input");t.blur();var n=document.body;document.body.classList.contains("is-navbar")&&document.getElementById("toggle-menu").click(),r.classList.toggle("toggle--expand"),a.classList.toggle("search--expand");var s=c.parentElement.firstChild;if(document.body.classList.contains("is-search")){for(n.classList.remove("is-search"),n.style.top="";s&&s!==c;)1==s.nodeType&&(s.style.display=""),s=s.nextSibling;return window.scrollTo(0,scrollTop)}for(;s&&s!==c;)1==s.nodeType&&(s.style.display="none"),s=s.nextSibling;scrollTop=window.scrollY,n.classList.add("is-search"),n.style.top=-scrollTop+"px",void 0===window.__gcse&&function(e){var t=document.createElement("div");t.id=l,t.style.display="none",a.appendChild(t),window.__gcse={parsetags:"explicit",callback:o};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cse.google.com/cse.js?cx="+e;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)}(knife_search_id),setTimeout(function(){t.focus()},100)}),window.addEventListener("keydown",function(e){if(27===(e=e||window.event).keyCode&&a.classList.contains("search--expand"))return r.click()},!0)}();
!function(){var t=document.getElementById("toggle-menu"),n=document.querySelector(".header");if(null===t)return;var s=document.body,i=0;function r(e){for(var t=n.parentElement.firstChild;t&&t!==n;)1==t.nodeType&&(t.style.display=e),t=t.nextSibling}function c(e){if((e.target||e.srcElement)===s)return e.stopPropagation(),s.removeEventListener("click",c),t.click()}t.addEventListener("click",function(e){return e.preventDefault(),s.classList.contains("is-search")&&document.getElementById("toggle-search").click(),t.classList.toggle("toggle--expand"),n.querySelector(".navbar").classList.toggle("navbar--expand"),s.classList.contains("is-navbar")?(s.classList.remove("is-navbar"),s.style.top="",s.removeAttribute("onclick",""),window.scrollTo(0,i),r("")):(i=window.scrollY,s.classList.add("is-navbar"),s.style.top=-i+"px",s.setAttribute("onclick",""),s.addEventListener("click",c),r("none"))})}();
!function(){var a=document.querySelector(".post");if(null===a)return;var c=document.body;a.addEventListener("click",function(e){var n=e.target||e.srcElement;if(n.hasAttribute("data-body")){var r=document.getElementById("reference");function t(e){var t=e.target||e.srcElement;t!==r&&!t.classList.contains("reference__content-close")||(r.parentNode.removeChild(r),n.removeAttribute("data-active"),c.classList.remove("is-reference"))}null!==r&&r.parentNode.removeChild(r),function(e,t){var n=t.getBoundingClientRect();a.classList.contains("post--standard")&&e.classList.add("reference--push");var r=n.top+window.pageYOffset||document.documentElement.scrollTop;e.style.top=r+"px"}(r=function(e){var t=document.createElement("div");t.classList.add("reference"),t.setAttribute("id","reference");var n=document.createElement("div");n.classList.add("reference__content"),n.innerHTML=e,t.appendChild(n);var r=document.createElement("button");return r.classList.add("reference__content-close"),n.appendChild(r),c.appendChild(t),t}(n.getAttribute("data-body")),n),n.setAttribute("data-active",!0),c.classList.add("is-reference"),r.addEventListener("click",t),r.addEventListener("touchend",t)}})}();
!function(){var c=document.getElementById("quiz");if(null===c||"undefined"==typeof knife_quiz_options)return;var _=null,n=0,d=0,l={};function s(a,u,c){knife_quiz_options.hasOwnProperty("format")||(knife_quiz_options.format="binary"),u.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-answer")&&!u.classList.contains("entry-quiz__vote--complete")){var n=a[t.dataset.answer];switch(u.classList.add("entry-quiz__vote--complete"),knife_quiz_options.format){case"category":if(n.hasOwnProperty("category")&&n.category){var i=0;l.hasOwnProperty(n.category)&&(i=l[n.category]),l[n.category]=i+1,d=Object.keys(l).reduce(function(e,t){return l[e]>l[t]?e:t})}t.classList.add(c+"--selected");break;case"points":n.hasOwnProperty("points")&&n.points&&(d+=parseInt(n.points)),t.classList.add(c+"--selected");break;case"binary":if(n.hasOwnProperty("binary")&&n.binary){d+=1,t.classList.add(c+"--correct");break}for(var r=0;r<a.length;r++){var o=t.parentNode.children[r];a[r].hasOwnProperty("binary")&&a[r].binary&&o.classList.add(c+"--missed")}t.classList.add(c+"--wrong")}if(knife_quiz_options.hasOwnProperty("message")&&knife_quiz_options.message){var s=document.createElement("div");if(s.classList.add("entry-quiz__vote-message"),n.message)return s.innerHTML=n.message,u.appendChild(s)}return _.click()}})}function a(e,t){var n=document.createElement("div");return n.classList.add("entry-quiz__vote"),c.insertBefore(n,t),knife_quiz_options.hasOwnProperty("shuffle")&&knife_quiz_options.shuffle&&e.sort(function(){return.5-Math.random()}),knife_quiz_options.hasOwnProperty("attachment")&&knife_quiz_options.attachment?function(e,t){var n=document.createElement("div");n.classList.add("entry-quiz__vote-grid"),t.appendChild(n);for(var i=0;i<e.length;i++){var r=document.createElement("figure");if(void 0!==e[i].attachment){var o=document.createElement("img");o.setAttribute("src",e[i].attachment),r.appendChild(o),r.classList.add("entry-quiz__vote-attachment"),r.setAttribute("data-answer",i),n.appendChild(r)}}s(e,t,"entry-quiz__vote-attachment"),t.classList.add("entry-quiz__vote--attachment")}(e,n):function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("div");void 0!==e[n].choice&&(i.classList.add("entry-quiz__vote-choice"),i.setAttribute("data-answer",n),i.innerHTML=e[n].choice,t.appendChild(i))}s(e,t,"entry-quiz__vote-choice"),t.classList.add("entry-quiz__vote--choice")}(e,n)}function i(e,t){var n=c.getBoundingClientRect().top+window.pageYOffset;if(window.scroll({top:n-76,behavior:"smooth"}),e.hasOwnProperty("poster")){var i=document.createElement("img");i.classList.add("entry-quiz__poster"),i.setAttribute("src",e.poster),c.insertBefore(i,c.firstChild)}var r=c.querySelector(".entry-quiz__share");document.body.contains(r)&&function(e,t){if(void 0===knife_quiz_options.share_links)return;if(void 0===knife_quiz_options.permalink)return;if(knife_quiz_options.hasOwnProperty("noshare")&&knife_quiz_options.noshare)return;for(var n,i=c.querySelector(".entry-quiz__title").textContent,r=[knife_quiz_options.permalink.replace(/\/?$/,"/")+t+"/",e.heading||i],o=c.querySelectorAll(".share > .share__link"),s=0;n=o[s];s++){var a=n.getAttribute("data-label");if(void 0!==knife_quiz_options.share_links[a]){var u=knife_quiz_options.share_links[a];n.href=u.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(r[t-1])})}}"function"==typeof window.shareButtons&&window.shareButtons()}(e,t);var o=c.querySelector(".entry-quiz__vote");document.body.contains(o)&&o.parentNode.removeChild(o);var s=c.querySelector(".entry-quiz__content");return e.hasOwnProperty("details")?s.innerHTML=e.details:s.parentNode.removeChild(s)}knife_quiz_options.hasOwnProperty("center")&&knife_quiz_options.center&&c.classList.add("entry-quiz--center"),knife_quiz_options.hasOwnProperty("button_start")&&((_=document.createElement("button")).classList.add("entry-quiz__button","button"),_.setAttribute("type","button"),_.textContent=knife_quiz_options.button_start),c.appendChild(_),"object"!=typeof knife_quiz_items&&(knife_quiz_items=[]),knife_quiz_options.hasOwnProperty("random")&&knife_quiz_options.random&&knife_quiz_items.sort(function(){return.5-Math.random()}),"object"!=typeof knife_quiz_results&&(knife_quiz_results={}),_.addEventListener("click",function(){var e=knife_quiz_items.length;if(0<e&&n<e){var t=knife_quiz_items[n];return n+=1,!1===c.classList.contains("entry-quiz--item")&&(c.classList.add("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_next")&&(_.textContent=knife_quiz_options.button_next)),n===e&&knife_quiz_options.hasOwnProperty("button_last")&&(_.textContent=knife_quiz_options.button_last),function(e,t,n){var i=c.getBoundingClientRect().top+window.pageYOffset;window.scroll({top:i-76,behavior:"smooth"});var r=c.querySelector(".entry-quiz__content");e.hasOwnProperty("question")&&(r.innerHTML=e.question),c.querySelector(".entry-quiz__info").textContent=t+" / "+n;var o=c.querySelector(".entry-quiz__vote");document.body.contains(o)&&o.parentNode.removeChild(o),"object"==typeof e.answers&&0<e.answers.length&&a(e.answers,r.nextSibling)}(t,n,e)}return!1===c.classList.contains("entry-quiz--results")&&"object"==typeof knife_quiz_results[d]?(c.classList.remove("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_repeat")&&(_.textContent=knife_quiz_options.button_repeat),knife_quiz_options.hasOwnProperty("norepeat")&&knife_quiz_options.norepeat&&_.parentNode.removeChild(_),c.classList.add("entry-quiz--results"),i(knife_quiz_results[d],d)):document.location.reload()})}();
!function(){function o(e,t){var n=Math.round(screen.width/2-t.width/2),o=0;screen.height>t.height&&(o=Math.round(screen.height/3-t.height/2)),window.open(e,t.id,"left="+n+",top="+o+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")}function a(e){var t,n,o=document.createElement("script");return o.type="text/javascript",o.src=(t=e,n=(n=document.querySelector('link[rel="canonical"]'))&&n.href?encodeURIComponent(n.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===t?"https://vk.com/share.php?act=count&index=0&url="+n:"facebook"===t?"https://graph.facebook.com/?fields=og_object{engagement}&callback=FB.Share&id="+n:void 0),o.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(o),!0}var r={facebook:!1,vkontakte:!1};window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;for(var t=0;t<e.length;t++){var n=e[t].dataset.label;e[t].addEventListener("click",function(e){return e.preventDefault(),o(this.href,{width:600,height:400,id:this.dataset.label})}),n in r&&!1===r[n]&&(r[n]=a(n))}},window.VK={Share:{count:function(e,t){if(document.getElementById("share-vkontakte").outerHTML="",void 0!==t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),o=0;o<n.length;o++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t,n[o].appendChild(a)}}}},window.FB={Share:function(e){if(document.getElementById("share-facebook").outerHTML="",void 0!==e.og_object&&void 0!==e.og_object.engagement){var t=e.og_object.engagement;if(void 0!==t.count&&t.count)for(var n=document.querySelectorAll(".share .share__link--facebook"),o=0;o<n.length;o++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t.count,n[o].appendChild(a)}}}},window.shareButtons()}();
!function(){if("undefined"==typeof knife_similar_posts)return;var o=function(e){for(var t,n=0;n<e.length;n++){t=Math.floor(Math.random()*n);var r=e[n];e[n]=e[t],e[t]=r}return e}(knife_similar_posts.similar||[]),f=0;function d(e,t){var n=document.createElement("p");e.appendChild(n);var r=document.createElement("a");r.href=t.link,r.innerHTML=t.title,n.appendChild(r)}!function(){var e=document.querySelector(".entry-footer");if(null===e||o.length<f+4)return;var t=document.createElement("div");t.classList.add("entry-footer__similar");for(var n=f;n<f+4;n++)o[n].link&&o[n].title&&d(t,o[n]);f+=4,e.appendChild(t)}(),function(){var e=document.querySelectorAll(".entry-content");if(1!==e.length||1==knife_similar_posts.hidden)return;var t=e[0].children;if(t.length<15||o.length<f+3)return;for(var n=["p","blockquote"],r=null,i=Math.floor(t.length/1.5);i<t.length-5;i++)if(!(n.indexOf(t[i].tagName.toLowerCase())<0||void 0===t[i-1]||n.indexOf(t[i-1].tagName.toLowerCase())<0)){r=t[i-1];break}if(null===r)return;var l=document.createElement("figure");l.classList.add("figure","figure--similar");var a=document.createElement("h4");a.innerHTML=knife_similar_posts.title||"",l.appendChild(a);for(i=f;i<f+3;i++)o[i].link&&o[i].title&&d(l,o[i]);f+=3,r.parentNode.insertBefore(l,r.nextSibling)}()}();
!function(){var i=document.getElementById("story");if(null===i||"undefined"==typeof Glide)return;if(i.querySelectorAll(".entry-story__slide").length<1)return;if("undefined"==typeof knife_story_items||knife_story_items.length<1)return;var n=new Glide(".entry-story",{gap:0,rewind:!1,touchAngle:60,swipeThreshold:60,dragThreshold:!1,classes:{slider:"entry-story--slider",swipeable:"entry-story--swipeable",direction:{ltr:"entry-story--ltr",rtl:"entry-story--rtl"}},breakpoints:{767:{dragThreshold:!0}}}),o={};n.on("mount.before",function(){for(var t,e=0;t=knife_story_items[e];e++){var r=document.createElement("div");r.classList.add("entry-story__slide-wrap");var n=document.createElement("div");n.classList.add("entry-story__slide-content"),function(){if(void 0===t.kicker)return;var e=document.createElement("div");e.classList.add("entry-story__slide-kicker"),e.innerHTML=t.kicker,r.appendChild(e)}(),function(){if(void 0===t.image||void 0===t.ratio)return;var e=document.createElement("div");e.classList.add("entry-story__slide-image"),e.style.setProperty("background-image","url("+t.image+")"),e.style.setProperty("--image-ratio",t.ratio),n.appendChild(e)}(),function(){if(void 0===t.entry)return;var e=document.createElement("div");e.classList.add("entry-story__slide-entry"),e.innerHTML=t.entry,n.appendChild(e)}();var o=document.createElement("div");o.classList.add("entry-story__slide"),o.appendChild(r),r.appendChild(n),i.querySelector(".entry-story__slides").appendChild(o)}}),n.on("mount.before",function(){var e=i.querySelectorAll(".entry-story__slide");if(e.length<1)return!1;var t=e[0].querySelector(".share");if(null===t)return!1;var r=t.cloneNode(!0);e[e.length-1].querySelector(".entry-story__slide-content").appendChild(r),"function"==typeof window.shareButtons&&window.shareButtons()}),n.on("mount.before",function(){var e=document.createElement("div");e.classList.add("entry-story__bullets");for(var t=0;t<i.querySelectorAll(".entry-story__slide").length;t++){var r=document.createElement("span");r.classList.add("entry-story__bullets-item"),e.appendChild(r)}return i.appendChild(e)}),n.on("mount.before",function(e){var t=document.querySelector('link[rel="prev"]');if(null===t||!t.hasAttribute("href"))return!1;o.href=t.href;var r=document.createElement("div");return r.classList.add("entry-story__slide","entry-story__slide--empty"),i.querySelector(".entry-story__slides").appendChild(r)}),n.on("mount.before",function(){["prev","next"].forEach(function(e,t){var r=document.createElement("div");r.classList.add("entry-story__control","entry-story__control--"+e),r.classList.add();var n=document.createElement("span");n.classList.add("icon","icon--"+e),r.appendChild(n),i.appendChild(r)}),i.querySelector(".entry-story__control--next").addEventListener("click",function(e){e.preventDefault(),n.go(">")}),i.querySelector(".entry-story__control--prev").addEventListener("click",function(e){e.preventDefault(),n.go("<")})}),n.on("mount.before",function(){var e=i.getBoundingClientRect();i.style.height=window.innerHeight-e.top-window.pageYOffset+"px"}),n.on(["mount.after","run"],function(){for(var e,t=i.querySelectorAll(".entry-story__bullets-item"),r=0;e=t[r];r++)e.classList.remove("entry-story__bullets-item--active"),n.index===r&&e.classList.add("entry-story__bullets-item--active")}),n.on("mount.after",function(){var e=i.querySelectorAll(".entry-story__slide");o.count=e.length-1}),n.on(["mount.after","run"],function(e){var t=i.querySelector(".entry-story__control--prev");t.classList.remove("entry-story__control--disabled"),0===n.index&&t.classList.add("entry-story__control--disabled")}),n.on("run",function(e){var t=i.querySelector(".entry-story__control--next");t.classList.remove("entry-story__control--disabled"),n.index===o.count&&t.classList.add("entry-story__control--disabled")}),n.on("run",function(e){n.index===o.count&&o.href&&i.classList.remove("entry-story--active")}),n.on("run.after",function(e){n.index===o.count&&o.href&&(document.location.href=o.href)}),n.on("build.after",function(){var r=0;i.addEventListener("touchstart",function(e){var t=e.changedTouches[0];r=t.pageY},!0),i.addEventListener("touchmove",function(e){var t=e.changedTouches[0];r<t.pageY&&0===window.pageYOffset&&e.preventDefault(),i.classList.contains("entry-story--dragging")&&e.preventDefault()},!0)}),n.on("build.after",function(){if(void 0===knife_story_options.color||knife_story_options.color.length<1)return!1;i.style.backgroundColor=knife_story_options.color}),n.on("build.after",function(){if(void 0===knife_story_options.background||knife_story_options.background.length<1)return i.classList.add("entry-story--active");var e=new Image;e.addEventListener("load",function(){return i.classList.add("entry-story--active")}),e.src=knife_story_options.background;var r=document.createElement("div");return r.classList.add("entry-story__backdrop"),r.style.backgroundImage="url("+knife_story_options.background+")",function(){if(void 0===knife_story_options.blur)return;var e=parseInt(knife_story_options.blur);if(e<=0)return;r.style.margin="-"+e+"px",r.style.filter="blur("+e+"px)"}(),function(){if(void 0===knife_story_options.shadow)return;var e=parseInt(knife_story_options.shadow)/100;if(e<=0||1<e)return;var t=document.createElement("div");t.classList.add("entry-story__shadow"),t.style.backgroundColor="rgba(0, 0, 0, "+e+")",r.appendChild(t)}(),i.appendChild(r)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),n.mount()}();
!function(){var e=document.querySelector(".post");if(null===e)return;for(var t=e.querySelectorAll(".figure.figure--toc a"),o=0;o<t.length;o++)t[o].addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(this.hash);if(null!==t){var o=t.getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop;window.scroll({top:o-76,behavior:"smooth"})}})}();
"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")});