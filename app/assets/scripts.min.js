!function(){if("undefined"==typeof knife_backdrop)return;var e=document.createElement("div");if(e.classList.add("backdrop"),void 0!==knife_backdrop.color&&(document.querySelector(".footer").style.backgroundColor="#"+knife_backdrop.color),void 0===knife_backdrop.image)return document.body.appendChild(e);e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;o.onload=function(){document.body.appendChild(e)},o.src=knife_backdrop.image}();
!function(){var c=document.getElementById("load-comments");if(null===c||"undefined"==typeof knife_comments_id)return;var d=null;c.addEventListener("click",function(e){if(e.preventDefault(),null!==d)return d.classList.toggle("comments--expand");var n=c.textContent;return c.innerHTML='<span class="icon icon--loop"></span>',function(e){_hcwp=window._hcwp||[],_hcwp.push({widget:"Stream",widget_id:knife_comments_id,callback:e});var n=document.createElement("div");n.classList.add("entry-comments__widget"),c.parentNode.appendChild(n),(d=document.createElement("div")).id="hypercomments_widget",d.classList.add("comments"),n.appendChild(d);var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://w.hypercomments.com/widget/hc/"+knife_comments_id+"/ru/widget.js",document.head.appendChild(t)}(function(){c.innerHTML=n,d.classList.add("comments--expand")})})}();
!function(){for(var e=document.querySelectorAll(".embed-youtube"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault();var t=document.createElement("iframe");for(t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",""),t.setAttribute("src","https://www.youtube.com/embed/"+this.dataset.embed+"?rel=0&showinfo=0&autoplay=1");this.firstChild;)this.removeChild(this.firstChild);this.appendChild(t)})}();
!function(){var a=document.querySelector(".search"),n=document.getElementById("toggle-search");if(null===n)return;if(null===a||"undefined"==typeof knife_search_id)return n.classList.add("toggle--hidden");var c="search-gcse",s="gsc-results";function r(){if("complete"!==document.readyState)return google.setOnLoadCallback(r,!0);google.search.cse.element.render({gname:c,div:c,tag:"searchresults-only",attributes:{enableHistory:!1,gaQueryParameter:"s",queryParameterName:"s"}}),document.getElementById("search-input").oninput=function(){google.search.cse.element.getElement(c).execute(this.value)};var e=window.MutationObserver||window.WebKitMutationObserver;new e(function(e){for(var t=0;t<e.length;++t)if(e[t].target.classList.contains(s))return l()}).observe(document.getElementById(c),{subtree:!0,attributes:!1,childList:!0,characterData:!1})}function l(){for(var r=document.getElementById("search-results"),e=document.getElementById(c).querySelectorAll(".gs-result");r.firstChild;)r.removeChild(r.firstChild);if(0<document.getElementById("search-input").value.length){function t(e){var t={link:e.querySelector("a.gs-title").href,head:e.querySelector("a.gs-title").textContent,text:e.querySelector(".gs-snippet").textContent},n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(t.head));var s=document.createElement("p");s.className="search__results-text",s.appendChild(document.createTextNode(t.text));var a=document.createElement("a");return a.className="search__results-link",a.href=t.link,a.appendChild(n),a.appendChild(s),r.appendChild(a)}if(1==e.length&&e[0].classList.contains("gs-no-results-result")){var n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(e[0].textContent)),r.appendChild(n)}for(var s=0;s<e.length;s++){if(!e[s].querySelector("a.gs-title")||!e[s].querySelector(".gs-snippet"))return!1;t(e[s])}}}n.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("search-input");t.blur();document.body.classList.contains("is-search");document.body.classList.contains("is-navbar")&&document.getElementById("toggle-menu").click(),a.classList.toggle("search--expand"),n.classList.toggle("toggle--expand"),document.body.classList.toggle("is-search"),document.body.classList.contains("is-search")||(void 0===window.__gcse&&function(e){var t=document.createElement("div");t.id=c,t.style.display="none",a.appendChild(t),window.__gcse={parsetags:"explicit",callback:r};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cse.google.com/cse.js?cx="+e;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)}(knife_search_id),t.focus())}),window.addEventListener("keydown",function(e){if(27===(e=e||window.event).keyCode&&a.classList.contains("search--expand"))return n.click()},!0)}();
!function(){var n=document.getElementById("toggle-menu"),t=document.querySelector(".navbar");if(null===n)return;n.addEventListener("click",function(e){e.preventDefault();document.body.classList.contains("is-navbar");document.body.classList.contains("is-search")&&document.getElementById("toggle-search").click(),t.classList.toggle("navbar--expand"),n.classList.toggle("toggle--expand"),document.body.classList.toggle("is-navbar")}),window.addEventListener("keydown",function(e){if(e=e||window.event,t.classList.contains("navbar--expand")&&27===e.keyCode)return n.click()},!0)}();
!function(){if("undefined"==typeof knife_push)return;OneSignal=window.OneSignal||[];document.addEventListener("DOMContentLoaded",function(){if(!1==(e=localStorage.getItem("knife-push"),"undefined"!=typeof Notification&&"default"===Notification.permission&&("string"==typeof e&&Number(e)<Date.now()||(null===e&&localStorage.setItem("knife-push",Date.now()),!1)))||void 0===knife_push.appid)return!1;var e,n,t,i,o=((i=document.createElement("div")).classList.add("push","push--hide"),document.body.appendChild(i),(n=document.createElement("button")).classList.add("push__close"),n.setAttribute("data-action","Push Notifications â€” Decline"),i.appendChild(n),(t=document.createElement("div")).classList.add("push__promo"),void 0!==knife_push.promo&&(t.innerHTML=knife_push.promo),i.appendChild(t),function(){var e=document.createElement("button");e.classList.add("push__button"),i.appendChild(e),void 0!==knife_push.button&&(e.innerHTML=knife_push.button);var n=document.createElement("span");n.classList.add("icon","icon--notify"),e.appendChild(n)}(),i);return OneSignal.push(["init",{appId:knife_push.appid,autoRegister:!1,welcomeNotification:{disable:!0}}]),OneSignal.push(function(){if(o.querySelector(".push__close").addEventListener("click",function(){return localStorage.setItem("knife-push",Date.now()+12096e5),o.classList.add("push--hide")}),o.querySelector(".push__button").addEventListener("click",function(){return OneSignal.registerForPushNotifications()}),OneSignal.on("notificationPermissionChange",function(e){return o.classList.add("push--hide")}),OneSignal.isPushNotificationsSupported())return o.classList.remove("push--hide")}),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.onesignal.com/sdks/OneSignalSDK.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()},!1)}();
!function(){if("undefined"==typeof knife_relap_options)return;var t=knife_relap_options;!function(){if(t.token.length<1)return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://relap.io/api/v6/head.js?token="+t.token,document.head.appendChild(e)}(),function(){if(t.block.length<1)return;var e=document.createElement("div");e.classList.add("entry-footer__relap"),e.innerHTML='<script id="'+t.block+'"><\/script>',document.querySelector(".entry-footer").appendChild(e)}()}();
!function(){if(null===document.querySelector(".share"))return;var r={facebook:!1,vkontakte:!1},a=function(e,t){var n=Math.round(screen.width/2-t.width/2),r=0;screen.height>t.height&&(r=Math.round(screen.height/3-t.height/2));window.open(e,t.id,"left="+n+",top="+r+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")},o=function(e){var t,n,r=document.createElement("script");return r.type="text/javascript",r.src=(t=e,n=(n=document.querySelector('link[rel="canonical"]'))&&n.href?encodeURIComponent(n.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===t?"https://vk.com/share.php?act=count&index=0&url="+n:"facebook"===t?"https://graph.facebook.com/?callback=FB.Share&id="+n:void 0),r.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(r),!0};window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;for(var t=0;t<e.length;t++){var n=e[t].dataset.label;e[t].addEventListener("click",function(e){return e.preventDefault(),a(this.href,{width:600,height:400,id:this.dataset.label})}),n in r&&!1===r[n]&&(r[n]=o(n))}},window.VK={Share:{count:function(e,t){if(document.getElementById("share-vkontakte").outerHTML="",void 0!==t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),r=0;r<n.length;r++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t,n[r].appendChild(a)}}}},window.FB={Share:function(e){if(document.getElementById("share-facebook").outerHTML="",void 0!==e.share&&e.share.share_count)for(var t=document.querySelectorAll(".share .share__link--facebook"),n=0;n<t.length;n++){var r=document.createElement("span");r.className="share__count",r.innerHTML=e.share.share_count,t[n].appendChild(r)}}},window.shareButtons()}();
!function(){var e=document.querySelector(".entry-content");if("undefined"==typeof knife_similar_posts)return;if(null===e||e.children.length<10)return;for(var i=function(e){for(var i,t=0;t<e.length;t++){i=Math.floor(Math.random()*t);var n=e[t];e[t]=e[i],e[i]=n}return e}(knife_similar_posts),t=function(e,i){if(void 0===i.link||void 0===i.title)return!1;var t=document.createElement("figure");t.classList.add("similar");var n=document.createElement("div");n.classList.add("similar__item"),t.appendChild(n),function(){if(void 0===i.emoji)return;var e=document.createElement("div");e.classList.add("similar__emoji"),e.innerHTML=i.emoji,t.appendChild(e)}(),function(){if(void 0===i.head)return;var e=document.createElement("div");e.classList.add("similar__item-head"),e.innerHTML=i.head,n.appendChild(e)}();var r=document.createElement("a");r.classList.add("similar__item-link"),r.href=i.link,r.innerHTML=i.title,n.appendChild(r),function(){if(void 0===i.action)return;r.setAttribute("data-action",i.action)}(),function(){if(void 0===i.label)return;r.setAttribute("data-label",i.label)}(),e.parentNode.insertBefore(t,e.nextSibling)},n=Math.floor(e.children.length/3),r=0;r<2;r++)if(void 0!==i[r]){for(var a=n;a<e.children.length-5;a++){var l=e.children[a];if("p"===l.tagName.toLowerCase()){t(l,i[r]);break}}n=Math.floor(e.children.length/3)+a}}();
!function(){var l=document.querySelector(".glide");if(null===l||"undefined"==typeof Glide)return;if(l.querySelectorAll(".glide__slide").length<1)return;var i=new Glide(".glide",{gap:0,rewind:!1,touchAngle:30,dragThreshold:!1,breakpoints:{767:{dragThreshold:!0}}}),r={};i.on("mount.before",function(){if("undefined"==typeof knife_story_stories||knife_story_stories.length<1)return!1;for(var t,e=0;t=knife_story_stories[e];e++){var n=document.createElement("div");n.classList.add("glide__slide-wrap");var i=document.createElement("div");i.classList.add("glide__slide-content"),function(){if(void 0===t.kicker)return;var e=document.createElement("div");e.classList.add("glide__slide-kicker"),e.innerHTML=t.kicker,n.appendChild(e)}(),function(){if(void 0===t.image||void 0===t.ratio)return;var e=document.createElement("div");e.classList.add("glide__slide-image"),e.style.setProperty("background-image","url("+t.image+")"),e.style.setProperty("--image-ratio",t.ratio),i.appendChild(e)}(),function(){if(void 0===t.entry)return;var e=document.createElement("div");e.classList.add("glide__slide-entry"),e.innerHTML=t.entry,i.appendChild(e)}();var r=document.createElement("div");r.classList.add("glide__slide"),r.appendChild(n),n.appendChild(i),l.querySelector(".glide__slides").appendChild(r)}}),i.on("mount.before",function(){var e=l.querySelectorAll(".glide__slide");if(e.length<1)return!1;var t=e[0].querySelector(".share");if(null===t)return!1;var n=t.cloneNode(!0),i=e[e.length-1];if(void 0!==knife_story_options.action)for(var r,o=n.querySelectorAll(".share__link"),d=0;r=o[d];d++)r.setAttribute("data-action",knife_story_options.action);return i.querySelector(".glide__slide-content").appendChild(n),window.shareButtons()}),i.on("mount.before",function(){var e=document.createElement("div");e.classList.add("glide__bullets");for(var t=0;t<l.querySelectorAll(".glide__slide").length;t++){var n=document.createElement("span");n.classList.add("glide__bullets-item"),e.appendChild(n)}return l.appendChild(e)}),i.on("mount.before",function(e){var t=document.querySelector('link[rel="prev"]');if(null===t||!t.hasAttribute("href"))return!1;r.href=t.href;var n=document.createElement("div");return n.classList.add("glide__slide","glide__slide--empty"),l.querySelector(".glide__slides").appendChild(n)}),i.on("mount.before",function(){["prev","next"].forEach(function(e,t){var n=document.createElement("div");n.classList.add("glide__control","glide__control--"+e),n.classList.add();var i=document.createElement("span");i.classList.add("icon","icon--"+e),n.appendChild(i),l.appendChild(n)}),l.querySelector(".glide__control--next").addEventListener("click",function(e){e.preventDefault(),i.go(">")}),l.querySelector(".glide__control--prev").addEventListener("click",function(e){e.preventDefault(),i.go("<")})}),i.on("mount.before",function(){var e=l.getBoundingClientRect();l.style.height=window.innerHeight-e.top-window.pageYOffset+"px"}),i.on(["mount.after","run"],function(){for(var e,t=l.querySelectorAll(".glide__bullets-item"),n=0;e=t[n];n++)e.classList.remove("glide__bullets-item--active"),i.index===n&&e.classList.add("glide__bullets-item--active")}),i.on("mount.after",function(){var e=l.querySelectorAll(".glide__slide");r.count=e.length-1}),i.on(["mount.after","run"],function(e){var t=l.querySelector(".glide__control--prev");t.classList.remove("glide__control--disabled"),0===i.index&&t.classList.add("glide__control--disabled")}),i.on("run",function(e){var t=l.querySelector(".glide__control--next");t.classList.remove("glide__control--disabled"),i.index===r.count&&t.classList.add("glide__control--disabled")}),i.on("run",function(e){i.index===r.count&&r.href&&l.classList.remove("glide--active")}),i.on("run.after",function(e){i.index===r.count&&r.href&&(document.location.href=r.href)}),i.on("build.after",function(){var n=0;l.addEventListener("touchstart",function(e){var t=e.changedTouches[0];n=t.pageY},!0),l.addEventListener("touchmove",function(e){var t=e.changedTouches[0];n<t.pageY&&0===window.pageYOffset&&e.preventDefault(),l.classList.contains("glide--dragging")&&e.preventDefault()},!0)}),i.on("build.after",function(){if(void 0===knife_story_options.background||knife_story_options.background.length<1)return l.classList.add("glide--active");var e=new Image;e.addEventListener("load",function(){return l.classList.add("glide--active")}),e.src=knife_story_options.background;var n=document.createElement("div");return n.classList.add("glide__backdrop"),n.style.backgroundImage="url("+knife_story_options.background+")",function(){if(void 0===knife_story_options.blur)return;var e=parseInt(knife_story_options.blur);if(e<=0)return;n.style.margin="-"+e+"px",n.style.filter="blur("+e+"px)"}(),function(){if(void 0===knife_story_options.shadow)return;var e=parseInt(knife_story_options.shadow)/100;if(e<=0||1<e)return;var t=document.createElement("div");t.classList.add("glide__shadow"),t.style.backgroundColor="rgba(0, 0, 0, "+e+")",n.appendChild(t)}(),l.appendChild(n)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),i.mount()}();
!function(){if("undefined"==typeof knife_user_form)return;var a,i,s,o,d=function(e,t,n){if(void 0===t.element)return null;var r=document.createElement(t.element);r.classList.add("form__field-"+t.element),r.setAttribute("name",e);var o=document.createElement("div");for(var a in o.classList.add("form__field"),o.appendChild(r),delete t.element,t)r.setAttribute(a,t[a]);return r.value=l(e),r.addEventListener("input",function(e){return c(this.name,this.value)}),n.appendChild(o)},c=function(e,t){var n=JSON.parse(localStorage.getItem("knife_user_form"))||{};return n[e]=t,localStorage.setItem("knife_user_form",JSON.stringify(n))},l=function(e){return(JSON.parse(localStorage.getItem("knife_user_form"))||{})[e]||""},u=function(e){return i.classList.remove("icon--loop"),void 0===e||!0===e?s.removeAttribute("disabled",""):(i.classList.remove("icon--alert","icon--done"),i.classList.add("icon--loop"),a.innerHTML="",s.setAttribute("disabled",""))},f=function(e){e=e||m("warning","Request error");i.classList.add("icon--alert"),a.innerHTML=e},m=function(e,t){return knife_user_form.hasOwnProperty(e)?knife_user_form[e]:t||""},e=document.querySelector(".entry-content");(o=document.createElement("form")).classList.add("form","form--club"),o.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(o),n="action="+m("action")+"&nonce="+m("nonce");t.forEach(function(e,t){n+="&"+t+"="+e});var r=new XMLHttpRequest;return r.open("POST",m("ajaxurl")),r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),r.onload=function(){if(u(!0),200!==r.status)return f();var e,t=JSON.parse(r.responseText);return t.success?(e=(e=t.data)||"All done",i.classList.add("icon--done"),a.innerHTML=e,localStorage.removeItem("knife_user_form"),o.reset()):f(t.data)},r.send(n),u(!1)}),e.appendChild(o),function(e){var t,n,r=knife_user_form.fields;for(var o in r)r.hasOwnProperty(o)&&d(o,r[o],e);t=e,(n=document.createElement("div")).classList.add("form__control"),(s=document.createElement("button")).classList.add("form__control-button","button"),s.innerHTML=m("button","Send"),n.appendChild(s),(i=document.createElement("span")).classList.add("form__control-loader","icon"),n.appendChild(i),(a=document.createElement("span")).classList.add("form__control-notice"),n.appendChild(a),t.appendChild(n)}(o)}();
!function(){if(window.yandexContextAsyncCallbacks=window.yandexContextAsyncCallbacks||[],function(){if("undefined"==typeof knife_yandex_rtb)return;var n=document.createElement("div");n.classList.add("entry-footer__rtb","widget-rtb"),n.id="yandex_rtb_"+knife_yandex_rtb,document.querySelector(".entry-footer").appendChild(n),window.yandexContextAsyncCallbacks.push(function(){Ya.Context.AdvManager.render({blockId:knife_yandex_rtb,renderTo:n.id,async:!0,onRender:function(e){n.classList.add("widget-rtb--rendered")}})})}(),window.yandexContextAsyncCallbacks.length<1)return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://an.yandex.ru/system/context.js",document.head.appendChild(e)}();