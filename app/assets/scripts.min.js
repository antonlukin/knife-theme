!function(){if("undefined"==typeof knife_backdrop)return!1;var e=document.createElement("div");if(e.classList.add("backdrop"),"undefined"!=typeof knife_backdrop.color&&(document.querySelector(".footer").style.backgroundColor="#"+knife_backdrop.color),"undefined"==typeof knife_backdrop.image)return document.body.appendChild(e);e.style.backgroundImage="url("+knife_backdrop.image+")","undefined"!=typeof knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var n=new Image;return n.onload=function(){document.body.appendChild(e)},n.src=knife_backdrop.image}();
!function(){var e=document.querySelector(".search"),t=document.getElementById("toggle-search");if(null===t)return!1;if(null===e||"undefined"==typeof knife_search_id)return t.classList.add("toggle--hidden");var n="search-gcse",r="gsc-results",a=null,s=function(){if("complete"!==document.readyState)return google.setOnLoadCallback(s,!0);google.search.cse.element.render({gname:n,div:n,tag:"searchresults-only",attributes:{enableHistory:!1,gaQueryParameter:"s",queryParameterName:"s"}}),document.getElementById("search-input").oninput=function(){var e=google.search.cse.element.getElement(n);e.execute(this.value)};var e=window.MutationObserver||window.WebKitMutationObserver;a=new e(function(e){for(var t=0;t<e.length;++t)if(e[t].target.classList.contains(r))return l()}),a.observe(document.getElementById(n),{subtree:!0,attributes:!1,childList:!0,characterData:!1})},c=function(t){var r=document.createElement("div");r.id=n,r.style.display="none",e.appendChild(r),window.__gcse={parsetags:"explicit",callback:s};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cse.google.com/cse.js?cx="+t;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)},l=function(){for(var e=document.getElementById("search-results"),t=document.getElementById(n).querySelectorAll(".gs-result");e.firstChild;)e.removeChild(e.firstChild);if(document.getElementById("search-input").value.length>0){var r=function(t){var n={link:t.querySelector("a.gs-title").href,head:t.querySelector("a.gs-title").textContent,text:t.querySelector(".gs-snippet").textContent},r=document.createElement("p");r.className="search__results-head",r.appendChild(document.createTextNode(n.head));var a=document.createElement("p");a.className="search__results-text",a.appendChild(document.createTextNode(n.text));var s=document.createElement("a");return s.className="search__results-link",s.href=n.link,s.appendChild(r),s.appendChild(a),e.appendChild(s)};if(1==t.length&&t[0].classList.contains("gs-no-results-result")){var a=document.createElement("p");a.className="search__results-head",a.appendChild(document.createTextNode(t[0].textContent)),e.appendChild(a)}for(var s=0;s<t.length;s++){if(!t[s].querySelector("a.gs-title")||!t[s].querySelector(".gs-snippet"))return!1;r(t[s])}}};t.addEventListener("click",function(e){return e.preventDefault(),!this.classList.contains("toggle--expand")&&("undefined"==typeof window.__gcse?c(knife_search_id):void 0)})}();
!function(){var e=document.getElementById("toggle-menu"),t=document.getElementById("toggle-search");return null!==e&&null!==t&&(e.addEventListener("click",function(e){return e.preventDefault(),document.querySelector(".search").classList.contains("search--expand")&&t.click(),document.querySelector(".topline__menu").classList.toggle("topline__menu--expand"),this.classList.toggle("toggle--expand")}),t.addEventListener("click",function(t){t.preventDefault();var n=document.getElementById("search-input");if(document.querySelector(".topline__menu").classList.contains("topline__menu--expand")&&e.click(),n.blur(),!document.querySelector(".search").classList.contains("search--expand")){var c=document.querySelector(".header").offsetTop-window.pageYOffset;c>0&&(document.querySelector(".search").style.paddingTop=c+"px"),n.focus()}return document.querySelector(".search").classList.toggle("search--expand"),document.body.classList.toggle("body--search"),this.classList.toggle("toggle--expand")}),void window.addEventListener("keydown",function(n){return n=n||window.event,27===n.keyCode&&(document.querySelector(".search").classList.contains("search--expand")&&t.click(),void(document.querySelector(".topline__menu").classList.contains("topline__menu--expand")&&e.click()))},!0))}();
!function(){var e=document.querySelector(".push");if(null===e||"undefined"==typeof knife_push_id)return!1;OneSignal=window.OneSignal||[];var n=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.onesignal.com/sdks/OneSignalSDK.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},t=function(){var e=localStorage.getItem("knife-push");return"undefined"!=typeof Notification&&"default"===Notification.permission&&("string"==typeof e&&Number(e)<Date.now()||(null===e&&localStorage.setItem("knife-push",Date.now()),!1))};document.addEventListener("DOMContentLoaded",function(){return t()!==!1&&(OneSignal.push(["init",{appId:knife_push_id,autoRegister:!1,welcomeNotification:{disable:!0}}]),OneSignal.push(function(){if(e.querySelector(".push__close").addEventListener("click",function(){var n=12096e5;return localStorage.setItem("knife-push",Date.now()+n),e.classList.add("push--hide")}),e.querySelector(".push__button").addEventListener("click",function(){return OneSignal.registerForPushNotifications()}),OneSignal.on("notificationPermissionChange",function(n){return e.classList.add("push--hide")}),OneSignal.isPushNotificationsSupported())return e.classList.remove("push--hide")}),n())},!1)}();
!function(){if(null===document.querySelector(".share"))return!1;var e={facebook:!1,vkontakte:!1},t=function(e){var t=document.querySelector('link[rel="canonical"]');return t=t&&t.href?encodeURIComponent(t.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===e?"https://vk.com/share.php?act=count&index=0&url="+t:"facebook"===e?"https://graph.facebook.com/?callback=FB.Share&id="+t:void 0},n=function(e,t){var n=Math.round(screen.width/2-t.width/2),r=0;screen.height>t.height&&(r=Math.round(screen.height/3-t.height/2));window.open(e,t.id,"left="+n+",top="+r+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")},r=function(e){var n=document.createElement("script");return n.type="text/javascript",n.src=t(e),n.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(n),!0};return window.shareButtons=function(){var t=document.querySelectorAll(".share .share__link");if(null===t)return!1;for(var a=0;a<t.length;a++){var o=t[a].dataset.label;t[a].addEventListener("click",function(e){return e.preventDefault(),n(this.href,{width:600,height:400,id:this.dataset.label})}),o in e&&e[o]===!1&&(e[o]=r(o))}},window.VK={Share:{count:function(e,t){if(document.getElementById("share-vkontakte").outerHTML="","undefined"!=typeof t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),r=0;r<n.length;r++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t,n[r].appendChild(a)}}}},window.FB={Share:function(e){if(document.getElementById("share-facebook").outerHTML="","undefined"!=typeof e.share&&e.share.share_count)for(var t=document.querySelectorAll(".share .share__link--facebook"),n=0;n<t.length;n++){var r=document.createElement("span");r.className="share__count",r.innerHTML=e.share.share_count,t[n].appendChild(r)}}},window.shareButtons()}();
!function(){var e=document.querySelector(".glide");if(null===e||"undefined"==typeof Glide)return!1;if(0===e.querySelectorAll(".glide__slide").length)return!1;var t=new Glide(".glide",{gap:0,rewind:!1,touchAngle:45,dragThreshold:!1,breakpoints:{767:{dragThreshold:!0}}}),n={};return t.on("mount.before",function(){if("undefined"==typeof knife_story_stories||knife_story_stories.length<1)return!1;for(var t,n=0;t=knife_story_stories[n];n++){var i=document.createElement("div");i.classList.add("glide__slide-content"),function(){if("undefined"==typeof t.kicker)return!1;var e=document.createElement("div");e.classList.add("glide__slide-kicker"),e.innerHTML=t.kicker,i.appendChild(e)}(),function(){if("undefined"==typeof t.image||"undefined"==typeof t.ratio)return!1;var e=document.createElement("div");e.classList.add("glide__slide-image"),e.style.setProperty("background-image","url("+t.image+")"),e.style.setProperty("--image-ratio",t.ratio),i.appendChild(e)}(),function(){if("undefined"==typeof t.entry)return!1;var e=document.createElement("div");e.classList.add("glide__slide-entry"),e.innerHTML=t.entry,i.appendChild(e)}();var r=document.createElement("div");r.classList.add("glide__slide-wrap"),r.appendChild(i);var d=document.createElement("div");d.classList.add("glide__slide"),d.appendChild(r),e.querySelector(".glide__slides").appendChild(d)}}),t.on("mount.before",function(){var t=e.querySelectorAll(".glide__slide");if(t.length<=1)return!1;var n=t[0].querySelector(".share");if(null===n)return!1;var i=n.cloneNode(!0),r=t[t.length-1];if("undefined"!=typeof knife_story_options.action)for(var d,o=i.querySelectorAll(".share__link"),l=0;d=o[l];l++)d.setAttribute("data-action",knife_story_options.action);return r.querySelector(".glide__slide-content").appendChild(i),window.shareButtons()}),t.on("mount.before",function(){var t=document.createElement("div");t.classList.add("glide__bullets");for(var n=0;n<e.querySelectorAll(".glide__slide").length;n++){var i=document.createElement("span");i.classList.add("glide__bullets-item"),t.appendChild(i)}return e.appendChild(t)}),t.on("mount.before",function(t){var i=document.querySelector('link[rel="prev"]');if(null===i||!i.hasAttribute("href"))return!1;n.href=i.href;var r=document.createElement("div");return r.classList.add("glide__slide","glide__slide--empty"),e.querySelector(".glide__slides").appendChild(r)}),t.on("mount.before",function(){["prev","next"].forEach(function(t,n){var i=document.createElement("div");i.classList.add("glide__control","glide__control--"+t),i.classList.add();var r=document.createElement("span");r.classList.add("icon","icon--"+t),i.appendChild(r),e.appendChild(i)}),e.querySelector(".glide__control--next").addEventListener("click",function(e){e.preventDefault(),t.go(">")}),e.querySelector(".glide__control--prev").addEventListener("click",function(e){e.preventDefault(),t.go("<")})}),t.on("mount.after",function(){if("undefined"==typeof knife_story_options.background)return!1;var t=document.createElement("div");return t.classList.add("glide__backdrop"),t.style.backgroundImage="url("+knife_story_options.background+")",function(){if("undefined"==typeof knife_story_options.blur)return!1;var e=parseInt(knife_story_options.blur);return!(e<=0)&&(t.style.margin="-"+e+"px",void(t.style.filter="blur("+e+"px)"))}(),function(){if("undefined"==typeof knife_story_options.shadow)return!1;var e=parseInt(knife_story_options.shadow)/100;if(e<=0||e>1)return!1;var n=document.createElement("div");n.classList.add("glide__shadow"),n.style.backgroundColor="rgba(0, 0, 0, "+e+")",t.appendChild(n)}(),e.appendChild(t)}),t.on(["mount.after","run"],function(){for(var n,i=e.querySelectorAll(".glide__bullets-item"),r=0;n=i[r];r++)n.classList.remove("glide__bullets-item--active"),t.index===r&&n.classList.add("glide__bullets-item--active")}),t.on("mount.after",function(){var t=e.querySelectorAll(".glide__slide");n.count=t.length-1}),t.on(["mount.after","run"],function(n){var i=e.querySelector(".glide__control--prev");i.classList.remove("glide__control--disabled"),0===t.index&&i.classList.add("glide__control--disabled")}),t.on("run",function(i){var r=e.querySelector(".glide__control--next");r.classList.remove("glide__control--disabled"),t.index===n.count&&r.classList.add("glide__control--disabled")}),t.on("run",function(i){t.index===n.count&&n.href&&e.classList.remove("glide--active")}),t.on("run.after",function(e){t.index===n.count&&n.href&&(document.location.href=n.href)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),window.addEventListener("load",function(){var t=e.getBoundingClientRect();return e.style.height=window.innerHeight-t.top-window.pageYOffset+"px",e.classList.add("glide--active")}),t.on("build.after",function(){var t=0;e.addEventListener("touchstart",function(e){var n=e.changedTouches[0];t=n.pageY},!0),e.addEventListener("touchmove",function(e){var n=e.changedTouches[0];t<n.pageY&&0===window.pageYOffset&&e.preventDefault()},!0)}),t.mount()}();
!function(){if("undefined"==typeof knife_user_form)return!1;var e,t,n,r,o=function(e,t,n){if("undefined"==typeof t.element)return null;var r=document.createElement(t.element);r.classList.add("form__field-"+t.element),r.setAttribute("name",e);var o=document.createElement("div");o.classList.add("form__field"),o.appendChild(r),delete t.element;for(var s in t)r.setAttribute(s,t[s]);return r.value=i(e),r.addEventListener("input",function(e){return a(this.name,this.value)}),n.appendChild(o)},a=function(e,t){var n=JSON.parse(localStorage.getItem("knife_user_form"))||{};return n[e]=t,localStorage.setItem("knife_user_form",JSON.stringify(n))},i=function(e){var t=JSON.parse(localStorage.getItem("knife_user_form"))||{};return t[e]||""},s=function(e){var o=document.createElement("div");return o.classList.add("form__control"),r=document.createElement("button"),r.classList.add("form__control-button","button","bright"),r.innerHTML=f("button","Send"),o.appendChild(r),n=document.createElement("span"),n.classList.add("form__control-loader","icon"),o.appendChild(n),t=document.createElement("span"),t.classList.add("form__control-notice"),o.appendChild(t),e.appendChild(o)},d=function(e){return n.classList.remove("icon--loop"),"undefined"==typeof e||e===!0?r.removeAttribute("disabled",""):(n.classList.remove("icon--alert","icon--done"),n.classList.add("icon--loop"),t.innerHTML="",r.setAttribute("disabled",""))},u=function(e){var e=e||f("warning","Request error");n.classList.add("icon--alert"),t.innerHTML=e},c=function(r){var r=r||"All done";return n.classList.add("icon--done"),t.innerHTML=r,localStorage.removeItem("knife_user_form"),e.reset()},l=function(t){t.preventDefault();var n=new FormData(e),r="action="+f("action")+"&nonce="+f("nonce");n.forEach(function(e,t){r+="&"+t+"="+e});var o=new XMLHttpRequest;return o.open("POST",f("ajaxurl")),o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),o.onload=function(){if(d(!0),200!==o.status)return u();var e=JSON.parse(o.responseText);return e.success?c(e.data):u(e.data)},o.send(r),d(!1)},f=function(e,t){return knife_user_form.hasOwnProperty(e)?knife_user_form[e]:t||""},m=function(e){var t=knife_user_form.fields;for(var n in t)t.hasOwnProperty(n)&&o(n,t[n],e);return s(e)},p=document.querySelector(".post"),e=document.createElement("form");return e.classList.add("post__form","form"),e.addEventListener("submit",l),p.appendChild(e),m(e)}();