"use strict";!function(){var e=document.querySelectorAll(".widget-adfox");if(!(e.length<1)){for(var t=0;t<e.length;t++){var a,o,r=e[t].querySelector("div");null!==r&&0!==r.dataset.length&&(a=Date.now().toString(10)+Math.random().toString(10).substr(2,5),(o=document.createElement("div")).id="adfox_"+a,e[t].replaceChild(o,r),o.addEventListener("click",i),o.addEventListener("click",s),d(r.dataset,a,e[t]))}var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.crossorigin="anonymous",n.src="https://yastatic.net/pcode/adfox/loader.js",document.head.appendChild(n)}function m(e,t){var a=e.match(/\/(\d+?)\/.+?\?(.+)$/)||[];if(a.length<=2)return t;var o=a[2].split("&");t.ownerId=a[1],t.params={};for(var r=0;r<o.length;r++){var n=o[r].split("=");1!=n.length&&"pr"!==n[0]&&(t.params[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t.params=function(e){if("undefined"==typeof knife_meta_parameters)return e;for(var t=["template","postid","special","category","tags","adult","promo","format"],a=0,o=1;a<t.length;a++,o++){var r=t[a];e["puid"+o]=knife_meta_parameters[r]||""}return e}(t.params),t}function u(e,a){return e.onStub=function(){a.classList.remove("widget-adfox--loaded")},e.onError=function(e){a.classList.remove("widget-adfox--loaded"),document.body.classList.contains("is-adminbar")&&console.error(e)},e.onLoad=function(e){var t=e.bundleParams;if(a.classList.remove("widget-adfox--loaded"),t.bannerId&&function(e){var t=localStorage.getItem("adfox-close");if(null===t)return!1;var a=JSON.parse(t),o=(new Date).getTime();for(var r in a)o>a[r]&&delete a[r];if(localStorage.setItem("adfox-close",JSON.stringify(a)),a[e]&&a[e]>o)return!0;return!1}(t.bannerId))return e.destroy();a.classList.add("widget-adfox--loaded")},e}function d(e,t,a){if(e.common)return o=e.common,r=a,(n={}).containerId="adfox_"+t,n=m(o,n=u(n,r)),window.adfoxAsyncParams=window.adfoxAsyncParams||[],window.adfoxAsyncParams.push(n),0;var o,r,n,d,s,i,c,l,f;e.mobile&&(d=e.mobile,s=a,(i={}).containerId="adfox_"+t,i=m(d,i=u(i,s)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([i,["tablet","phone"],{tabletWidth:1023,isAutoReloads:!0}])),e.desktop&&(c=e.desktop,l=a,(f={}).containerId="adfox_"+t,f=m(c,f=u(f,l)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([f,["desktop"],{tabletWidth:1023,isAutoReloads:!0}]))}function s(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-close")){e.preventDefault();var a={},o=localStorage.getItem("adfox-close");for(null!==o&&(a=JSON.parse(o)),a[t.dataset.close]=(new Date).getTime()+288e5,localStorage.setItem("adfox-close",JSON.stringify(a));this.firstChild;)this.removeChild(this.lastChild)}}function i(e){var t=e.target||e.srcElement;t.hasAttribute("data-event")&&(document.createElement("img").src=t.dataset.event)}}();
"use strict";!function(){if("undefined"!=typeof knife_backdrop){if(void 0!==knife_backdrop.image){var e=document.createElement("div");e.classList.add("backdrop"),e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;return o.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)}),o.src=knife_backdrop.image}void 0!==knife_backdrop.color&&(document.body.style.backgroundColor="#"+knife_backdrop.color)}}();
"use strict";!function(){var e=document.querySelector(".post");function a(e){var t=document.createElement("iframe"),r=function(e){var t=document.createElement("div");t.classList.add("embed__loader"),e.appendChild(t);var r=document.createElement("span");return r.classList.add("embed__loader-bounce"),t.appendChild(r),t}(e);return t.setAttribute("allow","autoplay"),t.setAttribute("frameborder","0"),t.setAttribute("src",e.dataset.embed),t.addEventListener("load",function(){r.parentNode.removeChild(r)}),t}null!==e&&e.addEventListener("click",function(e){var t=e.target||e.srcElement;if(null!==t.parentElement){var r=t.parentElement;if(r.classList.contains("embed")&&r.hasAttribute("data-embed")){for(e.preventDefault();r.firstChild;)r.removeChild(r.firstChild);r.appendChild(a(r))}}})}();
"use strict";!function(){var e=document.querySelector(".entry-content");if(null!==e){var t=document.querySelector(".entry-inpost");if(null!==t&&null!==t.firstElementChild){var r=Math.floor(e.children.length/3);if(8<e.children.length)for(var n=["p","blockquote"],i=r;i<e.children.length;i++){var l=e.children[i];if(!(n.indexOf(l.tagName.toLowerCase())<0)&&void 0!==e.children[i-1]){var a=e.children[i-1];if(!(n.indexOf(a.tagName.toLowerCase())<0)){var d=document.createElement("aside");d.classList.add("aside","aside--widget"),d.appendChild(t.firstElementChild),e.insertBefore(d,l);break}}}}}}();
"use strict";!function(){var e=document.querySelector(".post");if(null!==e)for(var t=e.querySelectorAll(".figure--flipper"),r=0;r<t.length;r++)t[r].addEventListener("click",function(e){"A"!==(e.target||e.srcElement).tagName&&this.classList.toggle("figure--rotate")})}();
"use strict";!function(){if("undefined"!=typeof knife_form_request){var o,s,i,r=document.createElement("form");document.querySelector(".entry-content").appendChild(r);var e=l("classes");0<e.length&&(r.className=e.join(" "));var t,n=l("heading");return 0<n.length&&((t=document.createElement("h4")).classList.add("form__heading"),t.textContent=n,r.appendChild(t)),r.classList.add("form"),r.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(r);t.append("action",l("action")),t.append("nonce",l("nonce"));var n=new XMLHttpRequest;return n.open("POST",l("ajaxurl")),n.send(t),n.onload=function(){if(a(!0),200!==n.status)return c();var e,t=JSON.parse(n.responseText);return t.success?(e=(e=t.data)||"",s.classList.add("icon--done"),o.innerHTML=e,localStorage.removeItem("knife_form_request"),r.reset()):c(t.data)},a(!1)}),function(e){var t,n,r=knife_form_request.fields;for(var a in r)r.hasOwnProperty(a)&&d(a,r[a],e);t=e,(n=document.createElement("div")).classList.add("form__control"),(s=document.createElement("span")).classList.add("form__control-loader","icon"),n.appendChild(s),(o=document.createElement("span")).classList.add("form__control-notice"),n.appendChild(o),(i=document.createElement("button")).classList.add("form__control-button","button"),i.innerHTML=l("button","Send"),n.appendChild(i),t.appendChild(n)}(r)}function d(e,t,n){if(void 0!==t.element){var r=document.createElement(t.element);r.classList.add("form__field-"+t.element),r.setAttribute("name",e);var a,o=document.createElement("div");for(var s in o.classList.add("form__field"),o.appendChild(r),delete t.element,t)r.setAttribute(s,t[s]);return r.value=(a=e,(JSON.parse(localStorage.getItem("knife_form_request"))||{})[a]||""),r.addEventListener("input",function(e){var t,n,r;t=this.name,n=this.value,(r=JSON.parse(localStorage.getItem("knife_form_request"))||{})[t]=n,localStorage.setItem("knife_form_request",JSON.stringify(r))}),r.addEventListener("focus",function(e){n.classList.remove("form--fold")}),n.appendChild(o)}}function a(e){return s.classList.remove("icon--loop"),void 0===e||!0===e?i.removeAttribute("disabled",""):(s.classList.remove("icon--alert","icon--done"),s.classList.add("icon--loop"),o.innerHTML="",i.setAttribute("disabled",""))}function c(e){e=e||l("warning","Request error");s.classList.add("icon--alert"),o.innerHTML=e}function l(e,t){return knife_form_request.hasOwnProperty(e)?knife_form_request[e]:t||""}}();
"use strict";!function(){var a,s,e,l=document.getElementById("generator");null!==l&&"undefined"!=typeof knife_generator_options&&(void 0!==knife_generator_options.page_background&&(l.style.backgroundColor=knife_generator_options.page_background),void 0!==knife_generator_options.page_color&&(l.style.color=knife_generator_options.page_color),"undefined"==typeof knife_generator_items||knife_generator_items.length<1||(a=null,s=knife_generator_items.slice(),function(){var e=document.createElement("div");e.classList.add("entry-generator__loader"),l.insertBefore(e,l.firstChild);var t=document.createElement("span");t.classList.add("entry-generator__loader-bounce"),e.appendChild(t)}(),void 0!==knife_generator_options.button_text&&((e=document.createElement("div")).classList.add("entry-generator__button"),l.appendChild(e),(a=document.createElement("button")).classList.add("button"),a.setAttribute("type","button"),a.textContent=knife_generator_options.button_text,e.appendChild(a),void 0!==knife_generator_options.button_background&&(a.style.backgroundColor=knife_generator_options.button_background),void 0!==knife_generator_options.button_color&&(a.style.color=knife_generator_options.button_color)),a.addEventListener("click",function(e){e.preventDefault(),function(e){if("scrollBehavior"in document.documentElement.style)return window.scrollTo({top:e,behavior:"smooth"});window.scrollTo(0,e)}(l.getBoundingClientRect().top+window.pageYOffset-76),s.length<1&&(s=knife_generator_items.slice());var t=Math.floor(Math.random()*s.length),n=s[t];s.splice(t,1),knife_generator_options.hasOwnProperty("button_repeat")&&(a.textContent=knife_generator_options.button_repeat),l.querySelector(".entry-generator__share")&&function(e){if(void 0!==knife_generator_options.share_links&&!(void 0===knife_generator_options.permalink||knife_generator_options.hasOwnProperty("noshare")&&knife_generator_options.noshare)){for(var t,n=l.querySelector(".entry-generator__title").textContent,o=[knife_generator_options.permalink.replace(/\/?$/,"/")+e+"/",n],r=l.querySelectorAll(".share > .share__link"),i=0;t=r[i];i++){var a,s=t.getAttribute("data-label");void 0!==knife_generator_options.share_links[s]&&(a=knife_generator_options.share_links[s],t.href=a.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(o[t-1])}))}"function"==typeof window.shareButtons&&window.shareButtons()}}(t+1);var o=l.querySelector(".entry-generator__content");if(null===o&&((o=document.createElement("div")).classList.add("entry-generator__content"),l.insertBefore(o,l.lastChild)),o.innerHTML=n.description||"",knife_generator_options.hasOwnProperty("notext")&&knife_generator_options.notext&&o.parentNode.removeChild(o),l.classList.add("entry-generator--loader"),knife_generator_options.hasOwnProperty("blank")&&knife_generator_options.blank){var r=l.querySelector(".entry-generator__title");return null===r&&((r=document.createElement("div")).classList.add("entry-generator__title"),l.insertBefore(r,l.firstChild)),r.innerHTML=n.heading||"",setTimeout(function(){l.classList.remove("entry-generator--loader")},600),l.classList.add("entry-generator--blank")}var i=l.querySelector(".entry-generator__poster");if(null!==i&&i.parentNode.removeChild(i),void 0!==n.poster)return(i=new Image).classList.add("entry-generator__poster"),l.insertBefore(i,l.firstChild),i.addEventListener("load",function(){setTimeout(function(){l.classList.remove("entry-generator--loader")},600)}),i.setAttribute("alt",n.heading||""),i.setAttribute("src",n.poster),l.classList.add("entry-generator--poster")})))}();
"use strict";!function(){document.getElementById("toggle-search").addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("explorer");null!==t&&t.parentNode.removeChild(t),t=function(e){var t=document.createElement("div");t.classList.add("explorer"),t.setAttribute("id","explorer");var n=document.createElement("div");n.classList.add("explorer__header"),t.appendChild(n);var r=document.createElement("button");r.classList.add("explorer__header-close"),n.appendChild(r);var o=document.getElementById("wpadminbar");o&&window.scrollY<o.clientHeight&&(n.style.marginTop=o.clientHeight-window.scrollY+"px");var c=window.scrollY;e.classList.add("is-login"),e.style.top=-c+"px";function d(){e.removeChild(t),document.removeEventListener("keydown",i),e.classList.remove("is-login"),e.style.top="",window.scrollTo(0,c)}var i=function(e){27===e.keyCode&&d()};r.addEventListener("click",d),document.addEventListener("keydown",i);var a=document.createElement("form");a.classList.add("explorer__form"),t.appendChild(a);var l=document.createElement("input");l.classList.add("explorer__form-input"),l.setAttribute("placeholder",knife_search_options.placeholder||""),a.appendChild(l),setTimeout(function(){l.focus()},100);var s=document.createElement("button");return s.classList.add("explorer__form-submit","icon","icon--right"),s.setAttribute("type","submit"),a.appendChild(s),a.addEventListener("submit",function(e){e.preventDefault(),document.location.href="/search/#gsc.q="+l.value}),document.body.appendChild(t),t}(document.body)});(function(){var e=document.querySelector(".search .gcse-search");if("undefined"==typeof knife_search_options||null===e)return;var t=e.getAttribute("data-placeholder");window.__gcse={callback:function(){document.querySelector("input.gsc-input").placeholder=t}};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cse.google.com/cse.js?cx="+knife_search_options.id;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)})()}();
"use strict";!function(){var t,n,i=document.getElementById("toggle-menu"),r=document.querySelector(".header");function s(e){for(var t=r.parentElement.firstChild;t&&t!==r;)1==t.nodeType&&(t.style.display=e),t=t.nextSibling}function l(e){if((e.target||e.srcElement)===t)return e.stopPropagation(),t.removeEventListener("click",l),i.click()}null!==i&&(t=document.body,n=0,i.addEventListener("click",function(e){return e.preventDefault(),i.classList.toggle("toggle--expand"),r.querySelector(".navbar").classList.toggle("navbar--expand"),t.classList.contains("is-navbar")?(t.classList.remove("is-navbar"),t.style.top="",t.removeAttribute("onclick",""),window.scrollTo(0,n),s("")):(n=window.scrollY,t.classList.add("is-navbar"),t.style.top=-n+"px",t.setAttribute("onclick",""),t.addEventListener("click",l),s("none"))}))}();
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){var u=document.getElementById("comments");if(null!==u&&"undefined"!=typeof knife_id_handler){var d=function(e,t){var n=e.split(".");if(1<n.length){var r=_slicedToArray(n,2),o=r[0],a=r[1];if(void 0!==knife_id_handler[o][a])return knife_id_handler[o][a]}return void 0!==knife_id_handler[e]?knife_id_handler[e]:t||""},s=["vkontakte","google","facebook","yandex"],c=d("post",null);if(null!==c){var p=!1,v=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var r in t.attributes)n.setAttribute(r,t.attributes[r]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n},l=function(e){var t,n=e+window.pageYOffset-24,r=document.querySelector(".header");if(null!==r&&(t=window.getComputedStyle(r),n-=parseInt(t.getPropertyValue("height"))),"scrollBehavior"in document.documentElement.style)return window.scrollTo({top:n,behavior:"smooth"});window.scrollTo(0,n)},f=function(e,t){var n=JSON.parse(localStorage.getItem("knife_id_unsent"))||{};n[c]={text:e,reply:t},localStorage.setItem("knife_id_unsent",JSON.stringify(n))},_=function(e){var t=(JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[c]||{};return t.reply===e&&t.text||""},h=function(e,t){var n=new Image;e.appendChild(n);var r=d("comments.noavatar");n.onerror=function(){n.setAttribute("src",r)},n.onload=function(){n.removeAttribute("loading")},n.setAttribute("loading",!0),n.setAttribute("src",t.avatar),n.setAttribute("alt",t.name)},y=function(t,e){var n,r,o,a=v("a",{class:"comments__item-time",text:(n=e.created,r=new Date(n),o={hour:"numeric",minute:"numeric",month:"numeric",day:"numeric"},r.getFullYear()<(new Date).getFullYear()&&(o.year="numeric"),r.toLocaleString("ru",o)),attributes:{href:"#comment-".concat(e.id)},parent:t});a.addEventListener("click",function(e){e.preventDefault(),history.pushState({},"",a.href),u.classList.remove("comments--folded"),l(t.getBoundingClientRect().top)})},b=function(e,t){var n=v("div",{class:"comments__item-warning",parent:e});return"removed"===t&&(n.textContent=d("comments.removed")),"blocked"===t&&(n.textContent=d("comments.blocked")),e},a=function(e,t){if(e.setAttribute("data-id",t.id),"visible"!==t.status)return b(e,t.status);t.name=t.name||d("comments.anonymous"),t.content=t.content.replace(/(\n)+/g,"<br>"),e.setAttribute("data-name",t.name);var n=v("div",{class:"comments__item-avatar",parent:e});h(n,t);var r=v("div",{class:"comments__item-header",parent:e});y(e,t),v("span",{class:"comments__item-name",text:t.name,parent:r}),v("span",{class:"comments__item-content",html:t.content,parent:e});var o,a,i,s,c,l,m=v("div",{class:"comments__item-footer",parent:e});return o=m,a=t,i=e,v("button",{class:"comments__item-button",text:d("comments.reply"),parent:o}).addEventListener("click",function(e){if(e.preventDefault(),!p)return S();u.classList.remove("comments--folded"),u.querySelectorAll(".comments__item-form").forEach(function(e){e.parentNode.removeChild(e)});var t=g();t.classList.add("comments__item-form"),t.setAttribute("data-reply",a.id),i.insertBefore(t,o.nextSibling),v("button",{class:"comments__item-cancel",text:d("form.cancel"),parent:t.querySelector(".comments__form-footer")}).addEventListener("click",function(e){return e.preventDefault(),t.parentNode.removeChild(t)});var n=t.querySelector(".comments__form-text");n.setAttribute("placeholder",d("form.reply")),n.value=_(a.id),n.focus(),n.addEventListener("input",function(){f(n.value,a.id)})}),function t(n,r){var e=parseInt(r.plus)-parseInt(r.minus);n.className="comments__item-vote",r.self&&n.classList.add("comments__item-vote--voted"),0<e&&n.classList.add("comments__item-vote--plus"),e<0&&n.classList.add("comments__item-vote--minus");var o=v("button",{classes:["icon","icon--vote"],parent:n});"plus"===r.vote&&(o.classList.remove("icon--vote"),o.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),v("span",{text:e,attributes:{title:"+".concat(r.plus," / -").concat(r.minus)},parent:n});var a=v("button",{classes:["icon","icon--vote"],parent:n});"minus"===r.vote&&(a.classList.remove("icon--vote"),a.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),o.addEventListener("click",function(e){if(e.preventDefault(),!p)return S();for(o.classList.contains("icon--voted")&&(r.plus=parseInt(r.plus)-1,delete r.vote,C("/id/ratings?comment=".concat(r.id,"&vote=plus"),"DELETE")),o.classList.contains("icon--vote")&&(r.plus=parseInt(r.plus)+1,r.vote="plus",C("/id/ratings?comment=".concat(r.id,"&vote=plus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);t(n,r)}),a.addEventListener("click",function(e){if(e.preventDefault(),!p)return S();for(a.classList.contains("icon--voted")&&(r.minus=parseInt(r.minus)-1,delete r.vote,C("/id/ratings?comment=".concat(r.id,"&vote=minus"),"DELETE")),a.classList.contains("icon--vote")&&(r.minus=parseInt(r.minus)+1,r.vote="minus",C("/id/ratings?comment=".concat(r.id,"&vote=minus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);t(n,r)})}(v("div",{class:"comments__item-vote",parent:m}),t),d("action")?function(e,n,r){var o=v("button",{class:"comments__item-button",text:d("comments.remove"),parent:e});o.addEventListener("click",function(e){e.preventDefault();var t={remove:n.id};x(t,o,function(){for(var e=r.querySelector(".comments__item-children");r.lastChild;)r.removeChild(r.lastChild);b(r,"removed"),null!==e&&r.appendChild(e)})});var a=v("button",{class:"comments__item-button",text:d("comments.block"),parent:e});return a.addEventListener("click",function(e){e.preventDefault();var t={block:n.id};x(t,a,function(){for(var e=r.querySelector(".comments__item-children");r.lastChild;)r.removeChild(r.lastChild);b(r,"blocked"),null!==e&&r.appendChild(e)})}),r}(m,t,e):(t.self&&(s=m,c=t,l=e,v("button",{class:"comments__item-button",text:d("comments.remove"),parent:s}).addEventListener("click",function(e){e.preventDefault();var t="/id/comments/".concat(c.id);C(t,"DELETE",{},function(){for(var e=l.querySelector(".comments__item-children");l.lastChild;)l.removeChild(l.lastChild);b(l,"removed"),null!==e&&l.appendChild(e)})})),e)},m=function(e){var t=v("div",{class:"comments__item"}),t=a(t,e);if(null===e.parent)return u.appendChild(t);var n=u.querySelector('[data-id="'.concat(e.parent,'"]'));if(null===n)return u.appendChild(t);var r=n.querySelector(".comments__item-children");null===r&&(r=v("div",{class:"comments__item-children",parent:n})),"visible"===e.status&&(t=function(t,e,n){if(!t.hasAttribute("data-name"))return n;var r=v("a",{class:"comments__item-replied",html:'<span class="icon icon--reply"></span>',attributes:{href:"#comment-".concat(e.parent)},parent:n.querySelector(".comments__item-header")});return v("span",{text:t.getAttribute("data-name"),parent:r}),r.addEventListener("click",function(e){e.preventDefault(),history.pushState({},"",r.href),u.classList.remove("comments--folded"),l(t.getBoundingClientRect().top)}),n}(n,e,t));var o=n.getAttribute("data-level")||0,o=parseInt(o)+1;return t.setAttribute("data-level",o),2<o&&r.classList.add("comments__item-children--deepest"),r.appendChild(t)},i=function(o){var e="/id/comments?post=".concat(c),a=o.getAttribute("data-reply");a&&(e+="&parent=".concat(a));var t={content:o.querySelector("textarea").value},i=o.querySelector(".comments__form-submit");i.setAttribute("disabled","disabled"),C(e,"POST",t,function(e){var t,n,r=e.comments||[];return 0<r.length&&(o.reset(),a&&o.parentNode.removeChild(o),t=m(r[0]),u.classList.remove("comments--folded"),l(t.getBoundingClientRect().top)),i.removeAttribute("disabled"),delete(n=JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[c],void localStorage.setItem("knife_id_unsent",JSON.stringify(n))})},g=function(){var t=v("form",{class:"comments__form"}),e=v("textarea",{class:"comments__form-text",attributes:{placeholder:d("form.placeholder")},parent:t}),n=d("form.authorize");p&&(n=d("form.submit"),e.setAttribute("required","required"));var r=v("div",{class:"comments__form-footer",parent:t}),o=v("button",{classes:["comments__form-submit","button"],attributes:{type:"submit"},text:n,parent:r});t.addEventListener("submit",function(e){return e.preventDefault(),p?void i(t):S()});function a(){window.setTimeout(function(){e.style.height="auto",e.style.height="".concat(e.scrollHeight+2,"px")},0)}return e.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&o.click(),a()}),e.addEventListener("paste",a),t},L=function(e){if(e=e||d("error"),!u.classList.contains("comments--expand"))return console.error(e);var t=u.querySelector(".comments__form");if(null===t)return console.error(e);var n=u.querySelector(".comments__error");null===n&&(n=v("p",{class:"comments__error"})),n.textContent=e,t.parentNode.insertBefore(n,t.nextSibling),l(t.getBoundingClientRect().top)},x=function(e,n,r){var t=new FormData;for(var o in t.append("action",d("action")),t.append("nonce",d("nonce")),e)t.append(o,e[o]);n.setAttribute("disabled","disabled");var a=new XMLHttpRequest;a.open("POST",d("ajaxurl")),a.send(t),a.onload=function(){var e=u.querySelector(".comments__error");null!==e&&u.removeChild(e),n.removeAttribute("disabled");try{var t=JSON.parse(a.responseText);if(!t.success)return L(t.data);if("function"==typeof r)return r(t.data||{})}catch(e){return L()}}},C=function(e,t,n,r){var o=new XMLHttpRequest;o.open(t,e,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){var e=u.querySelector(".comments__error");null!==e&&u.removeChild(e);try{var t=JSON.parse(o.responseText);if(200!==o.status)return L(t.message||d("error"));if("function"==typeof r)return r(t.result||{})}catch(e){return L()}},void 0===n&&(n={}),o.send(JSON.stringify(n))},S=function(){var e=document.body,t=v("div",{class:"login"}),n=v("div",{class:"login__popup",parent:t});v("h3",{class:"login__popup-heading",text:d("login.heading"),parent:n}),v("p",{class:"login__popup-helper",text:d("login.helper"),parent:n}),s.forEach(function(e){var t=v("a",{classes:["login__popup-button","login__popup-button--".concat(e)],text:d("login.".concat(e)),attributes:{href:"/id/profiles/".concat(e),target:"_blank",rel:"opener"},parent:n});v("span",{classes:["icon","icon--".concat(e)],parent:t})}),v("p",{class:"login__popup-policy",html:d("login.policy"),parent:n});var r=v("button",{class:"login__popup-close",parent:n}),o=window.scrollY;e.classList.add("is-login"),e.style.top=-o+"px";function a(){e.removeChild(t),document.removeEventListener("keydown",i),e.classList.remove("is-login"),e.style.top="",window.scrollTo(0,o)}r.addEventListener("click",a);var i=function(e){if(27===e.keyCode)return a()};document.addEventListener("keydown",i);window.addEventListener("message",function e(t){if("reload"===t.data)return a(),window.removeEventListener("message",e),k()}),e.appendChild(t)},k=function(){for(;u.lastChild;)u.removeChild(u.lastChild);p=!1,C("/id/comments?post=".concat(c),"GET",{},function(e){var t=e.comments||[];e.identity&&(p=!0),function(e){if(!d("question.message"))return;var t=v("div",{class:"comments__question",parent:e});d("question.avatar")&&v("div",{class:"comments__question-avatar",text:d("question.avatar"),parent:t});var n=v("div",{class:"comments__question-caption",parent:t});d("question.author")&&v("p",{text:d("question.author"),class:"comments__question-author",parent:n}),v("p",{text:d("question.message"),class:"comments__question-message",parent:n})}(u);var n=g();u.appendChild(n);var r=n.querySelector(".comments__form-text");r.textContent=_(0),r.addEventListener("input",function(){f(r.value,0)}),function(e,t){if(void 0===t)return;var n=v("div",{class:"comments__form-badge",parent:e.querySelector(".comments__form-footer")});h(n,t),v("span",{text:t.name,parent:n}),v("button",{classes:["comments__form-exit","icon","icon--exit"],attributes:{type:"button",title:d("form.exit")},parent:e}).addEventListener("click",function(e){e.preventDefault(),u.classList.remove("comments--expand"),C("/id/logout","POST",{},function(){setTimeout(k,300)})})}(n,e.identity),10<t.length&&function(){u.classList.add("comments--folded");var e=v("div",{class:"comments__expand",parent:u});v("button",{class:"comments__expand-button",text:d("comments.expand"),attrubutes:{type:"button"},parent:e}).addEventListener("click",function(e){e.preventDefault(),u.classList.remove("comments--folded")})}(),t.forEach(function(e){void 0!==e.id&&m(e)}),u.classList.add("comments--expand");var o,a=document.location.hash.match(/^#comment-(\d+)/)||[];1<a.length&&(null!==(o=u.querySelector('[data-id="'.concat(a[1],'"]')))&&(u.classList.remove("comments--folded"),l(o.getBoundingClientRect().top)))})};k()}}}();
"use strict";!function(){function r(e,t){return knife_mistype_reporter.hasOwnProperty(e)?knife_mistype_reporter[e]:t||""}function n(i){var a=document.querySelector(".mistype");null!==a&&a.parentNode.removeChild(a),(a=document.createElement("div")).classList.add("mistype"),document.body.appendChild(a);var e=document.createElement("div");e.classList.add("mistype__popup"),a.appendChild(e);var t=document.createElement("h3");t.classList.add("mistype__popup-heading"),t.textContent=r("heading"),e.appendChild(t);var n=document.createElement("p");n.classList.add("mistype__popup-marked"),n.textContent=i,e.appendChild(n);var p=document.createElement("textarea");p.classList.add("mistype__popup-comment"),p.setAttribute("placeholder",r("textarea")),p.setAttribute("maxlength",300),e.appendChild(p);var d=document.createElement("button");d.classList.add("mistype__popup-submit","button"),d.textContent=r("button","Send"),e.appendChild(d),d.addEventListener("click",function(e){var t,n,d,o;e.preventDefault(),t=i,n=p.value,d={nonce:r("nonce"),time:r("time"),comment:n,marked:t,location:document.location.href},(o=new XMLHttpRequest).open("POST",r("ajaxurl")+"/mistype"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(d)),a.parentNode.removeChild(a)});var o=document.createElement("button");o.classList.add("mistype__popup-close"),o.addEventListener("click",function(){a.parentNode.removeChild(a)}),e.appendChild(o);document.addEventListener("keydown",function e(t){27===t.keyCode&&a.parentNode.removeChild(a),document.removeEventListener("keydown",e)})}"undefined"!=typeof knife_mistype_reporter&&document.addEventListener("keydown",function(e){var t;!e.ctrlKey||13!=e.keyCode||0<(t=window.getSelection().toString()).length&&n(t.substring(0,300))})}();
"use strict";!function(){var a,e=document.querySelector(".post");null!==e&&(a=document.body,e.addEventListener("click",function(e){var t,n,r,c,d=e.target||e.srcElement;d.hasAttribute("data-body")&&(t=function(e){var t=e.target||e.srcElement;t!==n&&!t.classList.contains("reference__content-close")||(n.parentNode.removeChild(n),d.removeAttribute("data-active"),a.classList.remove("is-reference"))},null!==(n=document.getElementById("reference"))&&n.parentNode.removeChild(n),n=function(e){var t=document.createElement("div");t.classList.add("reference"),t.setAttribute("id","reference");var n=document.createElement("div");n.classList.add("reference__content"),n.innerHTML=e,t.appendChild(n);var r=document.createElement("button");return r.classList.add("reference__content-close"),n.appendChild(r),a.appendChild(t),t}(d.getAttribute("data-body")),r=n,c=d.getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop,r.style.top=c+"px",d.setAttribute("data-active",!0),a.classList.add("is-reference"),n.addEventListener("click",t),n.addEventListener("touchend",t))}))}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var _,s,d,l,p,c=document.getElementById("quiz");function a(e){if("scrollBehavior"in document.documentElement.style)return window.scrollTo({top:e,behavior:"smooth"});window.scrollTo(0,e)}function u(a,u,c){knife_quiz_options.hasOwnProperty("format")||(knife_quiz_options.format="binary"),u.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-answer")&&!u.classList.contains("entry-quiz__vote--complete")){var n,i=a[t.dataset.answer];switch(u.classList.add("entry-quiz__vote--complete"),knife_quiz_options.format){case"dynamic":i.hasOwnProperty("dynamic")&&(p+=i.dynamic.toString()),t.classList.add(c+"--selected");break;case"category":i.hasOwnProperty("category")&&(n=0,l.hasOwnProperty(i.category)&&(n=l[i.category]),l[i.category]=n+1,d=Object.keys(l).reduce(function(e,t){return l[e]>l[t]?e:t})),t.classList.add(c+"--selected");break;case"points":i.hasOwnProperty("points")&&i.points&&(d+=parseInt(i.points)),t.classList.add(c+"--selected");break;case"binary":if(i.hasOwnProperty("binary")&&i.binary){d+=1,t.classList.add(c+"--correct");break}for(var o=0;o<a.length;o++){var r=t.parentNode.children[o];a[o].hasOwnProperty("binary")&&a[o].binary&&r.classList.add(c+"--missed")}t.classList.add(c+"--wrong")}if(knife_quiz_options.hasOwnProperty("message")&&knife_quiz_options.message){var s=document.createElement("div");if(s.classList.add("entry-quiz__vote-message"),i.message)return s.innerHTML=i.message,u.appendChild(s)}return _.click()}})}function f(e,t){var n=document.createElement("div");return n.classList.add("entry-quiz__vote"),c.insertBefore(n,t),knife_quiz_options.hasOwnProperty("shuffle")&&knife_quiz_options.shuffle&&e.sort(function(){return.5-Math.random()}),(knife_quiz_options.hasOwnProperty("attachment")&&knife_quiz_options.attachment?function(e,t){var n=document.createElement("div");n.classList.add("entry-quiz__vote-grid"),t.appendChild(n);for(var i=0;i<e.length;i++){var o,r=document.createElement("figure");void 0!==e[i].attachment&&((o=document.createElement("img")).setAttribute("src",e[i].attachment),r.appendChild(o),r.classList.add("entry-quiz__vote-attachment"),r.setAttribute("data-answer",i),n.appendChild(r))}u(e,t,"entry-quiz__vote-attachment"),t.classList.add("entry-quiz__vote--attachment")}:function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("div");void 0!==e[n].choice&&(i.classList.add("entry-quiz__vote-choice"),i.setAttribute("data-answer",n),i.innerHTML=e[n].choice,t.appendChild(i))}u(e,t,"entry-quiz__vote-choice"),t.classList.add("entry-quiz__vote--choice")})(e,n),0}function y(e){var t;a(c.getBoundingClientRect().top+window.pageYOffset-76),e.hasOwnProperty("poster")&&(t=document.createElement("img"),0<p.length&&(e.poster=e.poster.replace("*",p)),t.classList.add("entry-quiz__poster"),t.setAttribute("src",e.poster),c.insertBefore(t,c.firstChild));var n=c.querySelector(".entry-quiz__share");document.body.contains(n)&&function(e,t){if(void 0!==knife_quiz_options.share_links&&!(void 0===knife_quiz_options.permalink||knife_quiz_options.hasOwnProperty("noshare")&&knife_quiz_options.noshare)){var n=knife_quiz_options.permalink.replace(/\/?$/,"/")+e.index+"/";0<t.length&&(n=n+t+"/");for(var i,o=[n,c.querySelector(".entry-quiz__title").textContent||""],r=c.querySelectorAll(".share > .share__link"),s=0;i=r[s];s++){var a,u=i.getAttribute("data-label");void 0!==knife_quiz_options.share_links[u]&&(a=knife_quiz_options.share_links[u],i.href=a.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(o[t-1])}))}"function"==typeof window.shareButtons&&window.shareButtons()}}(e,p);var i=c.querySelector(".entry-quiz__vote");document.body.contains(i)&&i.parentNode.removeChild(i);var o=c.querySelector(".entry-quiz__content");return e.hasOwnProperty("details")?o.innerHTML=e.details:o.parentNode.removeChild(o)}null!==c&&"undefined"!=typeof knife_quiz_options&&(_=null,d=s=0,l={},p="",knife_quiz_options.hasOwnProperty("center")&&knife_quiz_options.center&&c.classList.add("entry-quiz--center"),knife_quiz_options.hasOwnProperty("button_start")&&((_=document.createElement("button")).classList.add("entry-quiz__button","button"),_.setAttribute("type","button"),_.textContent=knife_quiz_options.button_start),c.appendChild(_),"object"!==("undefined"==typeof knife_quiz_items?"undefined":_typeof(knife_quiz_items))&&(knife_quiz_items=[]),knife_quiz_options.hasOwnProperty("random")&&knife_quiz_options.random&&knife_quiz_items.sort(function(){return.5-Math.random()}),"object"!==("undefined"==typeof knife_quiz_results?"undefined":_typeof(knife_quiz_results))&&(knife_quiz_results={}),_.addEventListener("click",function(){var e=knife_quiz_items.length;if(0<e&&s<e){var t=knife_quiz_items[s];return s+=1,!1===c.classList.contains("entry-quiz--item")&&(c.classList.add("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_next")&&(_.textContent=knife_quiz_options.button_next)),s===e&&knife_quiz_options.hasOwnProperty("button_last")&&(_.textContent=knife_quiz_options.button_last),function(e,t,n){a(c.getBoundingClientRect().top+window.pageYOffset-76);var i=c.querySelector(".entry-quiz__content");e.hasOwnProperty("question")&&(i.innerHTML=e.question),c.querySelector(".entry-quiz__info").textContent=t+" / "+n;var o=c.querySelector(".entry-quiz__vote");document.body.contains(o)&&o.parentNode.removeChild(o),"object"===_typeof(e.answers)&&0<e.answers.length&&f(e.answers,i.nextSibling)}(t,s,e)}if(!1===c.classList.contains("entry-quiz--results")){for(var n=[],i=0;i<knife_quiz_results.length;i++){var o=knife_quiz_results[i];o.index=i,o.hasOwnProperty("advance")&&o.advance!==d||n.push(o)}if(0<n.length){var r=n[Math.floor(Math.random()*n.length)];return c.classList.remove("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_repeat")&&(_.textContent=knife_quiz_options.button_repeat),knife_quiz_options.hasOwnProperty("norepeat")&&knife_quiz_options.norepeat&&_.parentNode.removeChild(_),c.classList.add("entry-quiz--results"),y(r)}}return document.location.reload()}))}();
"use strict";!function(){function a(e){var t,n,a=document.createElement("script");return a.type="text/javascript",a.src=(t=e,n=(n=document.querySelector('link[rel="canonical"]'))&&n.href?encodeURIComponent(n.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===t?"https://vk.com/share.php?act=count&index=0&url="+n:"facebook"===t?"https://knife.support/facebook/?fields=engagement&callback=FB.Share&id="+n:void 0),a.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(a),!0}var r={facebook:!1,vkontakte:!1};window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;for(var t=0;t<e.length;t++){var n=e[t].dataset.label;e[t].addEventListener("click",function(e){return e.preventDefault(),t=this.href,n={width:600,height:400,id:this.dataset.label},a=Math.round(screen.width/2-n.width/2),r=0,screen.height>n.height&&(r=Math.round(screen.height/3-n.height/2)),void window.open(t,n.id,"left="+a+",top="+r+",width="+n.width+",height="+n.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");var t,n,a,r}),n in r&&!1===r[n]&&(r[n]=a(n))}},window.VK={Share:{count:function(e,t){if(void 0!==t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),a=0;a<n.length;a++){var r=document.createElement("span");r.className="share__count",r.innerHTML=t,n[a].appendChild(r)}}}},window.FB={Share:function(e){var t=0,n=e.engagement||{};for(var a in n)t+=n[a];if(0!==t)for(var r=document.querySelectorAll(".share .share__link--facebook"),o=0;o<r.length;o++){var i=document.createElement("span");i.className="share__count",i.innerHTML=t,r[o].appendChild(i)}}},window.shareButtons()}();
"use strict";!function(){var o,f;function d(e,t){var n=document.createElement("p");e.appendChild(n);var i=document.createElement("a");i.href=t.link,i.innerHTML=t.title,n.appendChild(i)}"undefined"!=typeof knife_similar_posts&&(o=function(e){for(var t,n=0;n<e.length;n++){t=Math.floor(Math.random()*n);var i=e[n];e[n]=e[t],e[t]=i}return e}(knife_similar_posts.similar||[]),f=0,function(){var e=document.querySelector(".entry-footer");if(!(null===e||o.length<f+4)){var t=document.createElement("div");t.classList.add("entry-footer__similar");for(var n=f;n<f+4;n++)o[n].link&&o[n].title&&d(t,o[n]);f+=4,e.appendChild(t)}}(),function(){var e=document.querySelectorAll(".entry-content");if(1===e.length&&1!=knife_similar_posts.hidden){var t=e[0].children;if(!(t.length<15||o.length<f+3)){for(var n=["p","blockquote"],i=null,r=Math.floor(t.length/1.5);r<t.length-5;r++)if(!(n.indexOf(t[r].tagName.toLowerCase())<0||void 0===t[r-1]||n.indexOf(t[r-1].tagName.toLowerCase())<0)){i=t[r-1];break}if(null!==i){var l=document.createElement("figure");l.classList.add("figure","figure--similar");var a=document.createElement("h4");a.innerHTML=knife_similar_posts.title||"",l.appendChild(a);for(r=f;r<f+3;r++)o[r].link&&o[r].title&&d(l,o[r]);f+=3,i.parentNode.insertBefore(l,i.nextSibling)}}}}())}();
"use strict";!function(){var l=document.getElementById("story");if(null!==l&&"undefined"!=typeof Glide&&!(l.querySelectorAll(".entry-story__slide").length<1||"undefined"==typeof knife_story_items||knife_story_items.length<1)){var r=new Glide(".entry-story",{gap:0,rewind:!1,touchAngle:60,swipeThreshold:60,dragThreshold:!1,classes:{slider:"entry-story--slider",swipeable:"entry-story--swipeable",direction:{ltr:"entry-story--ltr",rtl:"entry-story--rtl"}},breakpoints:{767:{dragThreshold:!0}}}),o={};r.on("mount.before",function(){for(var e,t,n,r,o=0;e=knife_story_items[o];o++){var s=document.createElement("div");s.classList.add("entry-story__slide-wrap");var i=document.createElement("div");i.classList.add("entry-story__slide-content"),(r=void 0)!==e.kicker&&((r=document.createElement("div")).classList.add("entry-story__slide-kicker"),r.innerHTML=e.kicker,s.appendChild(r)),(n=void 0)!==e.image&&void 0!==e.ratio&&((n=document.createElement("div")).classList.add("entry-story__slide-image"),n.style.setProperty("background-image","url("+e.image+")"),n.style.setProperty("--image-ratio",e.ratio),i.appendChild(n)),(t=void 0)!==e.entry&&((t=document.createElement("div")).classList.add("entry-story__slide-entry"),t.innerHTML=e.entry,i.appendChild(t));var d=document.createElement("div");d.classList.add("entry-story__slide"),d.appendChild(s),s.appendChild(i),l.querySelector(".entry-story__slides").appendChild(d)}}),r.on("mount.before",function(){var e=l.querySelectorAll(".entry-story__slide");if(e.length<1)return!1;var t=e[0].querySelector(".share");if(null===t)return!1;var n=t.cloneNode(!0);e[e.length-1].querySelector(".entry-story__slide-content").appendChild(n),"function"==typeof window.shareButtons&&window.shareButtons()}),r.on("mount.before",function(){var e=document.createElement("div");e.classList.add("entry-story__bullets");for(var t=0;t<l.querySelectorAll(".entry-story__slide").length;t++){var n=document.createElement("span");n.classList.add("entry-story__bullets-item"),e.appendChild(n)}return l.appendChild(e)}),r.on("mount.before",function(e){var t=document.querySelector('link[rel="prev"]');if(null===t||!t.hasAttribute("href"))return!1;o.href=t.href;var n=document.createElement("div");return n.classList.add("entry-story__slide","entry-story__slide--empty"),l.querySelector(".entry-story__slides").appendChild(n)}),r.on("mount.before",function(){["prev","next"].forEach(function(e,t){var n=document.createElement("div");n.classList.add("entry-story__control","entry-story__control--"+e),n.classList.add();var r=document.createElement("span");r.classList.add("icon","icon--"+e),n.appendChild(r),l.appendChild(n)}),l.querySelector(".entry-story__control--next").addEventListener("click",function(e){e.preventDefault(),r.go(">")}),l.querySelector(".entry-story__control--prev").addEventListener("click",function(e){e.preventDefault(),r.go("<")})}),r.on("mount.before",function(){var e=l.getBoundingClientRect();l.style.height=window.innerHeight-e.top-window.pageYOffset+"px"}),r.on(["mount.after","run"],function(){for(var e,t=l.querySelectorAll(".entry-story__bullets-item"),n=0;e=t[n];n++)e.classList.remove("entry-story__bullets-item--active"),r.index===n&&e.classList.add("entry-story__bullets-item--active")}),r.on("mount.after",function(){var e=l.querySelectorAll(".entry-story__slide");o.count=e.length-1}),r.on(["mount.after","run"],function(e){var t=l.querySelector(".entry-story__control--prev");t.classList.remove("entry-story__control--disabled"),0===r.index&&t.classList.add("entry-story__control--disabled")}),r.on("run",function(e){var t=l.querySelector(".entry-story__control--next");t.classList.remove("entry-story__control--disabled"),r.index===o.count&&t.classList.add("entry-story__control--disabled")}),r.on("run",function(e){r.index===o.count&&o.href&&l.classList.remove("entry-story--active")}),r.on("run.after",function(e){r.index===o.count&&o.href&&(document.location.href=o.href)}),r.on("build.after",function(){var n=0;l.addEventListener("touchstart",function(e){var t=e.changedTouches[0];n=t.pageY},!0),l.addEventListener("touchmove",function(e){var t=e.changedTouches[0];n<t.pageY&&0===window.pageYOffset&&e.preventDefault(),l.classList.contains("entry-story--dragging")&&e.preventDefault()},!0)}),r.on("build.after",function(){return!(void 0===knife_story_options.color||knife_story_options.color.length<1)&&void(l.style.backgroundColor=knife_story_options.color)}),r.on("build.after",function(){if(void 0===knife_story_options.background||knife_story_options.background.length<1)return l.classList.add("entry-story--active");var e=new Image;e.addEventListener("load",function(){return l.classList.add("entry-story--active")}),e.src=knife_story_options.background;var t,n,r,o=document.createElement("div");return o.classList.add("entry-story__backdrop"),o.style.backgroundImage="url("+knife_story_options.background+")",void 0!==knife_story_options.blur&&((t=parseInt(knife_story_options.blur))<=0||(o.style.margin="-"+t+"px",o.style.filter="blur("+t+"px)")),void 0!==knife_story_options.shadow&&((n=parseInt(knife_story_options.shadow)/100)<=0||1<n||((r=document.createElement("div")).classList.add("entry-story__shadow"),r.style.backgroundColor="rgba(0, 0, 0, "+n+")",o.appendChild(r))),l.appendChild(o)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),r.mount()}}();
"use strict";!function(){if("serviceWorker"in navigator){if(1<document.location.host.match(/\./g).length)return;window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")})}}();