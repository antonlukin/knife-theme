"use strict";!function(){var e=document.querySelectorAll(".widget-adfox");if(!(e.length<1)){for(var t=0;t<e.length;t++){var a,o,n=e[t].querySelector("div");null!==n&&0!==n.dataset.length&&(a=Date.now().toString(10)+Math.random().toString(10).substr(2,5),(o=document.createElement("div")).id="adfox_"+a,e[t].replaceChild(o,n),o.addEventListener("click",l),o.addEventListener("click",c),d(n.dataset,a,e[t]))}var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.crossorigin="anonymous",r.src="https://yastatic.net/pcode/adfox/loader.js",document.head.appendChild(r)}function s(e,t){e=e.match(/\/(\d+?)\/.+?\?(.+)$/)||[];if(e.length<=2)return t;var a=e[2].split("&");t.ownerId=e[1],t.params={};for(var o=0;o<a.length;o++){var n=a[o].split("=");1!=n.length&&"pr"!==n[0]&&(t.params[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t.params=function(e){if("undefined"==typeof knife_meta_parameters)return e;for(var t=["template","postid","special","category","tags","adult","promo","format"],a=0,o=1;a<t.length;a++,o++){var n=t[a];e["puid"+o]=knife_meta_parameters[n]||""}return e}(t.params),t}function i(e,a){return e.onStub=function(){a.classList.remove("widget-adfox--loaded")},e.onError=function(e){a.classList.remove("widget-adfox--loaded"),document.body.classList.contains("is-adminbar")&&console.error(e)},e.onLoad=function(e){var t=e.bundleParams;if(a.classList.remove("widget-adfox--loaded"),t.bannerId&&function(e){var t=localStorage.getItem("adfox-close");if(null===t)return!1;var a,o=JSON.parse(t),n=(new Date).getTime();for(a in o)n>o[a]&&delete o[a];if(localStorage.setItem("adfox-close",JSON.stringify(o)),o[e]&&o[e]>n)return!0;return!1}(t.bannerId))return e.destroy();a.classList.add("widget-adfox--loaded")},e}function d(e,t,a){if(e.common)return o=e.common,n=a,(r={}).containerId="adfox_"+t,r=s(o,r=i(r,n)),window.adfoxAsyncParams=window.adfoxAsyncParams||[],window.adfoxAsyncParams.push(r),0;var o,n,r,d;e.mobile&&(n=e.mobile,r=a,(d={}).containerId="adfox_"+t,d=s(n,d=i(d,r)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([d,["tablet","phone"],{tabletWidth:1023,isAutoReloads:!0}])),e.desktop&&(d=e.desktop,e=a,(a={}).containerId="adfox_"+t,a=s(d,a=i(a,e)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([a,["desktop"],{tabletWidth:1023,isAutoReloads:!0}]))}function c(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-close")){e.preventDefault();var a={},e=localStorage.getItem("adfox-close");for(null!==e&&(a=JSON.parse(e)),a[t.dataset.close]=(new Date).getTime()+288e5,localStorage.setItem("adfox-close",JSON.stringify(a));this.firstChild;)this.removeChild(this.lastChild)}}function l(e){e=e.target||e.srcElement;e.hasAttribute("data-event")&&(document.createElement("img").src=e.dataset.event)}}();
"use strict";!function(){if("undefined"!=typeof knife_backdrop){if(void 0!==knife_backdrop.image){var e=document.createElement("div");e.classList.add("backdrop"),e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;return o.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)}),o.src=knife_backdrop.image}void 0!==knife_backdrop.color&&(document.body.style.backgroundColor="#"+knife_backdrop.color)}}();
"use strict";!function(){var e=document.querySelector(".post");function n(e){var t,a,n=document.createElement("iframe"),r=(t=e,(a=document.createElement("div")).classList.add("embed__loader"),t.appendChild(a),(t=document.createElement("span")).classList.add("embed__loader-bounce"),a.appendChild(t),a);return n.setAttribute("allow","autoplay"),n.setAttribute("frameborder","0"),n.setAttribute("src",e.dataset.embed),n.addEventListener("load",function(){r.parentNode.removeChild(r)}),n}null!==e&&e.addEventListener("click",function(e){var t=e.target||e.srcElement;if(null!==t.parentElement){var a=t.parentElement;if(a.classList.contains("embed")&&a.hasAttribute("data-embed")){for(e.preventDefault();a.firstChild;)a.removeChild(a.firstChild);a.appendChild(n(a))}}})}();
"use strict";!function(){var e=document.querySelector(".entry-content");if(null!==e){var t=document.querySelector(".entry-inpost");if(null!==t&&null!==t.firstElementChild){var n=["p"],r=e.children,a=Math.floor(r.length/3);a<6&&(a=6);var i=document.createElement("aside");i.classList.add("aside","aside--widget"),i.appendChild(t.firstElementChild);for(var d=a;d<r.length;d++)if(!(n.indexOf(r[d].tagName.toLowerCase())<0)&&void 0!==r[d-1]){var l=r[d-1];if(!(n.indexOf(l.tagName.toLowerCase())<0)){e.insertBefore(i,r[d]);break}}i.parentNode!==e&&e.appendChild(i)}}}();
"use strict";!function(){var e=document.querySelector(".post");if(null!==e)for(var t=e.querySelectorAll(".figure--flipper"),r=0;r<t.length;r++)t[r].addEventListener("click",function(e){"A"!==(e.target||e.srcElement).tagName&&this.classList.toggle("figure--rotate")})}();
"use strict";!function(){var o,n=document.querySelector(".post .figure--frame");null===n||null!==(o=n.querySelector("a.button"))&&o.addEventListener("click",function(e){e.preventDefault(),n.classList.add("figure--load"),o.parentNode.removeChild(o);e=document.querySelector(".entry-header");e.parentNode.removeChild(e);var t=document.createElement("iframe");n.appendChild(t),t.src=o.getAttribute("href"),t.id=o.getAttribute("data-id"),function(e){var t=e+window.pageYOffset-24;if(null!==(e=document.querySelector(".header"))&&(e=window.getComputedStyle(e),t-=parseInt(e.getPropertyValue("height"))),"scrollBehavior"in document.documentElement.style)return window.scrollTo({top:t,behavior:"smooth"});window.scrollTo(0,t)}(n.getBoundingClientRect().top),t.addEventListener("load",function(){n.classList.remove("figure--load"),t.height=t.contentWindow.document.body.scrollHeight,t.contentWindow.focus()})})}();
"use strict";!function(){var o,r,e,s=document.getElementById("generator");null!==s&&"undefined"!=typeof knife_generator_options&&(void 0!==knife_generator_options.page_background&&(s.style.backgroundColor=knife_generator_options.page_background),void 0!==knife_generator_options.page_color&&(s.style.color=knife_generator_options.page_color),"undefined"==typeof knife_generator_items||knife_generator_items.length<1||(o=null,r=knife_generator_items.slice(),function(){var e=document.createElement("div");e.classList.add("entry-generator__loader"),s.insertBefore(e,s.firstChild);var t=document.createElement("span");t.classList.add("entry-generator__loader-bounce"),e.appendChild(t)}(),void 0!==knife_generator_options.button_text&&((e=document.createElement("div")).classList.add("entry-generator__button"),s.appendChild(e),(o=document.createElement("button")).classList.add("button"),o.setAttribute("type","button"),o.textContent=knife_generator_options.button_text,e.appendChild(o),void 0!==knife_generator_options.button_background&&(o.style.backgroundColor=knife_generator_options.button_background),void 0!==knife_generator_options.button_color&&(o.style.color=knife_generator_options.button_color)),o.addEventListener("click",function(e){e.preventDefault();var t=s.getBoundingClientRect().top+window.pageYOffset;e=t-76,"scrollBehavior"in document.documentElement.style?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e),r.length<1&&(r=knife_generator_items.slice());t=Math.floor(Math.random()*r.length),e=r[t];knife_generator_options.hasOwnProperty("button_repeat")&&(o.textContent=knife_generator_options.button_repeat),s.querySelector(".entry-generator__share")&&function(e){if(void 0!==knife_generator_options.share_links&&!(void 0===knife_generator_options.permalink||knife_generator_options.hasOwnProperty("noshare")&&knife_generator_options.noshare)){for(var t,n=s.querySelector(".entry-generator__title").textContent,o=[knife_generator_options.permalink.replace(/\/?$/,"/")+e+"/",n],r=s.querySelectorAll(".share > .share__link"),i=0;t=r[i];i++){var a=t.getAttribute("data-label");void 0!==knife_generator_options.share_links[a]&&(a=knife_generator_options.share_links[a],t.href=a.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(o[t-1])}))}"function"==typeof window.shareButtons&&window.shareButtons()}}(t+1);t=s.querySelector(".entry-generator__content");if(null===t&&((t=document.createElement("div")).classList.add("entry-generator__content"),s.insertBefore(t,s.lastChild)),t.innerHTML=e.description||"",knife_generator_options.hasOwnProperty("notext")&&knife_generator_options.notext&&t.parentNode.removeChild(t),s.classList.add("entry-generator--loader"),knife_generator_options.hasOwnProperty("blank")&&knife_generator_options.blank){var n=s.querySelector(".entry-generator__title");return null===n&&((n=document.createElement("div")).classList.add("entry-generator__title"),s.insertBefore(n,s.firstChild)),n.innerHTML=e.heading||"",setTimeout(function(){s.classList.remove("entry-generator--loader")},600),s.classList.add("entry-generator--blank")}n=s.querySelector(".entry-generator__poster");if(null!==n&&n.parentNode.removeChild(n),void 0!==e.poster)return(n=new Image).classList.add("entry-generator__poster"),s.insertBefore(n,s.firstChild),n.addEventListener("load",function(){setTimeout(function(){s.classList.remove("entry-generator--loader")},600)}),n.setAttribute("alt",e.heading||""),n.setAttribute("src",e.poster),s.classList.add("entry-generator--poster")})))}();
"use strict";document.getElementById("toggle-search").addEventListener("click",function(e){e.preventDefault();e=document.getElementById("explorer");null!==e&&e.parentNode.removeChild(e),e=function(e){var t=document.createElement("div");t.classList.add("explorer"),t.setAttribute("id","explorer");var n=document.createElement("div");n.classList.add("explorer__header"),t.appendChild(n);var o=document.createElement("button");o.classList.add("explorer__header-close"),n.appendChild(o);var r=document.getElementById("wpadminbar");r&&window.scrollY<r.clientHeight&&(n.style.marginTop=r.clientHeight-window.scrollY+"px");var c=window.scrollY;e.classList.add("is-login"),e.style.top=-c+"px";function d(){e.removeChild(t),document.removeEventListener("keydown",i),e.classList.remove("is-login"),e.style.top="",window.scrollTo(0,c)}var i=function(e){27===e.keyCode&&d()};o.addEventListener("click",d),document.addEventListener("keydown",i);r=document.createElement("form");r.classList.add("explorer__form"),t.appendChild(r);var l=document.createElement("input");l.classList.add("explorer__form-input"),l.setAttribute("placeholder",knife_search_options.placeholder||""),r.appendChild(l),setTimeout(function(){l.focus()},100);o=document.createElement("button");return o.classList.add("explorer__form-submit","icon","icon--right"),o.setAttribute("type","submit"),r.appendChild(o),r.addEventListener("submit",function(e){e.preventDefault(),document.location.href="/search/#gsc.q="+l.value}),document.body.appendChild(t),t}(document.body)}),function(){var e,t,n=document.querySelector(".search .gcse-search");"undefined"!=typeof knife_search_options&&null!==n&&(e=n.getAttribute("data-placeholder"),window.__gcse={callback:function(){document.querySelector("input.gsc-input").placeholder=e}},(t=document.createElement("script")).type="text/javascript",t.async=!0,t.src="https://cse.google.com/cse.js?cx="+knife_search_options.id,(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n))}();
"use strict";!function(){var t,n,i=document.getElementById("toggle-menu"),r=document.querySelector(".header");function s(e){for(var t=r.parentElement.firstChild;t&&t!==r;)1==t.nodeType&&(t.style.display=e),t=t.nextSibling}function l(e){if((e.target||e.srcElement)===t)return e.stopPropagation(),t.removeEventListener("click",l),i.click()}null!==i&&(t=document.body,n=0,i.addEventListener("click",function(e){return e.preventDefault(),i.classList.toggle("toggle--expand"),r.querySelector(".navbar").classList.toggle("navbar--expand"),t.classList.contains("is-navbar")?(t.classList.remove("is-navbar"),t.style.top="",t.removeAttribute("onclick",""),window.scrollTo(0,n),s("")):(n=window.scrollY,t.classList.add("is-navbar"),t.style.top=-n+"px",t.setAttribute("onclick",""),t.addEventListener("click",l),s("none"))}))}();
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){var l=document.getElementById("comments");if(null!==l&&"undefined"!=typeof knife_id_handler){var m=function(e,t){var n=e.split(".");if(1<n.length){var r=_slicedToArray(n,2),n=r[0],r=r[1];if(void 0!==knife_id_handler[n][r])return knife_id_handler[n][r]}return void 0!==knife_id_handler[e]?knife_id_handler[e]:t||""},s=["vkontakte","google","facebook","yandex"],a=m("post",null);if(null!==a){var d=!1,u=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var r in t.attributes)n.setAttribute(r,t.attributes[r]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n},i=function(e){var t=e+window.pageYOffset-24,e=document.querySelector(".header");if(null!==e&&(e=window.getComputedStyle(e),t-=parseInt(e.getPropertyValue("height"))),"scrollBehavior"in document.documentElement.style)return window.scrollTo({top:t,behavior:"smooth"});window.scrollTo(0,t)},p=function(e,t){var n=JSON.parse(localStorage.getItem("knife_id_unsent"))||{};n[a]={text:e,reply:t},localStorage.setItem("knife_id_unsent",JSON.stringify(n))},v=function(e){var t=(JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[a]||{};return t.reply===e&&t.text||""},f=function(e,t){var n=new Image;e.appendChild(n);var r=m("comments.noavatar");n.onerror=function(){n.setAttribute("src",r)},n.onload=function(){n.removeAttribute("loading")},n.setAttribute("loading",!0),n.setAttribute("src",t.avatar),n.setAttribute("alt",t.name)},_=function(t,e){var n,r,o=u("a",{class:"comments__item-time",text:(n=e.created,r=new Date(n),n={hour:"numeric",minute:"numeric",month:"numeric",day:"numeric"},r.getFullYear()<(new Date).getFullYear()&&(n.year="numeric"),r.toLocaleString("ru",n)),attributes:{href:"#comment-".concat(e.id)},parent:t});o.addEventListener("click",function(e){e.preventDefault(),history.pushState({},"",o.href),l.classList.remove("comments--folded"),i(t.getBoundingClientRect().top)})},h=function(e,t){var n=u("div",{class:"comments__item-warning",parent:e});return"removed"===t&&(n.textContent=m("comments.removed")),"blocked"===t&&(n.textContent=m("comments.blocked")),e},y=function t(n,r){var e=parseInt(r.plus)-parseInt(r.minus);n.className="comments__item-vote",r.self&&n.classList.add("comments__item-vote--voted"),0<e&&n.classList.add("comments__item-vote--plus"),e<0&&n.classList.add("comments__item-vote--minus");var o=u("button",{classes:["icon","icon--vote"],parent:n});"plus"===r.vote&&(o.classList.remove("icon--vote"),o.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),u("span",{text:e,attributes:{title:"+".concat(r.plus," / -").concat(r.minus)},parent:n});var a=u("button",{classes:["icon","icon--vote"],parent:n});"minus"===r.vote&&(a.classList.remove("icon--vote"),a.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),o.addEventListener("click",function(e){if(e.preventDefault(),!d)return S();for(o.classList.contains("icon--voted")&&(r.plus=parseInt(r.plus)-1,delete r.vote,C("/id/ratings?comment=".concat(r.id,"&vote=plus"),"DELETE")),o.classList.contains("icon--vote")&&(r.plus=parseInt(r.plus)+1,r.vote="plus",C("/id/ratings?comment=".concat(r.id,"&vote=plus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);t(n,r)}),a.addEventListener("click",function(e){if(e.preventDefault(),!d)return S();for(a.classList.contains("icon--voted")&&(r.minus=parseInt(r.minus)-1,delete r.vote,C("/id/ratings?comment=".concat(r.id,"&vote=minus"),"DELETE")),a.classList.contains("icon--vote")&&(r.minus=parseInt(r.minus)+1,r.vote="minus",C("/id/ratings?comment=".concat(r.id,"&vote=minus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);t(n,r)})},o=function(e,t){if(e.setAttribute("data-id",t.id),"visible"!==t.status)return h(e,t.status);t.name=t.name||m("comments.anonymous"),t.content=t.content.replace(/(\n)+/g,"<br>"),e.setAttribute("data-name",t.name);var n=u("div",{class:"comments__item-avatar",parent:e});f(n,t);var r=u("div",{class:"comments__item-header",parent:e});_(e,t),u("span",{class:"comments__item-name",text:t.name,parent:r}),u("span",{class:"comments__item-content",html:t.content,parent:e});var o,a,i,n=u("div",{class:"comments__item-footer",parent:e});o=n,a=t,i=e,u("button",{class:"comments__item-button",text:m("comments.reply"),parent:o}).addEventListener("click",function(e){if(e.preventDefault(),!d)return S();l.classList.remove("comments--folded"),l.querySelectorAll(".comments__item-form").forEach(function(e){e.parentNode.removeChild(e)});var t=g();t.classList.add("comments__item-form"),t.setAttribute("data-reply",a.id),i.insertBefore(t,o.nextSibling),u("button",{class:"comments__item-cancel",text:m("form.cancel"),parent:t.querySelector(".comments__form-footer")}).addEventListener("click",function(e){return e.preventDefault(),t.parentNode.removeChild(t)});var n=t.querySelector(".comments__form-text");n.setAttribute("placeholder",m("form.reply")),n.value=v(a.id),n.focus(),n.addEventListener("input",function(){p(n.value,a.id)})});var s,c,r=u("div",{class:"comments__item-vote",parent:n});return y(r,t),m("action")?function(e,t,n){var r=u("button",{class:"comments__item-button",text:m("comments.remove"),parent:e});r.addEventListener("click",function(e){e.preventDefault();e={remove:t.id};x(e,r,function(){for(var e=n.querySelector(".comments__item-children");n.lastChild;)n.removeChild(n.lastChild);h(n,"removed"),null!==e&&n.appendChild(e)})});var o=u("button",{class:"comments__item-button",text:m("comments.block"),parent:e});return o.addEventListener("click",function(e){e.preventDefault();e={block:t.id};x(e,o,function(){for(var e=n.querySelector(".comments__item-children");n.lastChild;)n.removeChild(n.lastChild);h(n,"blocked"),null!==e&&n.appendChild(e)})}),n}(n,t,e):(t.self&&(n=n,s=t,c=e,u("button",{class:"comments__item-button",text:m("comments.remove"),parent:n}).addEventListener("click",function(e){e.preventDefault();e="/id/comments/".concat(s.id);C(e,"DELETE",{},function(){for(var e=c.querySelector(".comments__item-children");c.lastChild;)c.removeChild(c.lastChild);h(c,"removed"),null!==e&&c.appendChild(e)})})),e)},c=function(e){var t=u("div",{class:"comments__item"}),t=o(t,e);if(null===e.parent)return l.appendChild(t);var n=l.querySelector('[data-id="'.concat(e.parent,'"]'));if(null===n)return l.appendChild(t);var r=n.querySelector(".comments__item-children");null===r&&(r=u("div",{class:"comments__item-children",parent:n})),"visible"===e.status&&(t=function(t,e,n){if(!t.hasAttribute("data-name"))return n;var r=u("a",{class:"comments__item-replied",html:'<span class="icon icon--reply"></span>',attributes:{href:"#comment-".concat(e.parent)},parent:n.querySelector(".comments__item-header")});return u("span",{text:t.getAttribute("data-name"),parent:r}),r.addEventListener("click",function(e){e.preventDefault(),history.pushState({},"",r.href),l.classList.remove("comments--folded"),i(t.getBoundingClientRect().top)}),n}(n,e,t));n=n.getAttribute("data-level")||0,n=parseInt(n)+1;return t.setAttribute("data-level",n),2<n&&r.classList.add("comments__item-children--deepest"),r.appendChild(t)},b=function(n){var e="/id/comments?post=".concat(a),r=n.getAttribute("data-reply");r&&(e+="&parent=".concat(r));var t={content:n.querySelector("textarea").value},o=n.querySelector(".comments__form-submit");o.setAttribute("disabled","disabled"),C(e,"POST",t,function(e){var t,e=e.comments||[];return 0<e.length&&(n.reset(),r&&n.parentNode.removeChild(n),t=c(e[0]),l.classList.remove("comments--folded"),i(t.getBoundingClientRect().top)),o.removeAttribute("disabled"),delete(t=JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[a],void localStorage.setItem("knife_id_unsent",JSON.stringify(t))})},g=function(){var t=u("form",{class:"comments__form"}),e=u("textarea",{class:"comments__form-text",attributes:{placeholder:m("form.placeholder")},parent:t}),n=m("form.authorize");d&&(n=m("form.submit"),e.setAttribute("required","required"));var r=u("div",{class:"comments__form-footer",parent:t}),o=u("button",{classes:["comments__form-submit","button"],attributes:{type:"submit"},text:n,parent:r});t.addEventListener("submit",function(e){return e.preventDefault(),d?void b(t):S()});function a(){window.setTimeout(function(){e.style.height="auto",e.style.height="".concat(e.scrollHeight+2,"px")},0)}return e.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&o.click(),a()}),e.addEventListener("paste",a),t},L=function(e){if(e=e||m("error"),!l.classList.contains("comments--expand"))return console.error(e);var t=l.querySelector(".comments__form");if(null===t)return console.error(e);var n=l.querySelector(".comments__error");null===n&&(n=u("p",{class:"comments__error"})),n.textContent=e,t.parentNode.insertBefore(n,t.nextSibling),i(t.getBoundingClientRect().top)},x=function(e,n,r){var t,o=new FormData;for(t in o.append("action",m("action")),o.append("nonce",m("nonce")),e)o.append(t,e[t]);n.setAttribute("disabled","disabled");var a=new XMLHttpRequest;a.open("POST",m("ajaxurl")),a.send(o),a.onload=function(){var e=l.querySelector(".comments__error");null!==e&&l.removeChild(e),n.removeAttribute("disabled");try{var t=JSON.parse(a.responseText);if(!t.success)return L(t.data);if("function"==typeof r)return r(t.data||{})}catch(e){return L()}}},C=function(e,t,n,r){var o=new XMLHttpRequest;o.open(t,e,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){var e=l.querySelector(".comments__error");null!==e&&l.removeChild(e);try{var t=JSON.parse(o.responseText);if(200!==o.status)return L(t.message||m("error"));if("function"==typeof r)return r(t.result||{})}catch(e){return L()}},void 0===n&&(n={}),o.send(JSON.stringify(n))},S=function(){var e=document.body,t=u("div",{class:"login"}),n=u("div",{class:"login__popup",parent:t});u("h3",{class:"login__popup-heading",text:m("login.heading"),parent:n}),u("p",{class:"login__popup-helper",text:m("login.helper"),parent:n}),s.forEach(function(e){var t=u("a",{classes:["login__popup-button","login__popup-button--".concat(e)],text:m("login.".concat(e)),attributes:{href:"/id/profiles/".concat(e),target:"_blank",rel:"opener"},parent:n});u("span",{classes:["icon","icon--".concat(e)],parent:t})}),u("p",{class:"login__popup-policy",html:m("login.policy"),parent:n});var r=u("button",{class:"login__popup-close",parent:n}),o=window.scrollY;e.classList.add("is-login"),e.style.top=-o+"px";function a(){e.removeChild(t),document.removeEventListener("keydown",i),e.classList.remove("is-login"),e.style.top="",window.scrollTo(0,o)}r.addEventListener("click",a);var i=function(e){if(27===e.keyCode)return a()};document.addEventListener("keydown",i);r=function e(t){if("reload"===t.data)return a(),window.removeEventListener("message",e),k()};window.addEventListener("message",r),e.appendChild(t)},k=function(){for(;l.lastChild;)l.removeChild(l.lastChild);d=!1,C("/id/comments?post=".concat(a),"GET",{},function(e){var t=e.comments||[];e.identity&&(d=!0),r=l,m("question.message")&&(n=u("div",{class:"comments__question",parent:r}),m("question.avatar")&&u("div",{class:"comments__question-avatar",text:m("question.avatar"),parent:n}),r=u("div",{class:"comments__question-caption",parent:n}),m("question.author")&&u("p",{text:m("question.author"),class:"comments__question-author",parent:r}),u("p",{text:m("question.message"),class:"comments__question-message",parent:r}));var n=g();l.appendChild(n);var r,o=n.querySelector(".comments__form-text");o.textContent=v(0),o.addEventListener("input",function(){p(o.value,0)}),r=n,void 0!==(n=e.identity)&&(e=u("div",{class:"comments__form-badge",parent:r.querySelector(".comments__form-footer")}),f(e,n),u("span",{text:n.name,parent:e}),u("button",{classes:["comments__form-exit","icon","icon--exit"],attributes:{type:"button",title:m("form.exit")},parent:r}).addEventListener("click",function(e){e.preventDefault(),l.classList.remove("comments--expand"),C("/id/logout","POST",{},function(){setTimeout(k,300)})})),10<t.length&&function(){l.classList.add("comments--folded");var e=u("div",{class:"comments__expand",parent:l});u("button",{class:"comments__expand-button",text:m("comments.expand"),attrubutes:{type:"button"},parent:e}).addEventListener("click",function(e){e.preventDefault(),l.classList.remove("comments--folded")})}(),t.forEach(function(e){void 0!==e.id&&c(e)}),l.classList.add("comments--expand");var a,t=document.location.hash.match(/^#comment-(\d+)/)||[];1<t.length&&(null!==(a=l.querySelector('[data-id="'.concat(t[1],'"]')))&&(l.classList.remove("comments--folded"),window.addEventListener("load",function(){i(a.getBoundingClientRect().top)})))})};k()}}}();
"use strict";!function(){function i(e,t){return knife_mistype_reporter.hasOwnProperty(e)?knife_mistype_reporter[e]:t||""}function t(n){var d=document.querySelector(".mistype");null!==d&&d.parentNode.removeChild(d),(d=document.createElement("div")).classList.add("mistype"),document.body.appendChild(d);var e=document.createElement("div");e.classList.add("mistype__popup"),d.appendChild(e);var t=document.createElement("h3");t.classList.add("mistype__popup-heading"),t.textContent=i("heading"),e.appendChild(t);t=document.createElement("p");t.classList.add("mistype__popup-marked"),t.textContent=n,e.appendChild(t);var o=document.createElement("textarea");o.classList.add("mistype__popup-comment"),o.setAttribute("placeholder",i("textarea")),o.setAttribute("maxlength",300),e.appendChild(o);t=document.createElement("button");t.classList.add("mistype__popup-submit","button"),t.textContent=i("button","Send"),e.appendChild(t),t.addEventListener("click",function(e){var t;e.preventDefault(),t=n,e=o.value,e={nonce:i("nonce"),time:i("time"),comment:e,marked:t,location:document.location.href},(t=new XMLHttpRequest).open("POST",i("ajaxurl")+"/mistype"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e)),d.parentNode.removeChild(d)});t=document.createElement("button");t.classList.add("mistype__popup-close"),t.addEventListener("click",function(){d.parentNode.removeChild(d)}),e.appendChild(t);t=function e(t){27===t.keyCode&&d.parentNode.removeChild(d),document.removeEventListener("keydown",e)};document.addEventListener("keydown",t)}"undefined"!=typeof knife_mistype_reporter&&document.addEventListener("keydown",function(e){!e.ctrlKey||13!=e.keyCode||0<(e=window.getSelection().toString()).length&&t(e.substring(0,300))})}();
"use strict";!function(){var d,e=document.querySelector(".post");null!==e&&(d=document.body,e.addEventListener("click",function(e){var t,n,c,r=e.target||e.srcElement;r.hasAttribute("data-body")&&(t=function(e){e=e.target||e.srcElement;e!==n&&!e.classList.contains("reference__content-close")||(n.parentNode.removeChild(n),r.removeAttribute("data-active"),d.classList.remove("is-reference"))},null!==(n=document.getElementById("reference"))&&n.parentNode.removeChild(n),n=function(e){var t=document.createElement("div");t.classList.add("reference"),t.setAttribute("id","reference");var n=document.createElement("div");return n.classList.add("reference__content"),n.innerHTML=e,t.appendChild(n),(e=document.createElement("button")).classList.add("reference__content-close"),n.appendChild(e),d.appendChild(t),t}(r.getAttribute("data-body")),c=n,e=(e=r).getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop,c.style.top=e+"px",r.setAttribute("data-active",!0),d.classList.add("is-reference"),n.addEventListener("click",t),n.addEventListener("touchend",t))}))}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var c,r,_,d,l,a=document.getElementById("quiz");function s(e){if("scrollBehavior"in document.documentElement.style)return window.scrollTo({top:e,behavior:"smooth"});window.scrollTo(0,e)}function u(s,a,u){knife_quiz_options.hasOwnProperty("format")||(knife_quiz_options.format="binary"),a.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-answer")&&!a.classList.contains("entry-quiz__vote--complete")){var n,i=s[t.dataset.answer];switch(a.classList.add("entry-quiz__vote--complete"),knife_quiz_options.format){case"dynamic":i.hasOwnProperty("dynamic")&&(l+=i.dynamic.toString()),t.classList.add(u+"--selected");break;case"category":i.hasOwnProperty("category")&&(n=0,d.hasOwnProperty(i.category)&&(n=d[i.category]),d[i.category]=n+1,_=Object.keys(d).reduce(function(e,t){return d[e]>d[t]?e:t})),t.classList.add(u+"--selected");break;case"points":i.hasOwnProperty("points")&&i.points&&(_+=parseInt(i.points)),t.classList.add(u+"--selected");break;case"binary":if(i.hasOwnProperty("binary")&&i.binary){_+=1,t.classList.add(u+"--correct");break}for(var o=0;o<s.length;o++){var r=t.parentNode.children[o];s[o].hasOwnProperty("binary")&&s[o].binary&&r.classList.add(u+"--missed")}t.classList.add(u+"--wrong")}if(knife_quiz_options.hasOwnProperty("message")&&knife_quiz_options.message){e=document.createElement("div");if(e.classList.add("entry-quiz__vote-message"),i.message)return e.innerHTML=i.message,a.appendChild(e)}return c.click()}})}function p(e,t){var n=document.createElement("div");return n.classList.add("entry-quiz__vote"),a.insertBefore(n,t),knife_quiz_options.hasOwnProperty("shuffle")&&knife_quiz_options.shuffle&&e.sort(function(){return.5-Math.random()}),(knife_quiz_options.hasOwnProperty("attachment")&&knife_quiz_options.attachment?function(e,t){var n=document.createElement("div");n.classList.add("entry-quiz__vote-grid"),t.appendChild(n);for(var i=0;i<e.length;i++){var o,r=document.createElement("figure");void 0!==e[i].attachment&&((o=document.createElement("img")).setAttribute("src",e[i].attachment),r.appendChild(o),r.classList.add("entry-quiz__vote-attachment"),r.setAttribute("data-answer",i),n.appendChild(r))}u(e,t,"entry-quiz__vote-attachment"),t.classList.add("entry-quiz__vote--attachment")}:function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("div");void 0!==e[n].choice&&(i.classList.add("entry-quiz__vote-choice"),i.setAttribute("data-answer",n),i.innerHTML=e[n].choice,t.appendChild(i))}u(e,t,"entry-quiz__vote-choice"),t.classList.add("entry-quiz__vote--choice")})(e,n),0}function f(e){s(a.getBoundingClientRect().top+window.pageYOffset-76),e.hasOwnProperty("poster")&&(t=document.createElement("img"),0<l.length&&(e.poster=e.poster.replace("*",l)),t.classList.add("entry-quiz__poster"),t.setAttribute("src",e.poster),a.insertBefore(t,a.firstChild));var t=a.querySelector(".entry-quiz__share");document.body.contains(t)&&function(e,t){if(void 0!==knife_quiz_options.share_links&&!(void 0===knife_quiz_options.permalink||knife_quiz_options.hasOwnProperty("noshare")&&knife_quiz_options.noshare)){e=knife_quiz_options.permalink.replace(/\/?$/,"/")+e.index+"/";0<t.length&&(e=e+t+"/");for(var n,i=[e,a.querySelector(".entry-quiz__title").textContent||""],o=a.querySelectorAll(".share > .share__link"),r=0;n=o[r];r++){var s=n.getAttribute("data-label");void 0!==knife_quiz_options.share_links[s]&&(s=knife_quiz_options.share_links[s],n.href=s.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(i[t-1])}))}"function"==typeof window.shareButtons&&window.shareButtons()}}(e,l);t=a.querySelector(".entry-quiz__vote");document.body.contains(t)&&t.parentNode.removeChild(t);t=a.querySelector(".entry-quiz__content");return e.hasOwnProperty("details")?t.innerHTML=e.details:t.parentNode.removeChild(t)}null!==a&&"undefined"!=typeof knife_quiz_options&&(c=null,_=r=0,d={},l="",knife_quiz_options.hasOwnProperty("center")&&knife_quiz_options.center&&a.classList.add("entry-quiz--center"),knife_quiz_options.hasOwnProperty("button_start")&&((c=document.createElement("button")).classList.add("entry-quiz__button","button"),c.setAttribute("type","button"),c.textContent=knife_quiz_options.button_start),a.appendChild(c),"object"!==("undefined"==typeof knife_quiz_items?"undefined":_typeof(knife_quiz_items))&&(knife_quiz_items=[]),knife_quiz_options.hasOwnProperty("random")&&knife_quiz_options.random&&knife_quiz_items.sort(function(){return.5-Math.random()}),"object"!==("undefined"==typeof knife_quiz_results?"undefined":_typeof(knife_quiz_results))&&(knife_quiz_results={}),c.addEventListener("click",function(){var e=knife_quiz_items.length;if(0<e&&r<e){var t=knife_quiz_items[r];return r+=1,!1===a.classList.contains("entry-quiz--item")&&(a.classList.add("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_next")&&(c.textContent=knife_quiz_options.button_next)),r===e&&knife_quiz_options.hasOwnProperty("button_last")&&(c.textContent=knife_quiz_options.button_last),function(e,t,n){s(a.getBoundingClientRect().top+window.pageYOffset-76);var i=a.querySelector(".entry-quiz__content");e.hasOwnProperty("question")&&(i.innerHTML=e.question),a.querySelector(".entry-quiz__info").textContent=t+" / "+n,n=a.querySelector(".entry-quiz__vote"),document.body.contains(n)&&n.parentNode.removeChild(n),"object"===_typeof(e.answers)&&0<e.answers.length&&p(e.answers,i.nextSibling)}(t,r,e)}if(!1===a.classList.contains("entry-quiz--results")){for(var n=[],i=0;i<knife_quiz_results.length;i++){var o=knife_quiz_results[i];o.index=i,o.hasOwnProperty("advance")&&o.advance!==_||n.push(o)}if(0<n.length){e=n[Math.floor(Math.random()*n.length)];return a.classList.remove("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_repeat")&&(c.textContent=knife_quiz_options.button_repeat),knife_quiz_options.hasOwnProperty("norepeat")&&knife_quiz_options.norepeat&&c.parentNode.removeChild(c),a.classList.add("entry-quiz--results"),f(e)}}return document.location.reload()}))}();
"use strict";!function(){function o(e){var n,t,o=document.createElement("script");return o.type="text/javascript",o.src=(n=e,t=(t=document.querySelector('link[rel="canonical"]'))&&t.href?encodeURIComponent(t.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===n?"https://vk.com/share.php?act=count&index=0&url="+t:"facebook"===n?"https://knife.support/facebook/?fields=engagement&callback=knifeFacebookCount&id="+t:void 0),o.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(o),!0}var a={facebook:!1,vkontakte:!1};window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;for(var n=0;n<e.length;n++){var t=e[n].dataset.label;e[n].addEventListener("click",function(e){return e.preventDefault(),n=this.href,t={width:600,height:400,id:this.dataset.label},o=Math.round(screen.width/2-t.width/2),e=0,screen.height>t.height&&(e=Math.round(screen.height/3-t.height/2)),void window.open(n,t.id,"left="+o+",top="+e+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");var n,t,o}),t in a&&!1===a[t]&&(a[t]=o(t))}},window.VK=window.VK||{},window.VK.Share={count:function(e,n){if(void 0!==n&&n)for(var t=document.querySelectorAll(".share .share__link--vkontakte"),o=0;o<t.length;o++){var a=document.createElement("span");a.className="share__count",a.innerHTML=n,t[o].appendChild(a)}}},window.knifeFacebookCount=function(e){var n,t=0,o=e.engagement||{};for(n in o)t+=o[n];if(0!==t)for(var a=document.querySelectorAll(".share .share__link--facebook"),r=0;r<a.length;r++){var i=document.createElement("span");i.className="share__count",i.innerHTML=t,a[r].appendChild(i)}},window.shareButtons()}();
"use strict";!function(){var i,a,l;"undefined"!=typeof knife_similar_posts&&(i=function(e){for(var t,n=0;n<e.length;n++){t=Math.floor(Math.random()*n);var r=e[n];e[n]=e[t],e[t]=r}return e}(knife_similar_posts.similar||[]),a=0,l=function(e,t){var n=document.createElement("p");e.appendChild(n);e=document.createElement("a");e.href=t.link,e.innerHTML=t.title,n.appendChild(e)},function(){var e=document.querySelector(".entry-footer");if(!(null===e||i.length<a+4)){var t=document.createElement("div");t.classList.add("entry-footer__similar");for(var n=a;n<a+4;n++)i[n].link&&i[n].title&&l(t,i[n]);a+=4,e.appendChild(t)}}(),function(){var e=document.querySelectorAll(".entry-content");if(1===e.length&&1!=knife_similar_posts.hidden){var t=e[0].children;if(!(t.length<20))for(var n=20,r=0;n<t.length-5;n++)if("p"===t[n].tagName.toLowerCase()&&void 0!==t[n-1]&&"p"===t[n-1].tagName.toLowerCase()){if(!function(e){if(i.length<a+2)return!1;if(null===e)return!1;var t=document.createElement("figure");t.classList.add("figure","figure--similar");var n=document.createElement("h4");n.innerHTML=knife_similar_posts.title||"",t.appendChild(n);for(var r=a;r<a+2;r++)i[r].link&&i[r].title&&l(t,i[r]);return a+=2,e.parentNode.insertBefore(t,e.nextSibling),!0}(t[n-1])||(r+=1),3<r)break;n=20+n}}}())}();
"use strict";!function(){var s=document.getElementById("story");if(null!==s&&"undefined"!=typeof Glide&&!(s.querySelectorAll(".entry-story__slide").length<1||"undefined"==typeof knife_story_items||knife_story_items.length<1)){var r=new Glide(".entry-story",{gap:0,rewind:!1,touchAngle:60,swipeThreshold:60,dragThreshold:!1,classes:{slider:"entry-story--slider",swipeable:"entry-story--swipeable",direction:{ltr:"entry-story--ltr",rtl:"entry-story--rtl"}},breakpoints:{767:{dragThreshold:!0}}}),n={};r.on("mount.before",function(){for(var e,t=0;e=knife_story_items[t];t++){var n=document.createElement("div");n.classList.add("entry-story__slide-wrap");var r=document.createElement("div");r.classList.add("entry-story__slide-content"),(o=void 0)!==e.kicker&&((o=document.createElement("div")).classList.add("entry-story__slide-kicker"),o.innerHTML=e.kicker,n.appendChild(o)),(o=void 0)!==e.image&&void 0!==e.ratio&&((o=document.createElement("div")).classList.add("entry-story__slide-image"),o.style.setProperty("background-image","url("+e.image+")"),o.style.setProperty("--image-ratio",e.ratio),r.appendChild(o)),(o=void 0)!==e.entry&&((o=document.createElement("div")).classList.add("entry-story__slide-entry"),o.innerHTML=e.entry,r.appendChild(o));var o=document.createElement("div");o.classList.add("entry-story__slide"),o.appendChild(n),n.appendChild(r),s.querySelector(".entry-story__slides").appendChild(o)}}),r.on("mount.before",function(){var e=s.querySelectorAll(".entry-story__slide");if(e.length<1)return!1;var t=e[0].querySelector(".share");if(null===t)return!1;t=t.cloneNode(!0);e[e.length-1].querySelector(".entry-story__slide-content").appendChild(t),"function"==typeof window.shareButtons&&window.shareButtons()}),r.on("mount.before",function(){var e=document.createElement("div");e.classList.add("entry-story__bullets");for(var t=0;t<s.querySelectorAll(".entry-story__slide").length;t++){var n=document.createElement("span");n.classList.add("entry-story__bullets-item"),e.appendChild(n)}return s.appendChild(e)}),r.on("mount.before",function(e){var t=document.querySelector('link[rel="prev"]');if(null===t||!t.hasAttribute("href"))return!1;n.href=t.href;t=document.createElement("div");return t.classList.add("entry-story__slide","entry-story__slide--empty"),s.querySelector(".entry-story__slides").appendChild(t)}),r.on("mount.before",function(){["prev","next"].forEach(function(e,t){var n=document.createElement("div");n.classList.add("entry-story__control","entry-story__control--"+e),n.classList.add();var r=document.createElement("span");r.classList.add("icon","icon--"+e),n.appendChild(r),s.appendChild(n)}),s.querySelector(".entry-story__control--next").addEventListener("click",function(e){e.preventDefault(),r.go(">")}),s.querySelector(".entry-story__control--prev").addEventListener("click",function(e){e.preventDefault(),r.go("<")})}),r.on("mount.before",function(){var e=s.getBoundingClientRect();s.style.height=window.innerHeight-e.top-window.pageYOffset+"px"}),r.on(["mount.after","run"],function(){for(var e,t=s.querySelectorAll(".entry-story__bullets-item"),n=0;e=t[n];n++)e.classList.remove("entry-story__bullets-item--active"),r.index===n&&e.classList.add("entry-story__bullets-item--active")}),r.on("mount.after",function(){var e=s.querySelectorAll(".entry-story__slide");n.count=e.length-1}),r.on(["mount.after","run"],function(e){var t=s.querySelector(".entry-story__control--prev");t.classList.remove("entry-story__control--disabled"),0===r.index&&t.classList.add("entry-story__control--disabled")}),r.on("run",function(e){var t=s.querySelector(".entry-story__control--next");t.classList.remove("entry-story__control--disabled"),r.index===n.count&&t.classList.add("entry-story__control--disabled")}),r.on("run",function(e){r.index===n.count&&n.href&&s.classList.remove("entry-story--active")}),r.on("run.after",function(e){r.index===n.count&&n.href&&(document.location.href=n.href)}),r.on("build.after",function(){var n=0;s.addEventListener("touchstart",function(e){e=e.changedTouches[0];n=e.pageY},!0),s.addEventListener("touchmove",function(e){var t=e.changedTouches[0];n<t.pageY&&0===window.pageYOffset&&e.preventDefault(),s.classList.contains("entry-story--dragging")&&e.preventDefault()},!0)}),r.on("build.after",function(){return!(void 0===knife_story_options.color||knife_story_options.color.length<1)&&void(s.style.backgroundColor=knife_story_options.color)}),r.on("build.after",function(){if(void 0===knife_story_options.background||knife_story_options.background.length<1)return s.classList.add("entry-story--active");var e=new Image;e.addEventListener("load",function(){return s.classList.add("entry-story--active")}),e.src=knife_story_options.background;var t,n=document.createElement("div");return n.classList.add("entry-story__backdrop"),n.style.backgroundImage="url("+knife_story_options.background+")",void 0!==knife_story_options.blur&&((t=parseInt(knife_story_options.blur))<=0||(n.style.margin="-"+t+"px",n.style.filter="blur("+t+"px)")),void 0!==knife_story_options.shadow&&((e=parseInt(knife_story_options.shadow)/100)<=0||1<e||((t=document.createElement("div")).classList.add("entry-story__shadow"),t.style.backgroundColor="rgba(0, 0, 0, "+e+")",n.appendChild(t))),s.appendChild(n)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),r.mount()}}();
"use strict";"serviceWorker"in navigator&&(1<document.location.host.match(/\./g).length||window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")}));