"use strict";!function(){var e=document.querySelectorAll(".widget-adfox");if(!(e.length<1)){for(var t=0;t<e.length;t++){var a,o,n=e[t].querySelector("div");null!==n&&0!==n.dataset.length&&(a=Date.now().toString(10)+Math.random().toString(10).substr(2,5),(o=document.createElement("div")).id="adfox_"+a,e[t].replaceChild(o,n),o.addEventListener("click",c),o.addEventListener("click",i),d(n.dataset,a,e[t]))}var r=document.createElement("script");r.type="text/javascript",r.crossorigin="anonymous",r.src="https://an.yandex.ru/system/context.js",document.head.appendChild(r)}function s(e,t){e=e.match(/\/(\d+?)\/.+?\?(.+)$/)||[];if(e.length<=2)return t;var a=e[2].split("&");t.ownerId=e[1],t.params={};for(var o=0;o<a.length;o++){var n=a[o].split("=");1!=n.length&&"pr"!==n[0]&&(t.params[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t.params=function(e){if("undefined"==typeof knife_meta_parameters)return e;for(var t=["template","postid","special","category","tags","adult","promo","format"],a=0,o=1;a<t.length;a++,o++)e["puid"+o]=knife_meta_parameters[t[a]]||"";return e}(t.params),t}function l(e,a){return e.onStub=function(){a.classList.remove("widget-adfox--loaded")},e.onError=function(e){a.classList.remove("widget-adfox--loaded"),document.body.classList.contains("is-adminbar")&&console.error(e)},e.onLoad=function(e){var t=e.bundleParams;if(a.classList.remove("widget-adfox--loaded"),t.bannerId&&function(e){var t=localStorage.getItem("adfox-close");if(null===t)return!1;var a,o=JSON.parse(t),n=(new Date).getTime();for(a in o)n>o[a]&&delete o[a];if(localStorage.setItem("adfox-close",JSON.stringify(o)),o[e]&&o[e]>n)return!0;return!1}(t.bannerId))return e.destroy();a.classList.add("widget-adfox--loaded")},e}function d(e,t,a){if(window.yaContextCb=window.yaContextCb||[],e.common)return n=e.common,r=a,(o={}).containerId="adfox_"+t,o=s(n,o=l(o,r)),window.yaContextCb.push(function(){Ya.adfoxCode.create(o)}),0;var o,n,r,d,i;e.mobile&&(n=e.mobile,r=a,(d={}).containerId="adfox_"+t,d=s(n,d=l(d,r)),window.yaContextCb.push(function(){Ya.adfoxCode.createAdaptive(d,["tablet","phone"],{tabletWidth:1023,isAutoReloads:!0})})),e.desktop&&(e=e.desktop,a=a,(i={}).containerId="adfox_"+t,i=s(e,i=l(i,a)),window.yaContextCb.push(function(){Ya.adfoxCode.createAdaptive(i,["desktop"],{tabletWidth:1023,isAutoReloads:!0})}))}function i(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-close")){e.preventDefault();var a={},e=localStorage.getItem("adfox-close");for((a=null!==e?JSON.parse(e):a)[t.dataset.close]=(new Date).getTime()+288e5,localStorage.setItem("adfox-close",JSON.stringify(a));this.firstChild;)this.removeChild(this.lastChild)}}function c(e){e=e.target||e.srcElement;e.hasAttribute("data-event")&&(document.createElement("img").src=e.dataset.event)}}();
"use strict";!function(){if("undefined"!=typeof knife_backdrop){if(void 0!==knife_backdrop.image){var e=document.createElement("div");e.classList.add("backdrop"),e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;return o.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)}),o.src=knife_backdrop.image}void 0!==knife_backdrop.color&&(document.body.style.backgroundColor="#"+knife_backdrop.color)}}();
"use strict";!function(){var e=document.querySelector(".post");function n(e){var t,a,n=document.createElement("iframe"),r=(t=e,(a=document.createElement("div")).classList.add("embed__loader"),t.appendChild(a),(t=document.createElement("span")).classList.add("embed__loader-bounce"),a.appendChild(t),a);return n.setAttribute("allow","autoplay"),n.setAttribute("frameborder","0"),n.setAttribute("src",e.dataset.embed),n.addEventListener("load",function(){r.parentNode.removeChild(r)}),n}null!==e&&e.addEventListener("click",function(e){var t=e.target||e.srcElement;if(null!==t.parentElement){var a=t.parentElement;if(a.classList.contains("embed")&&a.hasAttribute("data-embed")){for(e.preventDefault();a.firstChild;)a.removeChild(a.firstChild);a.appendChild(n(a))}}})}();
"use strict";!function(){var e=document.querySelector(".entry-inpost");if(null!==e&&null!==e.firstElementChild){var t=["p"],n=document.querySelectorAll(".entry-content");if(0!==n.length){var a=n[0],l=(a=1<n.length?n[Math.floor(n.length/2)]:a).children,r=Math.max(Math.floor(l.length/3),6);1<n.length&&(r=l.length);var i=document.createElement("aside");i.classList.add("aside","aside--widget"),i.appendChild(e.firstElementChild);for(var d=r;d<l.length;d++)if(!(t.indexOf(l[d].tagName.toLowerCase())<0)&&void 0!==l[d-1]){var o=l[d-1];if(!(t.indexOf(o.tagName.toLowerCase())<0)){a.insertBefore(i,l[d]);break}}i.parentNode!==a&&a.appendChild(i)}}}();
"use strict";!function(){var e=document.querySelector(".post");if(null!==e)for(var t=e.querySelectorAll(".figure--flipper"),r=0;r<t.length;r++)t[r].addEventListener("click",function(e){"A"!==(e.target||e.srcElement).tagName&&this.classList.toggle("figure--rotate")})}();
"use strict";!function(){var n,o=document.querySelector(".post .figure--frame");null===o||null!==(n=o.querySelector("a.button"))&&n.addEventListener("click",function(e){e.preventDefault();var t=document.createElement("iframe");t.src=n.getAttribute("href"),t.id=n.getAttribute("data-id"),t.style.display="none",o.appendChild(t),n.textContent="...",n.classList.add("button--disabled"),n.dataset.loading&&(n.textContent=n.dataset.loading),t.addEventListener("load",function(){t.style.display="block";var e=document.querySelector(".entry-header");e.parentNode.removeChild(e),n.parentNode.removeChild(n),setTimeout(function(){t.height=t.contentWindow.document.body.scrollHeight,t.contentWindow.focus()},200),function(){var e=window.parent.document.querySelector(".post"),t=window.parent.document.documentElement.scrollTop;t+=e.getBoundingClientRect().top;e=window.parent.document.querySelector(".header"),e=window.parent.getComputedStyle(e);if(t-=parseInt(e.getPropertyValue("height")),"scrollBehavior"in document.documentElement.style)return window.parent.scrollTo({top:t,behavior:"smooth"});window.scrollTo(0,t)}()})})}();
"use strict";!function(){document.getElementById("toggle-search").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();e=document.getElementById("explorer");null!==e&&e.parentNode.removeChild(e),e=function(e){var t=document.createElement("div");t.classList.add("explorer"),t.setAttribute("id","explorer");var n=document.createElement("div");n.classList.add("explorer__header"),t.appendChild(n);var o=document.createElement("button");o.classList.add("explorer__header-close"),n.appendChild(o);var r=document.getElementById("wpadminbar");r&&window.scrollY<r.clientHeight&&(n.style.marginTop=r.clientHeight-window.scrollY+"px");var c=window.scrollY;e.classList.add("is-login"),e.style.top=-c+"px";function d(){e.removeChild(t),document.removeEventListener("keydown",i),e.classList.remove("is-login"),e.style.top="",window.scrollTo(0,c)}var i=function(e){27===e.keyCode&&d()};o.addEventListener("click",d),document.addEventListener("keydown",i);r=document.createElement("form");r.classList.add("explorer__form"),t.appendChild(r);var a=document.createElement("input");a.classList.add("explorer__form-input"),a.setAttribute("placeholder",knife_search_options.placeholder||""),r.appendChild(a),setTimeout(function(){a.focus()},100);o=document.createElement("button");return o.classList.add("explorer__form-submit","icon","icon--right"),o.setAttribute("type","submit"),r.appendChild(o),r.addEventListener("submit",function(e){e.preventDefault(),document.location.href="/search/#gsc.q="+a.value}),document.body.appendChild(t),t}(document.body)});(function(){var e=document.querySelector(".search .gcse-search");if("undefined"==typeof knife_search_options||null===e)return;var t=e.getAttribute("data-placeholder");window.__gcse={callback:function(){document.querySelector("input.gsc-input").placeholder=t}};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cse.google.com/cse.js?cx="+knife_search_options.id;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)})()}();
"use strict";!function(){var t,n,i=document.getElementById("toggle-menu"),r=document.querySelector(".header");function s(e){for(var t=r.parentElement.firstChild;t&&t!==r;)1==t.nodeType&&(t.style.display=e),t=t.nextSibling}function l(e){if((e.target||e.srcElement)===t)return e.stopPropagation(),t.removeEventListener("click",l),i.click()}null!==i&&(t=document.body,n=0,i.addEventListener("click",function(e){return e.preventDefault(),i.classList.toggle("toggle--expand"),r.querySelector(".navbar").classList.toggle("navbar--expand"),t.classList.contains("is-navbar")?(t.classList.remove("is-navbar"),t.style.top="",t.removeAttribute("onclick",""),window.scrollTo(0,n),s("")):(n=window.scrollY,t.classList.add("is-navbar"),t.style.top=-n+"px",t.setAttribute("onclick",""),t.addEventListener("click",l),s("none"))}))}();
"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){var l=document.getElementById("comments");if(null!==l&&"undefined"!=typeof knife_id_handler){var u=function(t,e){var n=t.split(".");if(1<n.length){var r=_slicedToArray(n,2),n=r[0],r=r[1];if(void 0!==knife_id_handler[n][r])return knife_id_handler[n][r]}return void 0!==knife_id_handler[t]?knife_id_handler[t]:e||""},s=["vkontakte","google","facebook","yandex"],a=u("post",null);if(null!==a){var m=!1,o={},d=function(t,e){var n=document.createElement(t);if(e.hasOwnProperty("class")&&n.classList.add(e.class),e.hasOwnProperty("classes")&&e.classes.forEach(function(t){n.classList.add(t)}),e.hasOwnProperty("text")&&(n.textContent=e.text),e.hasOwnProperty("html")&&(n.innerHTML=e.html),e.hasOwnProperty("attributes"))for(var r in e.attributes)n.setAttribute(r,e.attributes[r]);return e.hasOwnProperty("parent")&&e.parent.appendChild(n),n},i=function(t){var e=t+window.pageYOffset-24,t=document.querySelector(".header");if(null!==t&&(t=window.getComputedStyle(t),e-=parseInt(t.getPropertyValue("height"))),"scrollBehavior"in document.documentElement.style)return window.scrollTo({top:e,behavior:"smooth"});window.scrollTo(0,e)},p=function(t,e){var n=JSON.parse(localStorage.getItem("knife_id_unsent"))||{};n[a]={text:t,reply:e},localStorage.setItem("knife_id_unsent",JSON.stringify(n))},f=function(t){var e=(JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[a]||{};return e.reply===t&&e.text||""},c=function(t,e){return e[4<t%100&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]].replace(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"%d",t)},v=function(t,e){var n=c(e.comments,u("notifications.common"),"%3$d"),r=u("notifications.single");1<e.parents.size&&(r=u("notifications.plural"));var o,a,a=d("em",{text:(o=e.title,(a=document.createElement("textarea")).innerHTML=o,a.value)});n=(n=n.replace("%1$s",a.outerHTML)).replace("%2$s",r),d("a",{classes:["comments__notifications-report"],parent:t,attributes:{href:e.slug+"#comments",target:"_blank"},html:n})},_=function(a,i){var s={};w("/id/notifications","GET",{},function(t){if(!((t=t||[]).length<1)){var e=d("button",{classes:["comments__form-bell"],attributes:{type:"button",title:u("form.notify")},parent:a});d("span",{classes:["icon","icon--notify"],parent:e}),d("strong",{text:t.length<100?t.length:"99+",parent:e});var n,r=d("div",{classes:["comments__notifications"],parent:a}),o=[];for(n in t.forEach(function(t){var e=t.post_id;s.hasOwnProperty(e)||(s[e]={comments:0},s[e].parents=new Set),o.push(t.id),s[e].slug=t.slug,s[e].title=t.title,s[e].parents.add(t.parent),s[e].comments++}),s)v(r,s[n]);e.addEventListener("click",function(t){t.preventDefault(),function(t,e){if(t.length<1)return e();w("/id/notifications","POST",{comments:t},function(t){return e()})}(o,function(){e.classList.add("comments__form-bell--viewed")}),o=[],r.classList.toggle("comments__notifications--visible")}),i.parentNode.insertBefore(r,i.nextSibling)}})},h=function(t,e){var n=new Image;t.appendChild(n);var r=u("comments.noavatar");n.onerror=function(){n.setAttribute("src",r)},n.onload=function(){n.removeAttribute("loading")},n.setAttribute("loading",!0),n.setAttribute("src",e.avatar),n.setAttribute("loading","lazy"),n.setAttribute("alt",e.name)},y=function(e,t){var n,r,o=d("a",{class:"comments__item-time",text:(n=t.created,r=new Date(n),n={hour:"numeric",minute:"numeric",month:"numeric",day:"numeric"},r.getFullYear()<(new Date).getFullYear()&&(n.year="numeric"),r.toLocaleString("ru",n)),attributes:{href:"#comment-".concat(t.id)},parent:e});o.addEventListener("click",function(t){t.preventDefault(),history.pushState({},"",o.href),i(e.getBoundingClientRect().top)})},g=function(t,e){var n=d("div",{class:"comments__item-warning",parent:t});return"removed"===e&&(n.textContent=u("comments.removed")),"blocked"===e&&(n.textContent=u("comments.blocked")),t},b=function e(n,r){var t=parseInt(r.plus)-parseInt(r.minus);n.className="comments__item-vote",r.self&&n.classList.add("comments__item-vote--voted"),0<t&&n.classList.add("comments__item-vote--plus"),t<0&&n.classList.add("comments__item-vote--minus");var o=d("button",{classes:["icon","icon--vote"],parent:n});"plus"===r.vote&&(o.classList.remove("icon--vote"),o.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),d("span",{text:t,attributes:{title:"+".concat(r.plus," / -").concat(r.minus)},parent:n});var a=d("button",{classes:["icon","icon--vote"],parent:n});"minus"===r.vote&&(a.classList.remove("icon--vote"),a.classList.add("icon--voted"),n.classList.add("comments__item-vote--voted")),o.addEventListener("click",function(t){if(t.preventDefault(),!m)return A();for(o.classList.contains("icon--voted")&&(r.plus=parseInt(r.plus)-1,delete r.vote,w("/id/ratings?comment=".concat(r.id,"&vote=plus"),"DELETE")),o.classList.contains("icon--vote")&&(r.plus=parseInt(r.plus)+1,r.vote="plus",w("/id/ratings?comment=".concat(r.id,"&vote=plus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);e(n,r)}),a.addEventListener("click",function(t){if(t.preventDefault(),!m)return A();for(a.classList.contains("icon--voted")&&(r.minus=parseInt(r.minus)-1,delete r.vote,w("/id/ratings?comment=".concat(r.id,"&vote=minus"),"DELETE")),a.classList.contains("icon--vote")&&(r.minus=parseInt(r.minus)+1,r.vote="minus",w("/id/ratings?comment=".concat(r.id,"&vote=minus"),"POST"));n.lastChild;)n.removeChild(n.lastChild);e(n,r)})},L=function(t,e){if(t.setAttribute("data-id",e.id),"visible"!==e.status)return g(t,e.status);e.name=e.name||u("comments.anonymous"),e.content=(r=(r=(r=(r=e.content).replace(/(\r\n)/g,"\n")).replace(/(\n){2,}/g,"</p><p>")).replace(/(\n)/g,"<br>"),"<p>".concat(r,"</p>")),t.setAttribute("data-name",e.name);var n=d("div",{class:"comments__item-avatar",parent:t});h(n,e);var r=d("div",{class:"comments__item-header",parent:t});y(t,e),d("span",{class:"comments__item-name",text:e.name,parent:r}),d("div",{class:"comments__item-content",html:e.content,parent:t});var o,a,i,n=d("div",{class:"comments__item-footer",parent:t});o=n,a=e,i=t,d("button",{class:"comments__item-button",text:u("comments.reply"),parent:o}).addEventListener("click",function(t){if(t.preventDefault(),!m)return A();l.querySelectorAll(".comments__item-form").forEach(function(t){t.parentNode.removeChild(t)});var e=C();e.classList.add("comments__item-form"),e.setAttribute("data-reply",a.id),i.insertBefore(e,o.nextSibling),d("button",{class:"comments__item-cancel",text:u("form.cancel"),parent:e.querySelector(".comments__form-footer")}).addEventListener("click",function(t){return t.preventDefault(),e.parentNode.removeChild(e)});var n=e.querySelector(".comments__form-text");n.setAttribute("placeholder",u("form.reply")),n.value=f(a.id),n.focus(),n.addEventListener("input",function(){p(n.value,a.id)})});var s,c,r=d("div",{class:"comments__item-vote",parent:n});return b(r,e),u("action")?function(t,e,n){var r=d("button",{class:"comments__item-button",text:u("comments.remove"),parent:t});r.addEventListener("click",function(t){t.preventDefault();t={remove:e.id};k(t,r,function(){for(var t=n.querySelector(".comments__item-children");n.lastChild;)n.removeChild(n.lastChild);g(n,"removed"),null!==t&&n.appendChild(t)})});var o=d("button",{class:"comments__item-button",text:u("comments.block"),parent:t});return o.addEventListener("click",function(t){t.preventDefault();t={block:e.id};k(t,o,function(){for(var t=n.querySelector(".comments__item-children");n.lastChild;)n.removeChild(n.lastChild);g(n,"blocked"),null!==t&&n.appendChild(t)})}),n}(n,e,t):(e.self&&(n=n,s=e,c=t,d("button",{class:"comments__item-button",text:u("comments.remove"),parent:n}).addEventListener("click",function(t){t.preventDefault();t="/id/comments/".concat(s.id);w(t,"DELETE",{},function(){for(var t=c.querySelector(".comments__item-children");c.lastChild;)c.removeChild(c.lastChild);g(c,"removed"),null!==t&&c.appendChild(t)})})),t)},x=function(t){var e=d("div",{class:"comments__item"}),e=L(e,t);if(null===t.parent)return l.appendChild(e);var n=l.querySelector('[data-id="'.concat(t.parent,'"]'));if(null===n)return l.appendChild(e);var r=n.querySelector(".comments__item-children");null===r&&(r=d("div",{class:"comments__item-children",parent:n})),"visible"===t.status&&(e=function(e,t,n){if(!e.hasAttribute("data-name"))return n;var r=d("a",{class:"comments__item-replied",html:'<span class="icon icon--reply"></span>',attributes:{href:"#comment-".concat(t.parent)},parent:n.querySelector(".comments__item-header")});return d("span",{text:e.getAttribute("data-name"),parent:r}),r.addEventListener("click",function(t){t.preventDefault(),history.pushState({},"",r.href),i(e.getBoundingClientRect().top)}),n}(n,t,e));n=n.getAttribute("data-level")||0,n=parseInt(n)+1;return e.setAttribute("data-level",n),2<n&&r.classList.add("comments__item-children--deepest"),r.appendChild(e)},S=function(n){var t="/id/comments?post=".concat(a),r=n.getAttribute("data-reply");r&&(t+="&parent=".concat(r));var e={content:n.querySelector("textarea").value},o=n.querySelector(".comments__form-submit");o.setAttribute("disabled","disabled"),q(!1),w(t,"POST",e,function(t){var e,t=t.comments||[];0<t.length&&(n.reset(),r&&n.parentNode.removeChild(n),e=x(t[0]),i(e.getBoundingClientRect().top)),o.removeAttribute("disabled"),delete(e=JSON.parse(localStorage.getItem("knife_id_unsent"))||{})[a],localStorage.setItem("knife_id_unsent",JSON.stringify(e))})},C=function(){var e=d("form",{class:"comments__form"}),t=d("textarea",{class:"comments__form-text",attributes:{placeholder:u("form.placeholder")},parent:e}),n=u("form.authorize");m&&(n=u("form.submit"),t.setAttribute("required","required"));var r=d("div",{class:"comments__form-footer",parent:e}),o=d("button",{classes:["comments__form-submit","button"],attributes:{type:"submit"},text:n,parent:r});e.addEventListener("submit",function(t){return t.preventDefault(),m?void S(e):A()});function a(){window.setTimeout(function(){t.style.height="auto",t.style.height="".concat(t.scrollHeight+2,"px")},0)}return t.addEventListener("keydown",function(t){13==t.keyCode&&(t.metaKey||t.ctrlKey)&&o.click(),a()}),t.addEventListener("paste",a),e},E=function(t){if(t=t||u("error"),!l.classList.contains("comments--expand"))return console.error(t);var e=l.querySelector(".comments__form");if(null===e)return console.error(t);var n=l.querySelector(".comments__error");(n=null===n?d("p",{class:"comments__error"}):n).textContent=t,e.parentNode.insertBefore(n,e.nextSibling),i(e.getBoundingClientRect().top)},k=function(t,n,r){var e,o=new FormData;for(e in o.append("action",u("action")),o.append("nonce",u("nonce")),t)o.append(e,t[e]);n.setAttribute("disabled","disabled");var a=new XMLHttpRequest;a.open("POST",u("ajaxurl")),a.send(o),a.onload=function(){var t=l.querySelector(".comments__error");null!==t&&l.removeChild(t),n.removeAttribute("disabled");try{var e=JSON.parse(a.responseText);if(!e.success)return E(e.data);if("function"==typeof r)return r(e.data||{})}catch(t){return console.error(t),E()}}},w=function(t,e,n,r){var o=new XMLHttpRequest;o.open(e,t,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){var t=l.querySelector(".comments__error");null!==t&&l.removeChild(t);try{var e=JSON.parse(o.responseText);if(200!==o.status)return E(e.message||u("error"));if("function"==typeof r)return r(e.result||{})}catch(t){return console.error(t),E()}},void 0===n&&(n={}),o.send(JSON.stringify(n))},A=function(){var t=document.body,e=d("div",{class:"login"}),n=d("div",{class:"login__popup",parent:e});d("h3",{class:"login__popup-heading",text:u("login.heading"),parent:n}),d("p",{class:"login__popup-helper",text:u("login.helper"),parent:n}),s.forEach(function(t){var e=d("a",{classes:["login__popup-button","login__popup-button--".concat(t)],text:u("login.".concat(t)),attributes:{href:"/id/profiles/".concat(t),target:"_blank",rel:"opener"},parent:n});d("span",{classes:["icon","icon--".concat(t)],parent:e})}),d("p",{class:"login__popup-policy",html:u("login.policy"),parent:n});var r=d("button",{class:"login__popup-close",parent:n}),o=window.scrollY;t.classList.add("is-login"),t.style.top=-o+"px";function a(){document.removeEventListener("keydown",i),e.parentNode===t&&t.removeChild(e),t.classList.remove("is-login"),t.style.top="",window.scrollTo(0,o)}r.addEventListener("click",a);var i=function(t){if(27===t.keyCode)return a()};document.addEventListener("keydown",i);r=function t(e){if("reload"===e.data)return a(),window.removeEventListener("message",t),T()};window.addEventListener("message",r),t.appendChild(e)},q=function(){for(var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];l.lastChild;)l.removeChild(l.lastChild);!function(t){if(!u("question.message"))return;var e=d("div",{class:"comments__question",parent:t});u("question.avatar")&&d("div",{class:"comments__question-avatar",text:u("question.avatar"),parent:e});t=d("div",{class:"comments__question-caption",parent:e});u("question.author")&&d("p",{text:u("question.author"),class:"comments__question-author",parent:t}),d("p",{text:u("question.message"),class:"comments__question-message",parent:t})}(l);var e=document.location.hash.match(/^#comment-(\d+)/)||[];1<e.length&&(t=!1);var n=C();l.appendChild(n);var r=n.querySelector(".comments__form-text");r.textContent=f(0),r.addEventListener("input",function(){p(r.value,0)}),function(t,e,n){if(void 0===e)return;var r=d("div",{class:"comments__form-badge",parent:t.querySelector(".comments__form-footer")});h(r,e),d("span",{text:e.name,parent:r}),_(r,t),d("button",{classes:["comments__form-exit","icon","icon--exit"],attributes:{type:"button",title:u("form.exit")},parent:t}).addEventListener("click",function(t){t.preventDefault(),n.classList.remove("comments--expand"),w("/id/logout","POST",{},function(){setTimeout(T,300)})})}(n,o.identity,l);n=o.comments||[];!0===t&&8<n.length&&(function(t){l.classList.add("comments--folded");var e=d("div",{class:"comments__expand",parent:l});d("button",{class:"comments__expand-button",text:c(t,u("comments.expand")),attrubutes:{type:"button"},parent:e}).addEventListener("click",function(t){t.preventDefault(),q(!1),i(l.getBoundingClientRect().top)})}(n.length),n=n.slice(0,8)),n.forEach(function(t){void 0!==t.id&&x(t)}),l.classList.add("comments--expand"),!1===t&&l.classList.remove("comments--folded"),(e=e).length<1||null!==(e=l.querySelector('[data-id="'.concat(e[1],'"]')))&&i(e.getBoundingClientRect().top)},T=function(){w("/id/comments?post=".concat(a),"GET",{},function(t){return m=!1,t.identity&&(m=!0),o=t,q()})};T()}}}();
"use strict";!function(){function r(e,t){return knife_mistype_reporter.hasOwnProperty(e)?knife_mistype_reporter[e]:t||""}function p(d,o){var a=document.querySelector(".mistype");null!==a&&a.parentNode.removeChild(a),(a=document.createElement("div")).classList.add("mistype"),document.body.appendChild(a);var e=document.createElement("div");e.classList.add("mistype__popup"),a.appendChild(e);var t=document.createElement("h3");t.classList.add("mistype__popup-heading"),t.textContent=r("heading"),e.appendChild(t);t=document.createElement("p");t.classList.add("mistype__popup-marked"),t.textContent=d,e.appendChild(t);var i=document.createElement("textarea");i.classList.add("mistype__popup-comment"),i.setAttribute("placeholder",r("textarea")),i.setAttribute("maxlength",300),e.appendChild(i);t=document.createElement("button");t.classList.add("mistype__popup-submit","button"),t.textContent=r("button","Send"),e.appendChild(t),t.addEventListener("click",function(e){var t,n;e.preventDefault(),t=d,n=i.value,e=o,e={nonce:r("nonce"),time:r("time"),comment:n,context:e,marked:t,location:document.location.href},(t=new XMLHttpRequest).open("POST",r("ajaxurl")+"/mistype"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e)),a.parentNode.removeChild(a)});t=document.createElement("button");t.classList.add("mistype__popup-close"),t.addEventListener("click",function(){a.parentNode.removeChild(a)}),e.appendChild(t);t=function e(t){27===t.keyCode&&a.parentNode.removeChild(a),document.removeEventListener("keydown",e)};document.addEventListener("keydown",t)}"undefined"!=typeof knife_mistype_reporter&&document.addEventListener("keydown",function(e){if("Enter"===e.key&&e.ctrlKey){var t=window.getSelection().toString(),n=window.getSelection().getRangeAt(0).startContainer;n.nodeType!==Node.ELEMENT_NODE&&(n=n.parentElement);for(var d=0,o=[".entry-content > *",".entry-header__title",".entry-header__lead"];d<o.length;d++)for(var a=o[d],i=n;i.parentElement;)if((i=i.parentElement).matches(a)){n=i;break}e=n.textContent;500<e.length&&(e=e.substring(0,500)+"…"),0<t.length&&p(t.substring(0,300),e)}})}();
"use strict";!function(){var d,e=document.querySelector(".post");null!==e&&(d=document.body,e.addEventListener("click",function(e){var t,n,c,r=e.target||e.srcElement;r.hasAttribute("data-body")&&(t=function(e){e=e.target||e.srcElement;e!==n&&!e.classList.contains("reference__content-close")||(n.parentNode.removeChild(n),r.removeAttribute("data-active"),d.classList.remove("is-reference"))},null!==(n=document.getElementById("reference"))&&n.parentNode.removeChild(n),n=function(e){var t=document.createElement("div");t.classList.add("reference"),t.setAttribute("id","reference");var n=document.createElement("div");return n.classList.add("reference__content"),n.innerHTML=e,t.appendChild(n),(e=document.createElement("button")).classList.add("reference__content-close"),n.appendChild(e),d.appendChild(t),t}(r.getAttribute("data-body")),c=n,e=r,e=r.getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop,c.style.top=e+"px",r.setAttribute("data-active",!0),d.classList.add("is-reference"),n.addEventListener("click",t),n.addEventListener("touchend",t))}))}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var c,a,_,d,l,u=document.getElementById("quiz");function f(e){if("scrollBehavior"in document.documentElement.style)return window.scrollTo({top:e,behavior:"smooth"});window.scrollTo(0,e)}function s(s,a,u){knife_quiz_options.hasOwnProperty("format")||(knife_quiz_options.format="binary"),a.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-answer")&&!a.classList.contains("entry-quiz__vote--complete")){var n,i=s[t.dataset.answer];switch(a.classList.add("entry-quiz__vote--complete"),knife_quiz_options.format){case"dynamic":i.hasOwnProperty("dynamic")&&(l+=i.dynamic.toString()),t.classList.add(u+"--selected");break;case"category":i.hasOwnProperty("category")&&(n=0,d.hasOwnProperty(i.category)&&(n=d[i.category]),d[i.category]=n+1,_=Object.keys(d).reduce(function(e,t){return d[e]>d[t]?e:t})),t.classList.add(u+"--selected");break;case"points":i.hasOwnProperty("points")&&i.points&&(_+=parseInt(i.points)),t.classList.add(u+"--selected");break;case"binary":if(i.hasOwnProperty("binary")&&i.binary){_+=1,t.classList.add(u+"--correct");break}for(var o=0;o<s.length;o++){var r=t.parentNode.children[o];s[o].hasOwnProperty("binary")&&s[o].binary&&r.classList.add(u+"--missed")}t.classList.add(u+"--wrong")}if(knife_quiz_options.hasOwnProperty("message")&&knife_quiz_options.message){e=document.createElement("div");if(e.classList.add("entry-quiz__vote-message"),i.message)return e.innerHTML=i.message,a.appendChild(e)}return c.click()}})}function p(e,t){var n=document.createElement("div");return n.classList.add("entry-quiz__vote"),u.insertBefore(n,t),knife_quiz_options.hasOwnProperty("shuffle")&&knife_quiz_options.shuffle&&e.sort(function(){return.5-Math.random()}),(knife_quiz_options.hasOwnProperty("attachment")&&knife_quiz_options.attachment?function(e,t){var n=document.createElement("div");n.classList.add("entry-quiz__vote-grid"),t.appendChild(n);for(var i=0;i<e.length;i++){var o,r=document.createElement("figure");void 0!==e[i].attachment&&e[i].attachment[0]&&((o=document.createElement("img")).setAttribute("src",e[i].attachment[0]),2<e[i].attachment.length&&(o.setAttribute("width",e[i].attachment[1]),o.setAttribute("height",e[i].attachment[2])),r.appendChild(o),r.classList.add("entry-quiz__vote-attachment"),r.setAttribute("data-answer",i),n.appendChild(r))}s(e,t,"entry-quiz__vote-attachment"),t.classList.add("entry-quiz__vote--attachment")}:function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("div");void 0!==e[n].choice&&(i.classList.add("entry-quiz__vote-choice"),i.setAttribute("data-answer",n),i.innerHTML=e[n].choice,t.appendChild(i))}s(e,t,"entry-quiz__vote-choice"),t.classList.add("entry-quiz__vote--choice")})(e,n),0}function y(e){e.hasOwnProperty("poster")&&(t=document.createElement("img"),0<l.length&&(e.poster=e.poster.replace("*",l)),t.classList.add("entry-quiz__poster"),t.setAttribute("src",e.poster),u.insertBefore(t,u.firstChild));var t=u.querySelector(".entry-quiz__share");document.body.contains(t)&&function(e,t){if(void 0!==knife_quiz_options.share_links&&!(void 0===knife_quiz_options.permalink||knife_quiz_options.hasOwnProperty("noshare")&&knife_quiz_options.noshare)){for(var n,e=knife_quiz_options.permalink.replace(/\/?$/,"/")+e.index+"/",i=[e=0<t.length?e+t+"/":e,u.querySelector(".entry-quiz__title").textContent||""],o=u.querySelectorAll(".share > .share__link"),r=0;n=o[r];r++){var s=n.getAttribute("data-label");void 0!==knife_quiz_options.share_links[s]&&(s=knife_quiz_options.share_links[s],n.href=s.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(i[t-1])}))}"function"==typeof window.shareButtons&&window.shareButtons()}}(e,l);t=u.querySelector(".entry-quiz__vote");document.body.contains(t)&&t.parentNode.removeChild(t),f(u.getBoundingClientRect().top+window.pageYOffset-76);t=u.querySelector(".entry-quiz__content");return e.hasOwnProperty("details")?t.innerHTML=e.details:t.parentNode.removeChild(t)}null!==u&&"undefined"!=typeof knife_quiz_options&&(c=null,_=a=0,d={},l="",knife_quiz_options.hasOwnProperty("center")&&knife_quiz_options.center&&u.classList.add("entry-quiz--center"),knife_quiz_options.hasOwnProperty("button_start")&&((c=document.createElement("button")).classList.add("entry-quiz__button","button"),c.setAttribute("type","button"),c.textContent=knife_quiz_options.button_start),u.appendChild(c),"object"!==("undefined"==typeof knife_quiz_items?"undefined":_typeof(knife_quiz_items))&&(knife_quiz_items=[]),knife_quiz_options.hasOwnProperty("random")&&knife_quiz_options.random&&knife_quiz_items.sort(function(){return.5-Math.random()}),"object"!==("undefined"==typeof knife_quiz_results?"undefined":_typeof(knife_quiz_results))&&(knife_quiz_results={}),c.addEventListener("click",function(){var e=knife_quiz_items.length;if(u.classList.remove("entry-quiz--visible"),0<e&&a<e){var t=knife_quiz_items[a];return a+=1,!1===u.classList.contains("entry-quiz--item")&&(u.classList.add("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_next")&&(c.textContent=knife_quiz_options.button_next)),setTimeout(function(){u.classList.add("entry-quiz--visible")},100),a===e&&knife_quiz_options.hasOwnProperty("button_last")&&(c.textContent=knife_quiz_options.button_last),function(e,t,n){u.getBoundingClientRect().top,window.pageYOffset;var i=u.querySelector(".entry-quiz__content");e.hasOwnProperty("question")&&(i.innerHTML=e.question),u.querySelector(".entry-quiz__info").textContent=t+" / "+n,n=u.querySelector(".entry-quiz__vote"),document.body.contains(n)&&n.parentNode.removeChild(n),"object"===_typeof(e.answers)&&0<e.answers.length&&p(e.answers,i.nextSibling),f(u.getBoundingClientRect().top+window.pageYOffset-76)}(t,a,e)}if(!1===u.classList.contains("entry-quiz--results")){for(var n=[],i=null,o=0;o<knife_quiz_results.length;o++)knife_quiz_results[o].index=o+1,1===knife_quiz_results[o].default&&(i=knife_quiz_results[o]);for(o=0;o<knife_quiz_results.length;o++){var r,s=knife_quiz_results[o];s.default||s.hasOwnProperty("advance")&&s.advance!==_||(r=s.minimum||0,i&&d[_]<r&&(s=i),n.push(s))}if(0<n.length){e=n[Math.floor(Math.random()*n.length)];return u.classList.remove("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_repeat")&&(c.textContent=knife_quiz_options.button_repeat),knife_quiz_options.hasOwnProperty("norepeat")&&knife_quiz_options.norepeat&&c.parentNode.removeChild(c),u.classList.add("entry-quiz--results"),setTimeout(function(){u.classList.add("entry-quiz--visible")},100),y(e)}}return document.location.reload()}))}();
"use strict";!function(){function a(e,t){var n=e.querySelector(".share__count");null===n&&((t=parseInt(t)||0)<=0||((n=document.createElement("span")).className="share__count",n.innerHTML=t,e.appendChild(n)))}function t(){if(void 0!==knife_meta_parameters&&knife_meta_parameters.postid){var t=new XMLHttpRequest;return t.open("GET","/analytics/shares/?post="+knife_meta_parameters.postid),t.responseType="json",t.send(),t.addEventListener("load",function(){var e=t.response||{};e.success&&function(n){n=n||{};var e=document.querySelectorAll(".share .share__link");if(null===e)return;e.forEach(function(e){var t=e.dataset.label;n.vk&&"vkontakte"===t&&a(e,n.vk),n.fb&&"facebook"===t&&a(e,n.fb)})}(e.data)}),1}}window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;e.forEach(function(e){e.dataset.label;e.addEventListener("click",function(e){var t,n,a;e.preventDefault(),t=this.href,n={width:600,height:400,id:this.dataset.label},a=Math.round(screen.width/2-n.width/2),e=0,screen.height>n.height&&(e=Math.round(screen.height/3-n.height/2)),window.open(t,n.id,"left="+a+",top="+e+",width="+n.width+",height="+n.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")})}),t()},window.shareButtons()}();
"use strict";!function(){var i,a,r,l;"undefined"!=typeof knife_similar_posts&&(i=function(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*t),r=e[t];e[t]=e[n],e[n]=r}return e}(knife_similar_posts.similar||[]),a=0,r=function(e){return e=(e=e.replace("http://ads.adfox.ru","https://ads.adfox.ru")).replace("[RANDOM]",Date.now())},l=function(e,t){var n=document.createElement("p");e.appendChild(n);e=document.createElement("a");e.href=r(t.link),e.innerHTML=t.title,n.appendChild(e),t.pixel&&((new Image).src=r(t.pixel))},function(){var e=document.querySelector(".entry-footer");if(!(null===e||i.length<a+4)){var t=document.createElement("div");t.classList.add("entry-footer__similar");for(var n=a;n<a+4;n++)i[n].link&&i[n].title&&l(t,i[n]);a+=4,e.appendChild(t)}}(),function(){var e=document.querySelectorAll(".entry-content");if(1===e.length&&1!=knife_similar_posts.hidden){var t=e[0].children;if(!(t.length<20))for(var n=20,r=0;n<t.length-5;n++)if("p"===t[n].tagName.toLowerCase()&&void 0!==t[n-1]&&"p"===t[n-1].tagName.toLowerCase()){if(!function(e){if(i.length<a+2)return!1;if(null===e)return!1;var t=document.createElement("figure");t.classList.add("figure","figure--similar");var n=document.createElement("h4");n.innerHTML=knife_similar_posts.title||"",t.appendChild(n);for(var r=a;r<a+2;r++)i[r].link&&i[r].title&&l(t,i[r]);return a+=2,e.parentNode.insertBefore(t,e.nextSibling),!0}(t[n-1])||(r+=1),3<r)break;n=20+n}}}())}();
"use strict";"serviceWorker"in navigator&&(1<document.location.host.match(/\./g).length||window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")}));