!function(){var a=document.querySelectorAll(".widget-adfox");if(a.length<1)return;function d(a,n){var o=a.match(/\/(\d+?)\/.+?\?(.+)$/)||[];if(2<o.length){n.ownerId=o[1],n.params={};for(var t=o[2].split("&"),d=0;d<t.length;d++){var e=t[d].split("=");1!=e.length&&"pr"!==e[0]&&(n.params[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}}return n}function e(a,n){return a.onStub=function(){n.classList.remove("widget-adfox--loaded"),"function"==typeof window.dynamicWidgets&&window.dynamicWidgets()},a.onError=function(){n.classList.remove("widget-adfox--loaded"),"function"==typeof window.dynamicWidgets&&window.dynamicWidgets()},a.onLoad=function(){n.classList.add("widget-adfox--loaded"),"function"==typeof window.dynamicWidgets&&window.dynamicWidgets()},a}function n(a,n,o){if(a.common)return function(a,n,o){var t={};t.containerId="adfox_"+n,t=d(a,t=e(t,o)),window.adfoxAsyncParams=window.adfoxAsyncParams||[],window.adfoxAsyncParams.push(t)}(a.common,n,o);a.mobile&&function(a,n,o){var t={};t.containerId="adfox_"+n,t=d(a,t=e(t,o)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([t,["tablet","phone"],{tabletWidth:1023,isAutoReloads:!0}])}(a.mobile,n,o),a.desktop&&function(a,n,o){var t={};t.containerId="adfox_"+n,t=d(a,t=e(t,o)),window.adfoxAsyncParamsAdaptive=window.adfoxAsyncParamsAdaptive||[],window.adfoxAsyncParamsAdaptive.push([t,["desktop"],{tabletWidth:1023,isAutoReloads:!0}])}(a.desktop,n,o)}for(var o=0;o<a.length;o++){var t=a[o].querySelector("div");if(null!==t&&0!==t.dataset.length){var i=Date.now().toString(10)+Math.random().toString(10).substr(2,5),s=document.createElement("div");s.id="adfox_"+i,a[o].replaceChild(s,t),n(t.dataset,i,a[o])}}var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.crossorigin="anonymous",r.src="https://yastatic.net/pcode/adfox/loader.js",document.head.appendChild(r)}();
!function(){if("undefined"==typeof knife_backdrop)return;if(void 0===knife_backdrop.image)return void 0!==knife_backdrop.color&&(document.body.style.backgroundColor="#"+knife_backdrop.color);var e=document.createElement("div");e.classList.add("backdrop"),e.style.backgroundImage="url("+knife_backdrop.image+")",void 0!==knife_backdrop.size&&(e.style.backgroundSize=knife_backdrop.size);var o=new Image;o.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)}),o.src=knife_backdrop.image}();
!function(){var e=document.getElementById("hypercomments_widget");if(null===e||"undefined"==typeof knife_comments_id)return;_hcwp=window._hcwp||[],_hcwp.push({widget:"Stream",widget_id:knife_comments_id,callback:function(){e.classList.add("comments--expand")}});var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://w.hypercomments.com/widget/hc/"+knife_comments_id+"/ru/widget.js",document.head.appendChild(t)}();
!function(){var e=document.querySelector(".sidebar");if(null===e)return;var i=e.querySelectorAll(".sidebar__widgets > div");if(i.length<1)return;window.dynamicWidgets=function(){console.log("sidebar dynamic")};var t=document.createElement("div");t.classList.add("sidebar__dynamic");for(var r=0;r<i.length;r++)for(var n=["widget-adfox","widget-script"],d=0;d<n.length;d++)if(i[r].classList.contains(n[d])){t.appendChild(i[r]);break}t.firstElementChild&&e.insertBefore(t,e.lastElementChild)}();
!function(){var e=document.querySelector(".post");if(null===e)return;function a(e){var t=document.createElement("iframe"),r=function(e){var t=document.createElement("div");t.classList.add("embed__loader"),e.appendChild(t);var r=document.createElement("span");return r.classList.add("embed__loader-bounce"),t.appendChild(r),t}(e);return t.setAttribute("allow","autoplay"),t.setAttribute("frameborder","0"),t.setAttribute("src",e.dataset.embed),t.addEventListener("load",function(){r.parentNode.removeChild(r)}),t}e.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.parentNode.classList.contains("embed")){var r=t.parentNode;if(r.hasAttribute("data-embed")){for(e.preventDefault();r.firstChild;)r.removeChild(r.firstChild);r.appendChild(a(r))}}})}();
!function(){var e=document.querySelector(".entry-content");if(null===e)return;var r=document.querySelector(".entry-widgets");if(null===r||null===r.firstElementChild)return;var n=Math.floor(e.children.length/3);if(8<e.children.length)for(var t=["p","blockquote"],l=n;l<e.children.length;l++){var i=e.children[l];if(!(t.indexOf(i.tagName.toLowerCase())<0)&&void 0!==e.children[l-1]){var d=e.children[l-1];if(!(t.indexOf(d.tagName.toLowerCase())<0)){e.insertBefore(r.firstElementChild,i);break}}}0<r.children.length?r.classList.add("entry-widgets--expand"):r.parentNode.removeChild(r)}();
!function(){if("undefined"==typeof knife_form_request)return;var o,a,r;function i(e,t,n){if(void 0===t.element)return null;var r=document.createElement(t.element);r.classList.add("form__field-"+t.element),r.setAttribute("name",e);var o=document.createElement("div");for(var a in o.classList.add("form__field"),o.appendChild(r),delete t.element,t)r.setAttribute(a,t[a]);return r.value=function(e){return(JSON.parse(localStorage.getItem("knife_form_request"))||{})[e]||""}(e),r.addEventListener("input",function(e){!function(e,t){var n=JSON.parse(localStorage.getItem("knife_form_request"))||{};n[e]=t,localStorage.setItem("knife_form_request",JSON.stringify(n))}(this.name,this.value)}),r.addEventListener("focus",function(e){n.classList.remove("form--fold")}),n.appendChild(o)}function s(e){return a.classList.remove("icon--loop"),void 0===e||!0===e?r.removeAttribute("disabled",""):(a.classList.remove("icon--alert","icon--done"),a.classList.add("icon--loop"),o.innerHTML="",r.setAttribute("disabled",""))}function d(e){e=e||c("warning","Request error");a.classList.add("icon--alert"),o.innerHTML=e}function c(e,t){return knife_form_request.hasOwnProperty(e)?knife_form_request[e]:t||""}var l=document.createElement("form");document.querySelector(".entry-content").appendChild(l);var e=c("classes");0<e.length&&(l.className=e.join(" "));var t=c("heading");if(0<t.length){var n=document.createElement("h3");n.classList.add("form__heading"),n.textContent=t,l.appendChild(n)}l.classList.add("form"),l.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(l),n="action="+c("action")+"&nonce="+c("nonce");t.forEach(function(e,t){n+="&"+t+"="+e});var r=new XMLHttpRequest;return r.open("POST",c("ajaxurl")),r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),r.onload=function(){if(s(!0),200!==r.status)return d();var e=JSON.parse(r.responseText);return e.success?function(e){return e=e||"",a.classList.add("icon--done"),o.innerHTML=e,localStorage.removeItem("knife_form_request"),l.reset()}(e.data):d(e.data)},r.send(n),s(!1)}),function(e){var t=knife_form_request.fields;for(var n in t)t.hasOwnProperty(n)&&i(n,t[n],e);(function(e){var t=document.createElement("div");t.classList.add("form__control"),(a=document.createElement("span")).classList.add("form__control-loader","icon"),t.appendChild(a),(o=document.createElement("span")).classList.add("form__control-notice"),t.appendChild(o),(r=document.createElement("button")).classList.add("form__control-button","button"),r.innerHTML=c("button","Send"),t.appendChild(r),e.appendChild(t)})(e)}(l)}();
!function(){var _=document.getElementById("generator");if(null===_||"undefined"==typeof knife_generator_options)return;if(void 0!==knife_generator_options.page_background&&(_.style.backgroundColor=knife_generator_options.page_background),void 0!==knife_generator_options.page_color&&(_.style.color=knife_generator_options.page_color),"undefined"==typeof knife_generator_items||knife_generator_items.length<1)return;var a=null;!function(){var e=document.createElement("div");e.classList.add("entry-generator__loader"),_.insertBefore(e,_.firstChild);var t=document.createElement("span");t.classList.add("entry-generator__loader-bounce"),e.appendChild(t)}(),function(){if(void 0===knife_generator_options.button_text)return;var e=document.createElement("div");e.classList.add("entry-generator__button"),_.appendChild(e),(a=document.createElement("button")).classList.add("button"),a.setAttribute("type","button"),a.textContent=knife_generator_options.button_text,e.appendChild(a),void 0!==knife_generator_options.button_background&&(a.style.backgroundColor=knife_generator_options.button_background),void 0!==knife_generator_options.button_color&&(a.style.color=knife_generator_options.button_color)}(),a.addEventListener("click",function(e){e.preventDefault();var t,n=Math.floor(Math.random()*knife_generator_items.length),r=knife_generator_items[n];void 0!==knife_generator_options.button_repeat&&(a.textContent=knife_generator_options.button_repeat),_.querySelector(".entry-generator__share")&&function(e){if(void 0===knife_generator_options.share_links)return;if(void 0===knife_generator_options.permalink)return;if(knife_generator_options.hasOwnProperty("noshare")&&knife_generator_options.noshare)return;for(var t,n=_.querySelector(".entry-generator__title").textContent,r=[knife_generator_options.permalink.replace(/\/?$/,"/")+e+"/",n],o=_.querySelectorAll(".share > .share__link"),i=0;t=o[i];i++){var a=t.getAttribute("data-label");if(void 0!==knife_generator_options.share_links[a]){var s=knife_generator_options.share_links[a];t.href=s.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(r[t-1])})}}"function"==typeof window.shareButtons&&window.shareButtons()}(n+1),null===(t=_.querySelector(".entry-generator__content"))&&((t=document.createElement("div")).classList.add("entry-generator__content"),_.insertBefore(t,_.lastChild));if(t.innerHTML=r.description||"",_.classList.add("entry-generator--loader"),"undefined"===knife_generator_options.blank||!knife_generator_options.blank){var o=_.querySelector(".entry-generator__poster");if(null!==o&&o.parentNode.removeChild(o),void 0!==r.poster)return(o=new Image).classList.add("entry-generator__poster"),_.insertBefore(o,_.firstChild),o.addEventListener("load",function(){setTimeout(function(){_.classList.remove("entry-generator--loader")},600)}),o.setAttribute("alt",r.heading||""),o.setAttribute("src",r.poster),_.classList.add("entry-generator--poster")}var i=_.querySelector(".entry-generator__title");return null===i&&((i=document.createElement("div")).classList.add("entry-generator__title"),_.insertBefore(i,_.firstChild)),i.innerHTML=r.heading||"",setTimeout(function(){_.classList.remove("entry-generator--loader")},600),_.classList.add("entry-generator--blank")})}();
!function(){var r=document.getElementById("toggle-search"),a=document.querySelector(".search"),c=document.querySelector(".header");if(null===r)return;if(null===a||"undefined"==typeof knife_search_id)return r.classList.add("toggle--hidden");var l="search-gcse",n="gsc-results";function o(){google.search.cse.element.render({gname:l,div:l,tag:"searchresults-only",attributes:{enableHistory:!1,gaQueryParameter:"s",queryParameterName:"s"}}),document.getElementById("search-input").oninput=function(){google.search.cse.element.getElement(l).execute(this.value)};var e=window.MutationObserver||window.WebKitMutationObserver;new e(function(e){for(var t=0;t<e.length;++t)if(e[t].target.classList.contains(n))return s()}).observe(document.getElementById(l),{subtree:!0,attributes:!1,childList:!0,characterData:!1})}function s(){for(var a=document.getElementById("search-results"),e=document.getElementById(l).querySelectorAll(".gs-result");a.firstChild;)a.removeChild(a.firstChild);if(0<document.getElementById("search-input").value.length){function t(e){var t={link:e.querySelector("a.gs-title").href,head:e.querySelector("a.gs-title").textContent,text:e.querySelector(".gs-snippet").textContent},n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(t.head));var s=document.createElement("p");s.className="search__results-text",s.appendChild(document.createTextNode(t.text));var r=document.createElement("a");return r.className="search__results-link",r.href=t.link,r.appendChild(n),r.appendChild(s),a.appendChild(r)}if(1==e.length&&e[0].classList.contains("gs-no-results-result")){var n=document.createElement("p");n.className="search__results-head",n.appendChild(document.createTextNode(e[0].textContent)),a.appendChild(n)}for(var s=0;s<e.length;s++){if(!e[s].querySelector("a.gs-title")||!e[s].querySelector(".gs-snippet"))return!1;t(e[s])}}}r.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("search-input");t.blur();var n=document.body;document.body.classList.contains("is-navbar")&&document.getElementById("toggle-menu").click(),r.classList.toggle("toggle--expand"),a.classList.toggle("search--expand");var s=c.parentElement.firstChild;if(document.body.classList.contains("is-search")){for(n.classList.remove("is-search"),n.style.top="";s&&s!==c;)1==s.nodeType&&(s.style.display=""),s=s.nextSibling;return window.scrollTo(0,scrollTop)}for(;s&&s!==c;)1==s.nodeType&&(s.style.display="none"),s=s.nextSibling;scrollTop=window.scrollY,n.classList.add("is-search"),n.style.top=-scrollTop+"px",void 0===window.__gcse&&function(e){var t=document.createElement("div");t.id=l,t.style.display="none",a.appendChild(t),window.__gcse={parsetags:"explicit",callback:o};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cse.google.com/cse.js?cx="+e;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)}(knife_search_id),setTimeout(function(){t.focus()},100)}),window.addEventListener("keydown",function(e){if(27===(e=e||window.event).keyCode&&a.classList.contains("search--expand"))return r.click()},!0)}();
!function(){var t=document.getElementById("toggle-menu"),n=document.querySelector(".header");if(null===t)return;var s=document.body,i=0;function r(e){for(var t=n.parentElement.firstChild;t&&t!==n;)1==t.nodeType&&(t.style.display=e),t=t.nextSibling}function c(e){if((e.target||e.srcElement)===s)return e.stopPropagation(),s.removeEventListener("click",c),t.click()}t.addEventListener("click",function(e){return e.preventDefault(),s.classList.contains("is-search")&&document.getElementById("toggle-search").click(),t.classList.toggle("toggle--expand"),n.querySelector(".navbar").classList.toggle("navbar--expand"),s.classList.contains("is-navbar")?(s.classList.remove("is-navbar"),s.style.top="",s.removeAttribute("onclick",""),window.scrollTo(0,i),r("")):(i=window.scrollY,s.classList.add("is-navbar"),s.style.top=-i+"px",s.setAttribute("onclick",""),s.addEventListener("click",c),r("none"))})}();
!function(){var a=document.querySelector(".post");if(null===a)return;var c=document.body;a.addEventListener("click",function(e){var n=e.target||e.srcElement;if(n.hasAttribute("data-body")){var r=document.getElementById("reference");function t(e){var t=e.target||e.srcElement;t!==r&&!t.classList.contains("reference__content-close")||(r.parentNode.removeChild(r),n.removeAttribute("data-active"),c.classList.remove("is-reference"))}null!==r&&r.parentNode.removeChild(r),function(e,t){var n=t.getBoundingClientRect();a.classList.contains("post--standard")&&e.classList.add("reference--push");var r=n.top+window.pageYOffset||document.documentElement.scrollTop;e.style.top=r+"px"}(r=function(e){var t=document.createElement("div");t.classList.add("reference"),t.setAttribute("id","reference");var n=document.createElement("div");n.classList.add("reference__content"),n.innerHTML=e,t.appendChild(n);var r=document.createElement("button");return r.classList.add("reference__content-close"),n.appendChild(r),c.appendChild(t),t}(n.getAttribute("data-body")),n),n.setAttribute("data-active",!0),c.classList.add("is-reference"),r.addEventListener("click",t),r.addEventListener("touchend",t)}})}();
!function(){var _=document.getElementById("quiz");if(null===_||"undefined"==typeof knife_quiz_options)return;var n=null,i=0,c=0,d={};function s(s,a,u){var _=null;knife_quiz_options.hasOwnProperty("message")&&knife_quiz_options.message&&(_=document.createElement("div")).classList.add("entry-quiz__vote-message"),knife_quiz_options.hasOwnProperty("format")||(knife_quiz_options.format="binary"),a.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t.hasAttribute("data-answer")&&!a.classList.contains("entry-quiz__vote--complete")){var n=s[t.dataset.answer];switch(a.classList.add("entry-quiz__vote--complete"),_&&n.hasOwnProperty("message")&&n.message&&(_.innerHTML=n.message,a.appendChild(_)),knife_quiz_options.format){case"category":if(n.hasOwnProperty("category")&&n.category){var i=0;d.hasOwnProperty(n.category)&&(i=d[n.category]),d[n.category]=i+1,c=Object.keys(d).reduce(function(e,t){return d[e]>d[t]?e:t})}return t.classList.add(u+"--selected");case"points":return n.hasOwnProperty("points")&&n.points&&(c+=parseInt(n.points)),t.classList.add(u+"--selected");case"binary":if(n.hasOwnProperty("binary")&&n.binary)return c+=1,t.classList.add(u+"--correct");for(var r=0;r<s.length;r++){var o=t.parentNode.children[r];s[r].hasOwnProperty("binary")&&s[r].binary&&o.classList.add(u+"--missed")}return t.classList.add(u+"--wrong")}}})}function a(e,t){var n=document.createElement("div");return n.classList.add("entry-quiz__vote"),_.insertBefore(n,t),knife_quiz_options.hasOwnProperty("shuffle")&&knife_quiz_options.shuffle&&e.sort(function(){return.5-Math.random()}),knife_quiz_options.hasOwnProperty("attachment")&&knife_quiz_options.attachment?function(e,t){var n=document.createElement("div");n.classList.add("entry-quiz__vote-grid"),t.appendChild(n);for(var i=0;i<e.length;i++){var r=document.createElement("figure");if(void 0!==e[i].attachment){var o=document.createElement("img");o.setAttribute("src",e[i].attachment),r.appendChild(o),r.classList.add("entry-quiz__vote-attachment"),r.setAttribute("data-answer",i),n.appendChild(r)}}s(e,t,"entry-quiz__vote-attachment"),t.classList.add("entry-quiz__vote--attachment")}(e,n):function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("div");void 0!==e[n].choice&&(i.classList.add("entry-quiz__vote-choice"),i.setAttribute("data-answer",n),i.innerHTML=e[n].choice,t.appendChild(i))}s(e,t,"entry-quiz__vote-choice"),t.classList.add("entry-quiz__vote--choice")}(e,n)}function r(e,t){var n=_.getBoundingClientRect().top+window.pageYOffset;if(window.scroll({top:n-76,behavior:"smooth"}),e.hasOwnProperty("poster")){var i=document.createElement("img");i.classList.add("entry-quiz__poster"),i.setAttribute("src",e.poster),_.insertBefore(i,_.firstChild)}var r=_.querySelector(".entry-quiz__share");document.body.contains(r)&&function(e,t){if(void 0===knife_quiz_options.share_links)return;if(void 0===knife_quiz_options.permalink)return;if(knife_quiz_options.hasOwnProperty("noshare")&&knife_quiz_options.noshare)return;for(var n,i=_.querySelector(".entry-quiz__title").textContent,r=[knife_quiz_options.permalink.replace(/\/?$/,"/")+t+"/",e.heading||i],o=_.querySelectorAll(".share > .share__link"),s=0;n=o[s];s++){var a=n.getAttribute("data-label");if(void 0!==knife_quiz_options.share_links[a]){var u=knife_quiz_options.share_links[a];n.href=u.link.replace(/%([\d])\$s/g,function(e,t){return encodeURIComponent(r[t-1])})}}"function"==typeof window.shareButtons&&window.shareButtons()}(e,t);var o=_.querySelector(".entry-quiz__vote");document.body.contains(o)&&o.parentNode.removeChild(o);var s=_.querySelector(".entry-quiz__content");return e.hasOwnProperty("details")?s.innerHTML=e.details:s.parentNode.removeChild(s)}knife_quiz_options.hasOwnProperty("center")&&knife_quiz_options.center&&_.classList.add("entry-quiz--center"),knife_quiz_options.hasOwnProperty("button_start")&&((n=document.createElement("button")).classList.add("entry-quiz__button","button"),n.setAttribute("type","button"),n.textContent=knife_quiz_options.button_start),_.appendChild(n),"object"!=typeof knife_quiz_items&&(knife_quiz_items=[]),knife_quiz_options.hasOwnProperty("random")&&knife_quiz_options.random&&knife_quiz_items.sort(function(){return.5-Math.random()}),"object"!=typeof knife_quiz_results&&(knife_quiz_results={}),n.addEventListener("click",function(){var e=knife_quiz_items.length;if(0<e&&i<e){var t=knife_quiz_items[i];return i+=1,!1===_.classList.contains("entry-quiz--item")&&(_.classList.add("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_next")&&(n.textContent=knife_quiz_options.button_next)),i===e&&knife_quiz_options.hasOwnProperty("button_last")&&(n.textContent=knife_quiz_options.button_last),function(e,t,n){var i=_.getBoundingClientRect().top+window.pageYOffset;window.scroll({top:i-76,behavior:"smooth"});var r=_.querySelector(".entry-quiz__content");e.hasOwnProperty("question")&&(r.innerHTML=e.question),_.querySelector(".entry-quiz__info").textContent=t+" / "+n;var o=_.querySelector(".entry-quiz__vote");document.body.contains(o)&&o.parentNode.removeChild(o),"object"==typeof e.answers&&0<e.answers.length&&a(e.answers,r.nextSibling)}(t,i,e)}return!1===_.classList.contains("entry-quiz--results")&&"object"==typeof knife_quiz_results[c]?(_.classList.remove("entry-quiz--item"),knife_quiz_options.hasOwnProperty("button_repeat")&&(n.textContent=knife_quiz_options.button_repeat),knife_quiz_options.hasOwnProperty("norepeat")&&knife_quiz_options.norepeat&&n.parentNode.removeChild(n),_.classList.add("entry-quiz--results"),r(knife_quiz_results[c],c)):document.location.reload()})}();
!function(){if("undefined"==typeof knife_relap_options)return;var t=knife_relap_options;!function(){if(t.token.length<1)return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://relap.io/api/v6/head.js?token="+t.token,document.head.appendChild(e)}(),function(){if(t.block.length<1)return;var e=document.createElement("div");e.classList.add("entry-footer__relap"),e.innerHTML='<script id="'+t.block+'"><\/script>',document.querySelector(".entry-footer").appendChild(e)}()}();
!function(){function o(e,t){var n=Math.round(screen.width/2-t.width/2),o=0;screen.height>t.height&&(o=Math.round(screen.height/3-t.height/2)),window.open(e,t.id,"left="+n+",top="+o+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")}function a(e){var t=document.createElement("script");return t.type="text/javascript",t.src=function(e){var t=document.querySelector('link[rel="canonical"]');return t=t&&t.href?encodeURIComponent(t.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===e?"https://vk.com/share.php?act=count&index=0&url="+t:"facebook"===e?"https://graph.facebook.com/?fields=og_object{engagement}&callback=FB.Share&id="+t:void 0}(e),t.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(t),!0}var r={facebook:!1,vkontakte:!1};window.shareButtons=function(){var e=document.querySelectorAll(".share .share__link");if(null===e)return!1;for(var t=0;t<e.length;t++){var n=e[t].dataset.label;e[t].addEventListener("click",function(e){return e.preventDefault(),o(this.href,{width:600,height:400,id:this.dataset.label})}),n in r&&!1===r[n]&&(r[n]=a(n))}},window.VK={Share:{count:function(e,t){if(document.getElementById("share-vkontakte").outerHTML="",void 0!==t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),o=0;o<n.length;o++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t,n[o].appendChild(a)}}}},window.FB={Share:function(e){if(document.getElementById("share-facebook").outerHTML="",void 0!==e.og_object&&void 0!==e.og_object.engagement){var t=e.og_object.engagement;if(void 0!==t.count&&t.count)for(var n=document.querySelectorAll(".share .share__link--facebook"),o=0;o<n.length;o++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t.count,n[o].appendChild(a)}}}},window.shareButtons()}();
!function(){var a=document.querySelector(".entry-content");if("undefined"==typeof knife_similar_posts||null===a)return;var l=function(e){for(var r,t=0;t<e.length;t++){r=Math.floor(Math.random()*t);var i=e[t];e[t]=e[r],e[r]=i}return e}(knife_similar_posts.similar||[]);function o(e){var r=document.createElement("figure");r.classList.add("figure","figure--similar");var t=document.createElement("h4");t.innerHTML=knife_similar_posts.title||"",r.appendChild(t);for(var i=0;i<l.length&&i<3;i++)if(l[i].link&&l[i].title){var n=document.createElement("p");r.appendChild(n);var a=document.createElement("a");a.href=l[i].link,a.innerHTML=l[i].title,n.appendChild(a)}e.parentNode.insertBefore(r,e.nextSibling)}!function(){if(a.children.length<10||l.length<1)return;var e=Math.floor(a.children.length/1.5);if(null!==a.querySelector(".figure--similar"))return;for(var r=["p","blockquote"],t=e;t<a.children.length-5;t++){var i=a.children[t];if(!(r.indexOf(i.tagName.toLowerCase())<0)&&void 0!==a.children[t-1]){var n=a.children[t-1];if(!(r.indexOf(n.tagName.toLowerCase())<0)){o(n);break}}}}(),function(){if(void 0===knife_similar_posts.action)return;for(var e=a.querySelectorAll(".figure--similar")||[],r=0;r<e.length;r++)for(var t=e[r].querySelectorAll("a"),i=0;i<t.length;i++)t[i].setAttribute("data-action",knife_similar_posts.action),t[i].href&&t[i].setAttribute("data-label",t[i].href)}()}();
!function(){var l=document.getElementById("glide");if(null===l||"undefined"==typeof Glide)return;if(l.querySelectorAll(".glide__slide").length<1)return;var i=new Glide(".glide",{gap:0,rewind:!1,touchAngle:60,swipeThreshold:60,dragThreshold:!1,breakpoints:{767:{dragThreshold:!0}}}),r={};i.on("mount.before",function(){if("undefined"==typeof knife_story_stories||knife_story_stories.length<1)return!1;for(var t,e=0;t=knife_story_stories[e];e++){var n=document.createElement("div");n.classList.add("glide__slide-wrap");var i=document.createElement("div");i.classList.add("glide__slide-content"),function(){if(void 0===t.kicker)return;var e=document.createElement("div");e.classList.add("glide__slide-kicker"),e.innerHTML=t.kicker,n.appendChild(e)}(),function(){if(void 0===t.image||void 0===t.ratio)return;var e=document.createElement("div");e.classList.add("glide__slide-image"),e.style.setProperty("background-image","url("+t.image+")"),e.style.setProperty("--image-ratio",t.ratio),i.appendChild(e)}(),function(){if(void 0===t.entry)return;var e=document.createElement("div");e.classList.add("glide__slide-entry"),e.innerHTML=t.entry,i.appendChild(e)}();var r=document.createElement("div");r.classList.add("glide__slide"),r.appendChild(n),n.appendChild(i),l.querySelector(".glide__slides").appendChild(r)}}),i.on("mount.before",function(){var e=l.querySelectorAll(".glide__slide");if(e.length<1)return!1;var t=e[0].querySelector(".share");if(null===t)return!1;var n=t.cloneNode(!0),i=e[e.length-1];if(void 0!==knife_story_options.action)for(var r,o=n.querySelectorAll(".share__link"),d=0;r=o[d];d++)r.setAttribute("data-action",knife_story_options.action);i.querySelector(".glide__slide-content").appendChild(n),"function"==typeof window.shareButtons&&window.shareButtons()}),i.on("mount.before",function(){var e=document.createElement("div");e.classList.add("glide__bullets");for(var t=0;t<l.querySelectorAll(".glide__slide").length;t++){var n=document.createElement("span");n.classList.add("glide__bullets-item"),e.appendChild(n)}return l.appendChild(e)}),i.on("mount.before",function(e){var t=document.querySelector('link[rel="prev"]');if(null===t||!t.hasAttribute("href"))return!1;r.href=t.href;var n=document.createElement("div");return n.classList.add("glide__slide","glide__slide--empty"),l.querySelector(".glide__slides").appendChild(n)}),i.on("mount.before",function(){["prev","next"].forEach(function(e,t){var n=document.createElement("div");n.classList.add("glide__control","glide__control--"+e),n.classList.add();var i=document.createElement("span");i.classList.add("icon","icon--"+e),n.appendChild(i),l.appendChild(n)}),l.querySelector(".glide__control--next").addEventListener("click",function(e){e.preventDefault(),i.go(">")}),l.querySelector(".glide__control--prev").addEventListener("click",function(e){e.preventDefault(),i.go("<")})}),i.on("mount.before",function(){var e=l.getBoundingClientRect();l.style.height=window.innerHeight-e.top-window.pageYOffset+"px"}),i.on(["mount.after","run"],function(){for(var e,t=l.querySelectorAll(".glide__bullets-item"),n=0;e=t[n];n++)e.classList.remove("glide__bullets-item--active"),i.index===n&&e.classList.add("glide__bullets-item--active")}),i.on("mount.after",function(){var e=l.querySelectorAll(".glide__slide");r.count=e.length-1}),i.on(["mount.after","run"],function(e){var t=l.querySelector(".glide__control--prev");t.classList.remove("glide__control--disabled"),0===i.index&&t.classList.add("glide__control--disabled")}),i.on("run",function(e){var t=l.querySelector(".glide__control--next");t.classList.remove("glide__control--disabled"),i.index===r.count&&t.classList.add("glide__control--disabled")}),i.on("run",function(e){i.index===r.count&&r.href&&l.classList.remove("glide--active")}),i.on("run.after",function(e){i.index===r.count&&r.href&&(document.location.href=r.href)}),i.on("build.after",function(){var n=0;l.addEventListener("touchstart",function(e){var t=e.changedTouches[0];n=t.pageY},!0),l.addEventListener("touchmove",function(e){var t=e.changedTouches[0];n<t.pageY&&0===window.pageYOffset&&e.preventDefault(),l.classList.contains("glide--dragging")&&e.preventDefault()},!0)}),i.on("build.after",function(){if(void 0===knife_story_options.background||knife_story_options.background.length<1)return l.classList.add("glide--active");var e=new Image;e.addEventListener("load",function(){return l.classList.add("glide--active")}),e.src=knife_story_options.background;var n=document.createElement("div");return n.classList.add("glide__backdrop"),n.style.backgroundImage="url("+knife_story_options.background+")",function(){if(void 0===knife_story_options.blur)return;var e=parseInt(knife_story_options.blur);if(e<=0)return;n.style.margin="-"+e+"px",n.style.filter="blur("+e+"px)"}(),function(){if(void 0===knife_story_options.shadow)return;var e=parseInt(knife_story_options.shadow)/100;if(e<=0||1<e)return;var t=document.createElement("div");t.classList.add("glide__shadow"),t.style.backgroundColor="rgba(0, 0, 0, "+e+")",n.appendChild(t)}(),l.appendChild(n)}),window.addEventListener("pageshow",function(e){e.persisted&&window.location.reload(!1)}),i.mount()}();
!function(){var e=document.querySelector(".post");if(null===e)return;for(var t=e.querySelectorAll(".figure.figure--toc a"),o=0;o<t.length;o++)t[o].addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(this.hash);if(null!==t){var o=t.getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop;window.scroll({top:o-76,behavior:"smooth"})}})}();
"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")});
!function(){if(window.yandexContextAsyncCallbacks=window.yandexContextAsyncCallbacks||[],function(){if("undefined"==typeof knife_yandex_rtb)return;var e=document.querySelector(".entry-footer");if(null===e)return;var n=document.createElement("div");n.classList.add("entry-footer__rtb","widget-rtb"),n.id="yandex_rtb_"+knife_yandex_rtb,e.appendChild(n),window.yandexContextAsyncCallbacks.push(function(){Ya.Context.AdvManager.render({blockId:knife_yandex_rtb,renderTo:n.id,async:!0,onRender:function(e){n.classList.add("widget-rtb--rendered")}})})}(),window.yandexContextAsyncCallbacks.length<1)return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://an.yandex.ru/system/context.js",document.head.appendChild(e)}();