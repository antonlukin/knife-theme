!function(){var e=document.querySelector(".search");if(null===e||"undefined"==typeof knife_search_id)return document.getElementById("toggle-search").classList.add("toggle--hidden");var t="search-gcse",n="gsc-results",r=null,a=function(){if("complete"!==document.readyState)return google.setOnLoadCallback(a,!0);google.search.cse.element.render({gname:t,div:t,tag:"searchresults-only",attributes:{enableHistory:!1,gaQueryParameter:"s",queryParameterName:"s"}}),document.getElementById("search-input").oninput=function(){var e=google.search.cse.element.getElement(t);e.execute(this.value)};var e=window.MutationObserver||window.WebKitMutationObserver;r=new e(function(e){for(var t=0;t<e.length;++t)if(e[t].target.classList.contains(n))return c()}),r.observe(document.getElementById(t),{subtree:!0,attributes:!1,childList:!0,characterData:!1})},s=function(n){var r=document.createElement("div");r.id=t,r.style.display="none",e.appendChild(r),window.__gcse={parsetags:"explicit",callback:a};var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cse.google.com/cse.js?cx="+n;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(s,c)},c=function(){var e=document.getElementById("search-results"),n=document.getElementById(t).querySelectorAll(".gs-result");if(document.getElementById("search-input").value.length>0){for(;e.firstChild;)e.removeChild(e.firstChild);for(var r=function(t){var n={link:t.querySelector("a.gs-title").href,head:t.querySelector("a.gs-title").textContent,text:t.querySelector(".gs-snippet").textContent},r=document.createElement("p");r.className="search__results-head",r.appendChild(document.createTextNode(n.head));var a=document.createElement("p");a.className="search__results-text",a.appendChild(document.createTextNode(n.text));var s=document.createElement("a");return s.className="search__results-link",s.href=n.link,s.appendChild(r),s.appendChild(a),e.appendChild(s)},a=0;a<n.length;a++){if(!n[a].querySelector("a.gs-title")||!n[a].querySelector(".gs-snippet"))return!1;r(n[a])}}};document.getElementById("toggle-search").addEventListener("click",function(e){return e.preventDefault(),document.getElementById("search-input").focus(),!this.classList.contains("toggle--expand")&&("undefined"==typeof window.__gcse?s(knife_search_id):void 0)})}();
!function(){var e=document.getElementById("toggle-menu"),t=document.getElementById("toggle-search");e.addEventListener("click",function(e){return e.preventDefault(),document.querySelector(".search").classList.contains("search--expand")&&t.click(),document.querySelector(".topline__menu").classList.toggle("topline__menu--expand"),this.classList.toggle("toggle--expand")}),t.addEventListener("click",function(t){return t.preventDefault(),document.querySelector(".topline__menu").classList.contains("topline__menu--expand")&&e.click(),document.querySelector(".search").classList.toggle("search--expand"),document.body.classList.toggle("body--search"),this.classList.toggle("toggle--expand")}),window.addEventListener("keydown",function(n){return n=n||window.event,27===n.keyCode&&(document.querySelector(".search").classList.contains("search--expand")&&t.click(),void(document.querySelector(".topline__menu").classList.contains("topline__menu--expand")&&e.click()))},!0)}();
!function(){var e=document.querySelector(".push");if(null===e||"undefined"==typeof knife_push_id)return!1;OneSignal=window.OneSignal||[];var n=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.onesignal.com/sdks/OneSignalSDK.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},t=function(){var e=localStorage.getItem("knife-push");return"undefined"!=typeof Notification&&"default"===Notification.permission&&("string"==typeof e&&Number(e)<Date.now()||(null===e&&localStorage.setItem("knife-push",Date.now()),!1))};document.addEventListener("DOMContentLoaded",function(){return t()!==!1&&(OneSignal.push(["init",{appId:knife_push_id,autoRegister:!1,welcomeNotification:{disable:!0}}]),OneSignal.push(function(){if(e.querySelector(".push__close").addEventListener("click",function(){var n=12096e5;return localStorage.setItem("knife-push",Date.now()+n),e.classList.add("push--hide")}),e.querySelector(".push__button").addEventListener("click",function(){return OneSignal.registerForPushNotifications()}),OneSignal.on("notificationPermissionChange",function(n){return e.classList.add("push--hide")}),OneSignal.isPushNotificationsSupported())return e.classList.remove("push--hide")}),n())},!1)}();
!function(){var e=".share";if(null===document.querySelector(e))return!1;var t={facebook:!1,vkontakte:!1},n=function(e){var t=document.querySelector('link[rel="canonical"]');return t=t&&t.href?encodeURIComponent(t.href):encodeURIComponent(window.location.href.replace(window.location.hash,"")),"vkontakte"===e?"https://vk.com/share.php?act=count&index=0&url="+t:"facebook"===e?"https://graph.facebook.com/?callback=FB.Share&id="+t:void 0},r=function(e,t){var n=Math.round(screen.width/2-t.width/2),r=0;screen.height>t.height&&(r=Math.round(screen.height/3-t.height/2));window.open(e,t.id,"left="+n+",top="+r+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")},a=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=n(e),t.id="share-"+e,document.getElementsByTagName("head")[0].appendChild(t),!0},o=document.querySelectorAll(".share .share__link");if(null===o)return!1;for(var h=0;h<o.length;h++){var c=o[h].dataset.id;o[h].addEventListener("click",function(e){return e.preventDefault(),r(this.href,{width:600,height:400,id:this.dataset.id})}),c in t&&t[c]===!1&&(t[c]=a(c))}window.VK={Share:{count:function(e,t){if(document.getElementById("share-vkontakte").outerHTML="","undefined"!=typeof t&&t)for(var n=document.querySelectorAll(".share .share__link--vkontakte"),r=0;r<n.length;r++){var a=document.createElement("span");a.className="share__count",a.innerHTML=t,n[r].appendChild(a)}}}},window.FB={Share:function(e){if(document.getElementById("share-facebook").outerHTML="","undefined"!=typeof e.share&&e.share.share_count)for(var t=document.querySelectorAll(".share .share__link--facebook"),n=0;n<t.length;n++){var r=document.createElement("span");r.className="share__count",r.innerHTML=e.share.share_count,t[n].appendChild(r)}}}}();