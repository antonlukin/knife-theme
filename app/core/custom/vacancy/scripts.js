"use strict";!function(){var a,s;"undefined"!=typeof knife_theme_custom&&null!==(a=document.querySelector(".entry-content"))&&void 0!==knife_theme_custom.ajaxurl&&(s=function(t,e){var n=document.createElement(t);if(e.hasOwnProperty("class")&&n.classList.add(e.class),e.hasOwnProperty("classes")&&e.classes.forEach(function(t){n.classList.add(t)}),e.hasOwnProperty("text")&&(n.textContent=e.text),e.hasOwnProperty("html")&&(n.innerHTML=e.html),e.hasOwnProperty("attributes"))for(var r in e.attributes)n.setAttribute(r,e.attributes[r]);return e.hasOwnProperty("parent")&&e.parent.appendChild(n),n},knife_theme_custom.fields&&function(t){function n(t){window.setTimeout(function(){t.style.height="auto",t.style.height=t.scrollHeight+"px"},0)}var r,e=s("figure",{classes:["figure","figure--request"],parent:a}),i=s("form",{parent:e}),o=s("button",{text:knife_theme_custom.button,attributes:{type:"submit"}});for(r in t)!function(){var e=s("textarea",{parent:i,attributes:{name:r,required:"required",rows:1,placeholder:t[r]}});e.addEventListener("keydown",function(t){13==t.keyCode&&(t.metaKey||t.ctrlKey)&&o.click(),n(e)}),e.addEventListener("paste",function(){n(e)})}();i.appendChild(o),i.addEventListener("submit",function(t){t.preventDefault();var e={nonce:knife_theme_custom.nonce,time:knife_theme_custom.time,fields:[],formats:[]},n=list.querySelectorAll("li");n.forEach(function(t){t.hasAttribute("data-selected")&&e.formats.push(t.textContent)});var r=i.querySelectorAll("textarea");r.forEach(function(t){e.fields.push({label:t.getAttribute("placeholder"),value:t.value})}),o.setAttribute("disabled","disabled"),o.setAttribute("data-loading",!0);var a=new XMLHttpRequest;a.open("POST",knife_theme_custom.ajaxurl),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(o.removeAttribute("data-loading"),200!==a.status)return o.textContent=knife_theme_custom.error;o.textContent=knife_theme_custom.success,r.forEach(function(t){t.value=""}),n.forEach(function(t){t.removeAttribute("data-selected")})},a.onerror=function(){o.removeAttribute("data-loading"),o.textContent=knife_theme_custom.error},a.send(JSON.stringify(e))})}(knife_theme_custom.fields))}();