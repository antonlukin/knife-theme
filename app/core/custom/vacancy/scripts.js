"use strict";!function(){var s,u;"undefined"!=typeof knife_theme_custom&&null!==(s=document.querySelector(".entry-content"))&&void 0!==knife_theme_custom.ajaxurl&&(u=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var r in t.attributes)n.setAttribute(r,t.attributes[r]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n},knife_theme_custom.fields&&function(e){var t=u("figure",{classes:["figure","figure--request"],parent:s}),n=s.querySelector(".figure--navigation");function r(e){window.setTimeout(function(){e.style.height="auto",e.style.height=e.scrollHeight+"px"},0)}null!==n&&s.insertBefore(t,n);var i,a=u("form",{parent:t}),o=u("button",{text:knife_theme_custom.button,attributes:{type:"submit"}});for(i in e)!function(){var t=u("textarea",{parent:a,attributes:{name:i,required:"required",rows:1,placeholder:e[i]}});r(t),t.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&o.click(),r(t)}),t.addEventListener("paste",function(){r(t)}),window.addEventListener("resize",function(){r(t)})}();a.appendChild(o),a.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_theme_custom.nonce,time:knife_theme_custom.time,heading:knife_theme_custom.heading,fields:[]};knife_theme_custom.mention&&(t.mention=knife_theme_custom.mention);var n=a.querySelectorAll("textarea");n.forEach(function(e){t.fields.push({label:e.getAttribute("placeholder"),value:e.value}),"name"===e.name&&(t.name=e.value)}),o.setAttribute("disabled","disabled"),o.setAttribute("data-loading",!0);var r=new XMLHttpRequest;r.open("POST",knife_theme_custom.ajaxurl),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){if(o.removeAttribute("data-loading"),200!==r.status)return o.textContent=knife_theme_custom.error;o.textContent=knife_theme_custom.success,n.forEach(function(e){e.value=""})},r.onerror=function(){o.removeAttribute("data-loading"),o.textContent=knife_theme_custom.error},r.send(JSON.stringify(t))})}(knife_theme_custom.fields))}();