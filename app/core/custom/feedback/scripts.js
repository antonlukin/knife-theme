"use strict";!function(){var u,s,e,t,n,r,a,i;"undefined"!=typeof knife_theme_custom&&null!==(u=document.querySelector(".entry-content"))&&void 0!==knife_theme_custom.ajaxurl&&(s=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var r in t.attributes)n.setAttribute(r,t.attributes[r]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n},e=function(n){var e=u.querySelector(".figure--formats"),r=s("ul",{parent:e});for(var t in n)!function(e){var t=s("li",{parent:r,text:n[e]});t.addEventListener("click",function(e){return e.preventDefault(),t.hasAttribute("data-selected")?t.removeAttribute("data-selected",!0):void t.setAttribute("data-selected",!0)})}(t);return r}(knife_theme_custom.figure.formats),function(e,a){var t=u.querySelector(".figure--brief"),i=s("form",{parent:t});for(var n in e)s("input",{parent:i,attributes:{name:n,type:"text",placeholder:e[n]}});var o=s("button",{parent:i,text:knife_theme_custom.button,attributes:{type:"submit"}});i.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_theme_custom.nonce,time:knife_theme_custom.time,fields:[],formats:[]};a.querySelectorAll("li").forEach(function(e){e.hasAttribute("data-selected")&&t.formats.push(e.textContent)});var n=i.querySelectorAll("input");n.forEach(function(e){t.fields.push({label:e.getAttribute("placeholder"),value:e.value})}),o.setAttribute("disabled","disabled"),o.setAttribute("data-loading",!0);var r=new XMLHttpRequest;r.open("POST",knife_theme_custom.ajaxurl+"/brief"),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){if(o.removeAttribute("data-loading"),200!==r.status)return o.textContent=knife_theme_custom.error;o.textContent=knife_theme_custom.success,n.forEach(function(e){e.value=""})},r.onerror=function(){o.removeAttribute("data-loading"),o.textContent=knife_theme_custom.error},r.send(JSON.stringify(t))})}(knife_theme_custom.figure.brief,e),t=knife_theme_custom.figure.feedback,n=u.querySelector(".figure--feedback"),r=s("form",{parent:n}),a=s("input",{parent:r,attributes:{type:"email",placeholder:t.email,required:"required"}}),i=s("button",{parent:r,attributes:{type:"submit"},text:t.button}),r.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_theme_custom.nonce,time:knife_theme_custom.time,email:a.value};i.setAttribute("disabled","disabled"),i.setAttribute("data-loading",!0);var n=new XMLHttpRequest;n.open("POST",knife_theme_custom.ajaxurl+"/feedback"),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){if(i.removeAttribute("data-loading"),200!==n.status)return i.textContent=knife_theme_custom.error;i.textContent=knife_theme_custom.success,a.value=""},n.onerror=function(){i.removeAttribute("data-loading"),i.textContent=knife_theme_custom.error},n.send(JSON.stringify(t))}))}();